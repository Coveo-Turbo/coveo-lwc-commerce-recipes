/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function (g, f) {if ("object" == typeof exports && "object" == typeof module) {module.exports = f(require('crypto'));} else if ("function" == typeof define && define.amd) {define("CoveoHeadlessCommerce", ['crypto'], f);} else if ("object" == typeof exports) {exports["CoveoHeadlessCommerce"] = f(require('crypto'));} else {g["CoveoHeadlessCommerce"] = f(g["crypto"]);}}(typeof self !== 'undefined' ? self : typeof globalThis !== 'undefined' ? globalThis : this, (__da) => {var exports = {};var module = { exports };
"use strict";var _C=Object.create;var Gn=Object.defineProperty;var $C=Object.getOwnPropertyDescriptor;var zC=Object.getOwnPropertyNames;var WC=Object.getPrototypeOf,HC=Object.prototype.hasOwnProperty;var KC=(e,t,r)=>t in e?Gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _d=(e,t)=>()=>(e&&(t=e(e=0)),t);var Fe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),cu=(e,t)=>{for(var r in t)Gn(e,r,{get:t[r],enumerable:!0})},$d=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of zC(t))!HC.call(e,n)&&n!==r&&Gn(e,n,{get:()=>t[n],enumerable:!(o=$C(t,n))||o.enumerable});return e};var rt=(e,t,r)=>(r=e!=null?_C(WC(e)):{},$d(t||!e||!e.__esModule?Gn(r,"default",{value:e,enumerable:!0}):r,e)),GC=e=>$d(Gn({},"__esModule",{value:!0}),e);var fe=(e,t,r)=>KC(e,typeof t!="symbol"?t+"":t,r);function di(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?di=function(t){return typeof t}:di=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(e)}function XC(){"navigator"in this||(this.navigator={}),typeof this.navigator.sendBeacon!="function"&&(this.navigator.sendBeacon=ZC.bind(this))}function ZC(e,t){var r=this.event&&this.event.type,o=r==="unload"||r==="beforeunload",n="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("POST",e,!o),n.withCredentials=!0,n.setRequestHeader("Accept","*/*"),YC(t)?(n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.responseType="text"):JC(t)&&t.type&&n.setRequestHeader("Content-Type",t.type);try{n.send(t)}catch{return!1}return!0}var YC,JC,c=_d(()=>{"use strict";YC=function(t){return typeof t=="string"},JC=function(t){return t instanceof Blob};XC.call((typeof window>"u"?"undefined":di(window))==="object"?window:{})});var mu=Fe(Jn=>{"use strict";s();c();Object.defineProperty(Jn,"__esModule",{value:!0});function uu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zd(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lu(e,t,r){return t&&zd(e.prototype,t),r&&zd(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ex(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&su(e,t)}function Fo(e){return Fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fo(e)}function su(e,t){return su=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,n){return o.__proto__=n,o},su(e,t)}function tx(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rx(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yn(e)}function ox(e){var t=tx();return function(){var o=Fo(e),n;if(t){var a=Fo(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return rx(this,n)}}function nx(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Fo(e),e!==null););return e}function mi(){return typeof Reflect<"u"&&Reflect.get?mi=Reflect.get.bind():mi=function(t,r,o){var n=nx(t,r);if(n){var a=Object.getOwnPropertyDescriptor(n,r);return a.get?a.get.call(arguments.length<3?t:o):a.value}},mi.apply(this,arguments)}var Wd=function(){function e(){uu(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return lu(e,[{key:"addEventListener",value:function(r,o,n){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push({callback:o,options:n})}},{key:"removeEventListener",value:function(r,o){if(r in this.listeners){for(var n=this.listeners[r],a=0,u=n.length;a<u;a++)if(n[a].callback===o){n.splice(a,1);return}}}},{key:"dispatchEvent",value:function(r){if(r.type in this.listeners){for(var o=this.listeners[r.type],n=o.slice(),a=0,u=n.length;a<u;a++){var l=n[a];try{l.callback.call(this,r)}catch(m){Promise.resolve().then(function(){throw m})}l.options&&l.options.once&&this.removeEventListener(r.type,l.callback)}return!r.defaultPrevented}}}]),e}(),du=function(e){ex(r,e);var t=ox(r);function r(){var o;return uu(this,r),o=t.call(this),o.listeners||Wd.call(Yn(o)),Object.defineProperty(Yn(o),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(Yn(o),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(Yn(o),"reason",{value:void 0,writable:!0,configurable:!0}),o}return lu(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),mi(Fo(r.prototype),"dispatchEvent",this).call(this,n)}}]),r}(Wd),Hd=function(){function e(){uu(this,e),Object.defineProperty(this,"signal",{value:new du,writable:!0,configurable:!0})}return lu(e,[{key:"abort",value:function(r){var o;try{o=new Event("abort")}catch{typeof document<"u"?document.createEvent?(o=document.createEvent("Event"),o.initEvent("abort",!1,!1)):(o=document.createEventObject(),o.type="abort"):o={type:"abort",bubbles:!1,cancelable:!1}}var n=r;if(n===void 0)if(typeof document>"u")n=new Error("This operation was aborted"),n.name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch{n=new Error("This operation was aborted"),n.name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(o)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();typeof Symbol<"u"&&Symbol.toStringTag&&(Hd.prototype[Symbol.toStringTag]="AbortController",du.prototype[Symbol.toStringTag]="AbortSignal");function ax(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function ix(e){typeof e=="function"&&(e={fetch:e});var t=e,r=t.fetch,o=t.Request,n=o===void 0?r.Request:o,a=t.AbortController,u=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,l=u===void 0?!1:u;if(!ax({fetch:r,Request:n,AbortController:a,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:l}))return{fetch:r,Request:m};var m=n;(m&&!m.prototype.hasOwnProperty("signal")||l)&&(m=function(h,f){var S;f&&f.signal&&(S=f.signal,delete f.signal);var R=new n(h,f);return S&&Object.defineProperty(R,"signal",{writable:!1,enumerable:!1,configurable:!0,value:S}),R},m.prototype=n.prototype);var d=r,p=function(h,f){var S=m&&m.prototype.isPrototypeOf(h)?h.signal:f?f.signal:void 0;if(S){var R;try{R=new DOMException("Aborted","AbortError")}catch{R=new Error("Aborted"),R.name="AbortError"}if(S.aborted)return Promise.reject(R);var P=new Promise(function(A,C){S.addEventListener("abort",function(){return C(R)},{once:!0})});return f&&f.signal&&delete f.signal,Promise.race([P,d(h,f)])}return d(h,f)};return{fetch:p,Request:m}}Jn.AbortController=Hd;Jn.AbortSignal=du;Jn.abortableFetch=ix});var Kd,i,g,s=_d(()=>{"use strict";Kd=rt(mu(),1),i=rt(mu(),1),{fetch:g}=(0,Kd.abortableFetch)({fetch})});var Jm=Fe(ha=>{"use strict";s();c();var Vi=ha&&ha.__assign||function(){return Vi=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Vi.apply(this,arguments)};Object.defineProperty(ha,"__esModule",{value:!0});var gR={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function yR(e){var t=Vi(Vi({},gR),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}ha.getSanitizedOptions=yR});var Xm=Fe(Qu=>{"use strict";s();c();Object.defineProperty(Qu,"__esModule",{value:!0});function hR(e){var t=Math.random()*e;return Math.round(t)}Qu.fullJitter=hR});var Zm=Fe(Bu=>{"use strict";s();c();Object.defineProperty(Bu,"__esModule",{value:!0});function SR(e){return e}Bu.noJitter=SR});var ep=Fe(Uu=>{"use strict";s();c();Object.defineProperty(Uu,"__esModule",{value:!0});var CR=Xm(),xR=Zm();function RR(e){switch(e.jitter){case"full":return CR.fullJitter;case"none":default:return xR.noJitter}}Uu.JitterFactory=RR});var _u=Fe(ju=>{"use strict";s();c();Object.defineProperty(ju,"__esModule",{value:!0});var FR=ep(),vR=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=FR.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,o=this.numOfDelayedAttempts,n=t*Math.pow(r,o);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();ju.Delay=vR});var tp=Fe(Gt=>{"use strict";s();c();var PR=Gt&&Gt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a])},e(t,r)};return function(t,r){e(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),AR=Gt&&Gt.__awaiter||function(e,t,r,o){function n(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function l(p){try{d(o.next(p))}catch(y){u(y)}}function m(p){try{d(o.throw(p))}catch(y){u(y)}}function d(p){p.done?a(p.value):n(p.value).then(l,m)}d((o=o.apply(e,t||[])).next())})},bR=Gt&&Gt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,n,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(d){return function(p){return m([d,p])}}function m(d){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=d[0]&2?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(p){d=[6,p],n=0}finally{o=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(Gt,"__esModule",{value:!0});var IR=_u(),wR=function(e){PR(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return AR(this,void 0,void 0,function(){return bR(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(IR.Delay);Gt.SkipFirstDelay=wR});var rp=Fe(Sa=>{"use strict";s();c();var ER=Sa&&Sa.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a])},e(t,r)};return function(t,r){e(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(Sa,"__esModule",{value:!0});var TR=_u(),OR=function(e){ER(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(TR.Delay);Sa.AlwaysDelay=OR});var op=Fe($u=>{"use strict";s();c();Object.defineProperty($u,"__esModule",{value:!0});var qR=tp(),kR=rp();function VR(e,t){var r=DR(e);return r.setAttemptNumber(t),r}$u.DelayFactory=VR;function DR(e){return e.delayFirstAttempt?new kR.AlwaysDelay(e):new qR.SkipFirstDelay(e)}});var np=Fe(to=>{"use strict";s();c();var zu=to&&to.__awaiter||function(e,t,r,o){function n(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function l(p){try{d(o.next(p))}catch(y){u(y)}}function m(p){try{d(o.throw(p))}catch(y){u(y)}}function d(p){p.done?a(p.value):n(p.value).then(l,m)}d((o=o.apply(e,t||[])).next())})},Wu=to&&to.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,n,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(d){return function(p){return m([d,p])}}function m(d){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=d[0]&2?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(p){d=[6,p],n=0}finally{o=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(to,"__esModule",{value:!0});var NR=Jm(),MR=op();function LR(e,t){return t===void 0&&(t={}),zu(this,void 0,void 0,function(){var r,o;return Wu(this,function(n){switch(n.label){case 0:return r=NR.getSanitizedOptions(t),o=new QR(e,r),[4,o.execute()];case 1:return[2,n.sent()]}})})}to.backOff=LR;var QR=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return zu(this,void 0,void 0,function(){var t,r;return Wu(this,function(o){switch(o.label){case 0:if(this.attemptLimitReached)return[3,7];o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return o.sent(),[4,this.request()];case 3:return[2,o.sent()];case 4:return t=o.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=o.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return zu(this,void 0,void 0,function(){var t;return Wu(this,function(r){switch(r.label){case 0:return t=MR.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var Sc=Fe((wl,El)=>{"use strict";s();c();(function(e,t){typeof wl=="object"&&typeof El<"u"?El.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=t()})(wl,function(){"use strict";var e=1e3,t=6e4,r=36e5,o="millisecond",n="second",a="minute",u="hour",l="day",m="week",d="month",p="quarter",y="year",h="date",f="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var Q=["th","st","nd","rd"],L=N%100;return"["+N+(Q[(L-20)%10]||Q[L]||Q[0])+"]"}},A=function(N,Q,L){var _=String(N);return!_||_.length>=Q?N:""+Array(Q+1-_.length).join(L)+N},C={s:A,z:function(N){var Q=-N.utcOffset(),L=Math.abs(Q),_=Math.floor(L/60),B=L%60;return(Q<=0?"+":"-")+A(_,2,"0")+":"+A(B,2,"0")},m:function N(Q,L){if(Q.date()<L.date())return-N(L,Q);var _=12*(L.year()-Q.year())+(L.month()-Q.month()),B=Q.clone().add(_,d),Y=L-B<0,H=Q.clone().add(_+(Y?-1:1),d);return+(-(_+(L-B)/(Y?B-H:H-B))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:d,y,w:m,d:l,D:h,h:u,m:a,s:n,ms:o,Q:p}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},x="en",F={};F[x]=P;var I="$isDayjsObject",O=function(N){return N instanceof $||!(!N||!N[I])},w=function N(Q,L,_){var B;if(!Q)return x;if(typeof Q=="string"){var Y=Q.toLowerCase();F[Y]&&(B=Y),L&&(F[Y]=L,B=Y);var H=Q.split("-");if(!B&&H.length>1)return N(H[0])}else{var oe=Q.name;F[oe]=Q,B=oe}return!_&&B&&(x=B),B||!_&&x},D=function(N,Q){if(O(N))return N.clone();var L=typeof Q=="object"?Q:{};return L.date=N,L.args=arguments,new $(L)},M=C;M.l=w,M.i=O,M.w=function(N,Q){return D(N,{locale:Q.$L,utc:Q.$u,x:Q.$x,$offset:Q.$offset})};var $=function(){function N(L){this.$L=w(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[I]=!0}var Q=N.prototype;return Q.parse=function(L){this.$d=function(_){var B=_.date,Y=_.utc;if(B===null)return new Date(NaN);if(M.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var H=B.match(S);if(H){var oe=H[2]-1||0,se=(H[7]||"0").substring(0,3);return Y?new Date(Date.UTC(H[1],oe,H[3]||1,H[4]||0,H[5]||0,H[6]||0,se)):new Date(H[1],oe,H[3]||1,H[4]||0,H[5]||0,H[6]||0,se)}}return new Date(B)}(L),this.init()},Q.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},Q.$utils=function(){return M},Q.isValid=function(){return this.$d.toString()!==f},Q.isSame=function(L,_){var B=D(L);return this.startOf(_)<=B&&B<=this.endOf(_)},Q.isAfter=function(L,_){return D(L)<this.startOf(_)},Q.isBefore=function(L,_){return this.endOf(_)<D(L)},Q.$g=function(L,_,B){return M.u(L)?this[_]:this.set(B,L)},Q.unix=function(){return Math.floor(this.valueOf()/1e3)},Q.valueOf=function(){return this.$d.getTime()},Q.startOf=function(L,_){var B=this,Y=!!M.u(_)||_,H=M.p(L),oe=function(pt,Re){var Ge=M.w(B.$u?Date.UTC(B.$y,Re,pt):new Date(B.$y,Re,pt),B);return Y?Ge:Ge.endOf(l)},se=function(pt,Re){return M.w(B.toDate()[pt].apply(B.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(Re)),B)},le=this.$W,ae=this.$M,ue=this.$D,lr="set"+(this.$u?"UTC":"");switch(H){case y:return Y?oe(1,0):oe(31,11);case d:return Y?oe(1,ae):oe(0,ae+1);case m:var Ct=this.$locale().weekStart||0,$t=(le<Ct?le+7:le)-Ct;return oe(Y?ue-$t:ue+(6-$t),ae);case l:case h:return se(lr+"Hours",0);case u:return se(lr+"Minutes",1);case a:return se(lr+"Seconds",2);case n:return se(lr+"Milliseconds",3);default:return this.clone()}},Q.endOf=function(L){return this.startOf(L,!1)},Q.$set=function(L,_){var B,Y=M.p(L),H="set"+(this.$u?"UTC":""),oe=(B={},B[l]=H+"Date",B[h]=H+"Date",B[d]=H+"Month",B[y]=H+"FullYear",B[u]=H+"Hours",B[a]=H+"Minutes",B[n]=H+"Seconds",B[o]=H+"Milliseconds",B)[Y],se=Y===l?this.$D+(_-this.$W):_;if(Y===d||Y===y){var le=this.clone().set(h,1);le.$d[oe](se),le.init(),this.$d=le.set(h,Math.min(this.$D,le.daysInMonth())).$d}else oe&&this.$d[oe](se);return this.init(),this},Q.set=function(L,_){return this.clone().$set(L,_)},Q.get=function(L){return this[M.p(L)]()},Q.add=function(L,_){var B,Y=this;L=Number(L);var H=M.p(_),oe=function(ae){var ue=D(Y);return M.w(ue.date(ue.date()+Math.round(ae*L)),Y)};if(H===d)return this.set(d,this.$M+L);if(H===y)return this.set(y,this.$y+L);if(H===l)return oe(1);if(H===m)return oe(7);var se=(B={},B[a]=t,B[u]=r,B[n]=e,B)[H]||1,le=this.$d.getTime()+L*se;return M.w(le,this)},Q.subtract=function(L,_){return this.add(-1*L,_)},Q.format=function(L){var _=this,B=this.$locale();if(!this.isValid())return B.invalidDate||f;var Y=L||"YYYY-MM-DDTHH:mm:ssZ",H=M.z(this),oe=this.$H,se=this.$m,le=this.$M,ae=B.weekdays,ue=B.months,lr=B.meridiem,Ct=function(Re,Ge,zt,dr){return Re&&(Re[Ge]||Re(_,Y))||zt[Ge].slice(0,dr)},$t=function(Re){return M.s(oe%12||12,Re,"0")},pt=lr||function(Re,Ge,zt){var dr=Re<12?"AM":"PM";return zt?dr.toLowerCase():dr};return Y.replace(R,function(Re,Ge){return Ge||function(zt){switch(zt){case"YY":return String(_.$y).slice(-2);case"YYYY":return M.s(_.$y,4,"0");case"M":return le+1;case"MM":return M.s(le+1,2,"0");case"MMM":return Ct(B.monthsShort,le,ue,3);case"MMMM":return Ct(ue,le);case"D":return _.$D;case"DD":return M.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return Ct(B.weekdaysMin,_.$W,ae,2);case"ddd":return Ct(B.weekdaysShort,_.$W,ae,3);case"dddd":return ae[_.$W];case"H":return String(oe);case"HH":return M.s(oe,2,"0");case"h":return $t(1);case"hh":return $t(2);case"a":return pt(oe,se,!0);case"A":return pt(oe,se,!1);case"m":return String(se);case"mm":return M.s(se,2,"0");case"s":return String(_.$s);case"ss":return M.s(_.$s,2,"0");case"SSS":return M.s(_.$ms,3,"0");case"Z":return H}return null}(Re)||H.replace(":","")})},Q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Q.diff=function(L,_,B){var Y,H=this,oe=M.p(_),se=D(L),le=(se.utcOffset()-this.utcOffset())*t,ae=this-se,ue=function(){return M.m(H,se)};switch(oe){case y:Y=ue()/12;break;case d:Y=ue();break;case p:Y=ue()/3;break;case m:Y=(ae-le)/6048e5;break;case l:Y=(ae-le)/864e5;break;case u:Y=ae/r;break;case a:Y=ae/t;break;case n:Y=ae/e;break;default:Y=ae}return B?Y:M.a(Y)},Q.daysInMonth=function(){return this.endOf(d).$D},Q.$locale=function(){return F[this.$L]},Q.locale=function(L,_){if(!L)return this.$L;var B=this.clone(),Y=w(L,_,!0);return Y&&(B.$L=Y),B},Q.clone=function(){return M.w(this.$d,this)},Q.toDate=function(){return new Date(this.valueOf())},Q.toJSON=function(){return this.isValid()?this.toISOString():null},Q.toISOString=function(){return this.$d.toISOString()},Q.toString=function(){return this.$d.toUTCString()},N}(),X=$.prototype;return D.prototype=X,[["$ms",o],["$s",n],["$m",a],["$H",u],["$W",l],["$M",d],["$y",y],["$D",h]].forEach(function(N){X[N[1]]=function(Q){return this.$g(Q,N[0],N[1])}}),D.extend=function(N,Q){return N.$i||(N(Q,$,D),N.$i=!0),D},D.locale=w,D.isDayjs=O,D.unix=function(N){return D(1e3*N)},D.en=F[x],D.Ls=F,D.p={},D})});var Df=Fe((Tl,Ol)=>{"use strict";s();c();(function(e,t){typeof Tl=="object"&&typeof Ol<"u"?Ol.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(Tl,function(){"use strict";var e="month",t="quarter";return function(r,o){var n=o.prototype;n.quarter=function(l){return this.$utils().u(l)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(l-1))};var a=n.add;n.add=function(l,m){return l=Number(l),this.$utils().p(m)===t?this.add(3*l,e):a.bind(this)(l,m)};var u=n.startOf;n.startOf=function(l,m){var d=this.$utils(),p=!!d.u(m)||m;if(d.p(l)===t){var y=this.quarter()-1;return p?this.month(3*y).startOf(e).startOf("day"):this.month(3*y+2).endOf(e).endOf("day")}return u.bind(this)(l,m)}}})});var Nf=Fe((ql,kl)=>{"use strict";s();c();(function(e,t){typeof ql=="object"&&typeof kl<"u"?kl.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(ql,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,o=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,a={},u=function(f){return(f=+f)+(f>68?1900:2e3)},l=function(f){return function(S){this[f]=+S}},m=[/[+-]\d\d:?(\d\d)?|Z/,function(f){(this.zone||(this.zone={})).offset=function(S){if(!S||S==="Z")return 0;var R=S.match(/([+-]|\d\d)/g),P=60*R[1]+(+R[2]||0);return P===0?0:R[0]==="+"?-P:P}(f)}],d=function(f){var S=a[f];return S&&(S.indexOf?S:S.s.concat(S.f))},p=function(f,S){var R,P=a.meridiem;if(P){for(var A=1;A<=24;A+=1)if(f.indexOf(P(A,0,S))>-1){R=A>12;break}}else R=f===(S?"pm":"PM");return R},y={A:[n,function(f){this.afternoon=p(f,!1)}],a:[n,function(f){this.afternoon=p(f,!0)}],S:[/\d/,function(f){this.milliseconds=100*+f}],SS:[r,function(f){this.milliseconds=10*+f}],SSS:[/\d{3}/,function(f){this.milliseconds=+f}],s:[o,l("seconds")],ss:[o,l("seconds")],m:[o,l("minutes")],mm:[o,l("minutes")],H:[o,l("hours")],h:[o,l("hours")],HH:[o,l("hours")],hh:[o,l("hours")],D:[o,l("day")],DD:[r,l("day")],Do:[n,function(f){var S=a.ordinal,R=f.match(/\d+/);if(this.day=R[0],S)for(var P=1;P<=31;P+=1)S(P).replace(/\[|\]/g,"")===f&&(this.day=P)}],M:[o,l("month")],MM:[r,l("month")],MMM:[n,function(f){var S=d("months"),R=(d("monthsShort")||S.map(function(P){return P.slice(0,3)})).indexOf(f)+1;if(R<1)throw new Error;this.month=R%12||R}],MMMM:[n,function(f){var S=d("months").indexOf(f)+1;if(S<1)throw new Error;this.month=S%12||S}],Y:[/[+-]?\d+/,l("year")],YY:[r,function(f){this.year=u(f)}],YYYY:[/\d{4}/,l("year")],Z:m,ZZ:m};function h(f){var S,R;S=f,R=a&&a.formats;for(var P=(f=S.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(w,D,M){var $=M&&M.toUpperCase();return D||R[M]||e[M]||R[$].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(X,N,Q){return N||Q.slice(1)})})).match(t),A=P.length,C=0;C<A;C+=1){var x=P[C],F=y[x],I=F&&F[0],O=F&&F[1];P[C]=O?{regex:I,parser:O}:x.replace(/^\[|\]$/g,"")}return function(w){for(var D={},M=0,$=0;M<A;M+=1){var X=P[M];if(typeof X=="string")$+=X.length;else{var N=X.regex,Q=X.parser,L=w.slice($),_=N.exec(L)[0];Q.call(D,_),w=w.replace(_,"")}}return function(B){var Y=B.afternoon;if(Y!==void 0){var H=B.hours;Y?H<12&&(B.hours+=12):H===12&&(B.hours=0),delete B.afternoon}}(D),D}}return function(f,S,R){R.p.customParseFormat=!0,f&&f.parseTwoDigitYear&&(u=f.parseTwoDigitYear);var P=S.prototype,A=P.parse;P.parse=function(C){var x=C.date,F=C.utc,I=C.args;this.$u=F;var O=I[1];if(typeof O=="string"){var w=I[2]===!0,D=I[3]===!0,M=w||D,$=I[2];D&&($=I[2]),a=this.$locale(),!w&&$&&(a=R.Ls[$]),this.$d=function(L,_,B){try{if(["x","X"].indexOf(_)>-1)return new Date((_==="X"?1e3:1)*L);var Y=h(_)(L),H=Y.year,oe=Y.month,se=Y.day,le=Y.hours,ae=Y.minutes,ue=Y.seconds,lr=Y.milliseconds,Ct=Y.zone,$t=new Date,pt=se||(H||oe?1:$t.getDate()),Re=H||$t.getFullYear(),Ge=0;H&&!oe||(Ge=oe>0?oe-1:$t.getMonth());var zt=le||0,dr=ae||0,au=ue||0,iu=lr||0;return Ct?new Date(Date.UTC(Re,Ge,pt,zt,dr,au,iu+60*Ct.offset*1e3)):B?new Date(Date.UTC(Re,Ge,pt,zt,dr,au,iu)):new Date(Re,Ge,pt,zt,dr,au,iu)}catch{return new Date("")}}(x,O,F),this.init(),$&&$!==!0&&(this.$L=this.locale($).$L),M&&x!=this.format(O)&&(this.$d=new Date("")),a={}}else if(O instanceof Array)for(var X=O.length,N=1;N<=X;N+=1){I[1]=O[N-1];var Q=R.apply(this,I);if(Q.isValid()){this.$d=Q.$d,this.$L=Q.$L,this.init();break}N===X&&(this.$d=new Date(""))}else A.call(this,C)}}})});var ch=Fe((b8,ih)=>{"use strict";s();c();var Ob=/(^|; )Coveo-Pendragon=([^;]*)/;ih.exports=()=>Ob.exec(document.cookie)?.pop()||null});var sh=Fe((ld,dd)=>{"use strict";s();c();(function(e,t){typeof ld=="object"&&typeof dd<"u"?dd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_timezone=t()})(ld,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,o,n){var a,u=function(p,y,h){h===void 0&&(h={});var f=new Date(p),S=function(R,P){P===void 0&&(P={});var A=P.timeZoneName||"short",C=R+"|"+A,x=t[C];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:R,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:A}),t[C]=x),x}(y,h);return S.formatToParts(f)},l=function(p,y){for(var h=u(p,y),f=[],S=0;S<h.length;S+=1){var R=h[S],P=R.type,A=R.value,C=e[P];C>=0&&(f[C]=parseInt(A,10))}var x=f[3],F=x===24?0:x,I=f[0]+"-"+f[1]+"-"+f[2]+" "+F+":"+f[4]+":"+f[5]+":000",O=+p;return(n.utc(I).valueOf()-(O-=O%1e3))/6e4},m=o.prototype;m.tz=function(p,y){p===void 0&&(p=a);var h,f=this.utcOffset(),S=this.toDate(),R=S.toLocaleString("en-US",{timeZone:p}),P=Math.round((S-new Date(R))/1e3/60),A=15*-Math.round(S.getTimezoneOffset()/15)-P;if(!Number(A))h=this.utcOffset(0,y);else if(h=n(R,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(A,!0),y){var C=h.utcOffset();h=h.add(f-C,"minute")}return h.$x.$timezone=p,h},m.offsetName=function(p){var y=this.$x.$timezone||n.tz.guess(),h=u(this.valueOf(),y,{timeZoneName:p}).find(function(f){return f.type.toLowerCase()==="timezonename"});return h&&h.value};var d=m.startOf;m.startOf=function(p,y){if(!this.$x||!this.$x.$timezone)return d.call(this,p,y);var h=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(h,p,y).tz(this.$x.$timezone,!0)},n.tz=function(p,y,h){var f=h&&y,S=h||y||a,R=l(+n(),S);if(typeof p!="string")return n(p).tz(S);var P=function(F,I,O){var w=F-60*I*1e3,D=l(w,O);if(I===D)return[w,I];var M=l(w-=60*(D-I)*1e3,O);return D===M?[w,D]:[F-60*Math.min(D,M)*1e3,Math.max(D,M)]}(n.utc(p,f).valueOf(),R,S),A=P[0],C=P[1],x=n(A).utcOffset(C);return x.$x.$timezone=S,x},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(p){a=p}}})});var uh=Fe((md,pd)=>{"use strict";s();c();(function(e,t){typeof md=="object"&&typeof pd<"u"?pd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_utc=t()})(md,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(o,n,a){var u=n.prototype;a.utc=function(f){var S={date:f,utc:!0,args:arguments};return new n(S)},u.utc=function(f){var S=a(this.toDate(),{locale:this.$L,utc:!0});return f?S.add(this.utcOffset(),e):S},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(f){f.utc&&(this.$u=!0),this.$utils().u(f.$offset)||(this.$offset=f.$offset),l.call(this,f)};var m=u.init;u.init=function(){if(this.$u){var f=this.$d;this.$y=f.getUTCFullYear(),this.$M=f.getUTCMonth(),this.$D=f.getUTCDate(),this.$W=f.getUTCDay(),this.$H=f.getUTCHours(),this.$m=f.getUTCMinutes(),this.$s=f.getUTCSeconds(),this.$ms=f.getUTCMilliseconds()}else m.call(this)};var d=u.utcOffset;u.utcOffset=function(f,S){var R=this.$utils().u;if(R(f))return this.$u?0:R(this.$offset)?d.call(this):this.$offset;if(typeof f=="string"&&(f=function(x){x===void 0&&(x="");var F=x.match(t);if(!F)return null;var I=(""+F[0]).match(r)||["-",0,0],O=I[0],w=60*+I[1]+ +I[2];return w===0?0:O==="+"?w:-w}(f),f===null))return this;var P=Math.abs(f)<=16?60*f:f,A=this;if(S)return A.$offset=P,A.$u=f===0,A;if(f!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(A=this.local().add(P+C,e)).$offset=P,A.$x.$localOffset=C}else A=this.utc();return A};var p=u.format;u.format=function(f){var S=f||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,S)},u.valueOf=function(){var f=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*f},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var y=u.toDate;u.toDate=function(f){return f==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():y.call(this)};var h=u.diff;u.diff=function(f,S,R){if(f&&this.$u===f.$u)return h.call(this,f,S,R);var P=this.local(),A=a(f).local();return h.call(P,A,S,R)}}})});var Fh=Fe((m9,Rh)=>{"use strict";s();c();function Bb(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Rh.exports=Ub;function Ub(e,t,r){var o=r&&r.stringify||Bb,n=1;if(typeof e=="object"&&e!==null){var a=t.length+n;if(a===1)return e;var u=new Array(a);u[0]=o(e);for(var l=1;l<a;l++)u[l]=o(t[l]);return u.join(" ")}if(typeof e!="string")return e;var m=t.length;if(m===0)return e;for(var d="",p=1-n,y=-1,h=e&&e.length||0,f=0;f<h;){if(e.charCodeAt(f)===37&&f+1<h){switch(y=y>-1?y:0,e.charCodeAt(f+1)){case 100:case 102:if(p>=m||t[p]==null)break;y<f&&(d+=e.slice(y,f)),d+=Number(t[p]),y=f+2,f++;break;case 105:if(p>=m||t[p]==null)break;y<f&&(d+=e.slice(y,f)),d+=Math.floor(Number(t[p])),y=f+2,f++;break;case 79:case 111:case 106:if(p>=m||t[p]===void 0)break;y<f&&(d+=e.slice(y,f));var S=typeof t[p];if(S==="string"){d+="'"+t[p]+"'",y=f+2,f++;break}if(S==="function"){d+=t[p].name||"<anonymous>",y=f+2,f++;break}d+=o(t[p]),y=f+2,f++;break;case 115:if(p>=m)break;y<f&&(d+=e.slice(y,f)),d+=String(t[p]),y=f+2,f++;break;case 37:y<f&&(d+=e.slice(y,f)),d+="%",y=f+2,f++,p--;break}++p}++f}return y===-1?e:(y<h&&(d+=e.slice(y)),d)}});var wh=Fe((g9,Ps)=>{"use strict";s();c();var vh=Fh();Ps.exports=ur;var ti=rI().console||{},jb={mapHttpRequest:Rs,mapHttpResponse:Rs,wrapRequestSerializer:yd,wrapResponseSerializer:yd,wrapErrorSerializer:yd,req:Rs,res:Rs,err:Ah,errWithCause:Ah};function Fs(e,t){return e==="silent"?1/0:t.levels.values[e]}var Cd=Symbol("pino.logFuncs"),hd=Symbol("pino.hierarchy"),_b={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Ph(e,t){let r={logger:t,parent:e[hd]};t[hd]=r}function $b(e,t,r){let o={};t.forEach(n=>{o[n]=r[n]?r[n]:ti[n]||ti[_b[n]||"log"]||ri}),e[Cd]=o}function zb(e,t){return Array.isArray(e)?e.filter(function(o){return o!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function ur(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||ti;e.browser.write&&(e.browser.asObject=!0);let o=e.serializers||{},n=zb(e.browser.serialize,o),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let u=Object.keys(e.customLevels||{}),l=["error","fatal","warn","info","debug","trace"].concat(u);typeof r=="function"&&l.forEach(function(R){r[R]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let m=e.level||"info",d=Object.create(r);d.log||(d.log=ri),$b(d,l,r),Ph({},d),Object.defineProperty(d,"levelVal",{get:y}),Object.defineProperty(d,"level",{get:h,set:f});let p={transmit:t,serialize:n,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:l,timestamp:Zb(e)};d.levels=Wb(e),d.level=m,d.setMaxListeners=d.getMaxListeners=d.emit=d.addListener=d.on=d.prependListener=d.once=d.prependOnceListener=d.removeListener=d.removeAllListeners=d.listeners=d.listenerCount=d.eventNames=d.write=d.flush=ri,d.serializers=o,d._serialize=n,d._stdErrSerialize=a,d.child=S,t&&(d._logEvent=Sd());function y(){return Fs(this.level,this)}function h(){return this._level}function f(R){if(R!=="silent"&&!this.levels.values[R])throw Error("unknown level "+R);this._level=R,ho(this,p,d,"error"),ho(this,p,d,"fatal"),ho(this,p,d,"warn"),ho(this,p,d,"info"),ho(this,p,d,"debug"),ho(this,p,d,"trace"),u.forEach(P=>{ho(this,p,d,P)})}function S(R,P){if(!R)throw new Error("missing bindings for child Pino");P=P||{},n&&R.serializers&&(P.serializers=R.serializers);let A=P.serializers;if(n&&A){var C=Object.assign({},o,A),x=e.browser.serialize===!0?Object.keys(C):n;delete R.serializers,vs([R],x,C,this._stdErrSerialize)}function F(O){this._childLevel=(O._childLevel|0)+1,this.bindings=R,C&&(this.serializers=C,this._serialize=x),t&&(this._logEvent=Sd([].concat(O._logEvent.bindings,R)))}F.prototype=this;let I=new F(this);return Ph(this,I),I.level=this.level,I}return d}function Wb(e){let t=e.customLevels||{},r=Object.assign({},ur.levels.values,t),o=Object.assign({},ur.levels.labels,Hb(t));return{values:r,labels:o}}function Hb(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}ur.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ur.stdSerializers=jb;ur.stdTimeFunctions=Object.assign({},{nullTime:bh,epochTime:Ih,unixTime:eI,isoTime:tI});function Kb(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[hd];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function ho(e,t,r,o){if(Object.defineProperty(e,o,{value:Fs(e.level,r)>Fs(o,r)?ri:r[Cd][o],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[o]===ri)return;e[o]=Yb(e,t,r,o);let n=Kb(e);n.length!==0&&(e[o]=Gb(n,e[o]))}function Gb(e,t){return function(){return t.apply(this,[...e,...arguments])}}function Yb(e,t,r,o){return function(n){return function(){let u=t.timestamp(),l=new Array(arguments.length),m=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ti?ti:this;for(var d=0;d<l.length;d++)l[d]=arguments[d];if(t.serialize&&!t.asObject&&vs(l,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?n.call(m,Jb(this,o,l,u,t.formatters)):n.apply(m,l),t.transmit){let p=t.transmit.level||e._level,y=r.levels.values[p],h=r.levels.values[o];if(h<y)return;Xb(this,{ts:u,methodLevel:o,methodValue:h,transmitLevel:p,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:Fs(e._level,r)},l)}}}(e[Cd][o])}function Jb(e,t,r,o,n={}){let{level:a=()=>e.levels.values[t],log:u=h=>h}=n;e._serialize&&vs(r,e._serialize,e.serializers,e._stdErrSerialize);let l=r.slice(),m=l[0],d={};o&&(d.time=o),d.level=a(t,e.levels.values[t]);let p=(e._childLevel|0)+1;if(p<1&&(p=1),m!==null&&typeof m=="object"){for(;p--&&typeof l[0]=="object";)Object.assign(d,l.shift());m=l.length?vh(l.shift(),l):void 0}else typeof m=="string"&&(m=vh(l.shift(),l));return m!==void 0&&(d.msg=m),u(d)}function vs(e,t,r,o){for(let n in e)if(o&&e[n]instanceof Error)e[n]=ur.stdSerializers.err(e[n]);else if(typeof e[n]=="object"&&!Array.isArray(e[n]))for(let a in e[n])t&&t.indexOf(a)>-1&&a in r&&(e[n][a]=r[a](e[n][a]))}function Xb(e,t,r){let o=t.send,n=t.ts,a=t.methodLevel,u=t.methodValue,l=t.val,m=e._logEvent.bindings;vs(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(d){return m.indexOf(d)===-1}),e._logEvent.level.label=a,e._logEvent.level.value=u,o(a,e._logEvent,l),e._logEvent=Sd(m)}function Sd(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Ah(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function Zb(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?bh:Ih}function Rs(){return{}}function yd(e){return e}function ri(){}function bh(){return!1}function Ih(){return Date.now()}function eI(){return Math.round(Date.now()/1e3)}function tI(){return new Date(Date.now()).toISOString()}function rI(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}Ps.exports.default=ur;Ps.exports.pino=ur});var eT={};cu(eT,{HighlightUtils:()=>Lu,ProductTemplatesHelpers:()=>NC,Selectors:()=>Du,SortBy:()=>ot,SortDirection:()=>fr,buildCart:()=>bp,buildCommerceEngine:()=>Dh,buildContext:()=>aS,buildController:()=>te,buildDateRange:()=>nr,buildFieldSuggestionsGenerator:()=>jC,buildFieldsSortCriterion:()=>da,buildInstantProducts:()=>IC,buildNotifyTrigger:()=>MC,buildProductListing:()=>RC,buildProductTemplatesManager:()=>VC,buildProductView:()=>vC,buildQueryTrigger:()=>QC,buildRecentQueriesList:()=>bC,buildRecommendations:()=>FC,buildRedirectionTrigger:()=>LC,buildRelevanceSortCriterion:()=>gt,buildSearch:()=>SC,buildSearchBox:()=>ou,buildStandaloneSearchBox:()=>qC,deserializeRelativeDate:()=>Wf,getAnalyticsNextApiBaseUrl:()=>Di,getCommerceApiBaseUrl:()=>ko,getOrganizationEndpoint:()=>Ne,getSampleCommerceEngineConfiguration:()=>Vh,loadCartActions:()=>fI,loadCategoryFacetSetActions:()=>hI,loadConfigurationActions:()=>bI,loadContextActions:()=>sI,loadCoreFacetActions:()=>yI,loadDateFacetActions:()=>xI,loadInstantProductsActions:()=>VI,loadLocationFacetActions:()=>CI,loadNumericFacetActions:()=>RI,loadPaginationActions:()=>mI,loadProductActions:()=>pI,loadProductListingActions:()=>lI,loadProductListingParametersActions:()=>EI,loadQueryActions:()=>II,loadQuerySetActions:()=>vI,loadQuerySuggestActions:()=>AI,loadRecentQueriesActions:()=>DI,loadRecommendationsActions:()=>dI,loadRegularFacetActions:()=>SI,loadSearchActions:()=>uI,loadSearchParametersActions:()=>wI,loadSortActions:()=>gI,loadStandaloneSearchBoxSetActions:()=>QI,loadTriggersActions:()=>TI,validateRelativeDate:()=>Pr});module.exports=GC(eT);s();c();var Du={};cu(Du,{ProductListing:()=>Vu,Search:()=>ku});s();c();s();c();var Gd="coveo-headless-internal-state",z=Symbol.for(Gd),Yd=e=>new Proxy(e,{ownKeys(t){return Reflect.ownKeys(t).filter(r=>r!==z)},get(t,r,o){return typeof r=="symbol"&&r.description===Gd&&r!==z&&e.logger.warn(`You might be loading Headless twice. Please check your setup.
If you are trying to access the inner state... Don't`),Reflect.get(t,r,o)}});s();c();s();c();function cx(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Xn(r)}var Xn=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},ne=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},o=[];for(let n in this.definition){let a=this.definition[n].validate(r[n]);a&&o.push(`${n}: ${a}`)}if(o.length)throw cx(o,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},de=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&K(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function vo(e){return e===void 0}function sx(e){return e===null}function K(e){return vo(e)||sx(e)}var U=class{constructor(e={}){fe(this,"value");this.config=e,this.value=new de(e)}validate(e){let t=this.value.validate(e);return t||(ux(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function ux(e){return vo(e)||Jd(e)}function Jd(e){return typeof e=="number"&&!isNaN(e)}var W=class{constructor(e={}){fe(this,"value");this.value=new de(e)}validate(e){let t=this.value.validate(e);return t||(lx(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function lx(e){return vo(e)||Xd(e)}function Xd(e){return typeof e=="boolean"}var dx=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,T=class{constructor(e={}){fe(this,"value");fe(this,"config");this.config={emptyAllowed:!0,url:!1,...e},this.value=new de(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:o,constrainTo:n,ISODate:a}=this.config,u=this.value.validate(e);if(u)return u;if(vo(e))return null;if(!pi(e))return"value is not a string.";if(!t&&!e.length)return"value is an empty string.";if(r)try{new URL(e)}catch{return"value is not a valid URL."}return o&&!o.test(e)?`value did not match provided regex ${o}`:n&&!n.includes(e)?`value should be one of: ${n.join(", ")}.`:a&&!(dx.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null}get default(){return this.value.default}get required(){return this.value.required}};function pi(e){return Object.prototype.toString.call(e)==="[object String]"}var k=class{constructor(e={}){fe(this,"config");this.config={options:{required:!1},values:{},...e}}validate(e){if(vo(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Zd(e))return"value is not an object";for(let[r,o]of Object.entries(this.config.values))if(o.required&&K(e[r]))return`value does not contain ${r}`;let t="";for(let[r,o]of Object.entries(this.config.values)){let n=e[r],a=o.validate(n);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Zd(e){return e!==void 0&&typeof e=="object"}var ee=class{constructor(e={}){fe(this,"value");this.config=e,this.value=new de(this.config)}validate(e){if(!K(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(K(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(o=>{this.config.each.required&&K(o)&&(r=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(o,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Xd(e)||pi(e)||Jd(e)||Zd(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function fi(e){return Array.isArray(e)}var ft=class{constructor(e){fe(this,"value");this.config=e,this.value=new de(e)}validate(e){let t=this.value.validate(e);return t!==null?t:vo(e)||Object.values(this.config.enum).find(o=>o===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};s();c();s();c();function Ae(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mx=typeof Symbol=="function"&&Symbol.observable||"@@observable",em=mx,pu=()=>Math.random().toString(36).substring(7).split("").join("."),px={INIT:`@@redux/INIT${pu()}`,REPLACE:`@@redux/REPLACE${pu()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pu()}`},gi=px;function xt(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function fu(e,t,r){if(typeof e!="function")throw new Error(Ae(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ae(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ae(1));return r(fu)(e,t)}let o=e,n=t,a=new Map,u=a,l=0,m=!1;function d(){u===a&&(u=new Map,a.forEach((P,A)=>{u.set(A,P)}))}function p(){if(m)throw new Error(Ae(3));return n}function y(P){if(typeof P!="function")throw new Error(Ae(4));if(m)throw new Error(Ae(5));let A=!0;d();let C=l++;return u.set(C,P),function(){if(A){if(m)throw new Error(Ae(6));A=!1,d(),u.delete(C),a=null}}}function h(P){if(!xt(P))throw new Error(Ae(7));if(typeof P.type>"u")throw new Error(Ae(8));if(typeof P.type!="string")throw new Error(Ae(17));if(m)throw new Error(Ae(9));try{m=!0,n=o(n,P)}finally{m=!1}return(a=u).forEach(C=>{C()}),P}function f(P){if(typeof P!="function")throw new Error(Ae(10));o=P,h({type:gi.REPLACE})}function S(){let P=y;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(Ae(11));function C(){let F=A;F.next&&F.next(p())}return C(),{unsubscribe:P(C)}},[em](){return this}}}return h({type:gi.INIT}),{dispatch:h,subscribe:y,getState:p,replaceReducer:f,[em]:S}}function fx(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:gi.INIT})>"u")throw new Error(Ae(12));if(typeof r(void 0,{type:gi.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ae(13))})}function Po(e){let t=Object.keys(e),r={};for(let u=0;u<t.length;u++){let l=t[u];typeof e[l]=="function"&&(r[l]=e[l])}let o=Object.keys(r),n,a;try{fx(r)}catch(u){a=u}return function(l={},m){if(a)throw a;let d=!1,p={};for(let y=0;y<o.length;y++){let h=o[y],f=r[h],S=l[h],R=f(S,m);if(typeof R>"u"){let P=m&&m.type;throw new Error(Ae(14))}p[h]=R,d=d||R!==S}return d=d||o.length!==Object.keys(l).length,d?p:l}}function Ao(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...o)=>t(r(...o)))}function tm(...e){return t=>(r,o)=>{let n=t(r,o),a=()=>{throw new Error(Ae(15))},u={getState:n.getState,dispatch:(m,...d)=>a(m,...d)},l=e.map(m=>m(u));return a=Ao(...l)(n.dispatch),{...n,dispatch:a}}}function yi(e){return xt(e)&&"type"in e&&typeof e.type=="string"}s();c();var Pu=Symbol.for("immer-nothing"),Zn=Symbol.for("immer-draftable"),Be=Symbol.for("immer-state");function be(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wr=Object.getPrototypeOf;function Ye(e){return!!e&&!!e[Be]}function Ue(e){return e?im(e)||Array.isArray(e)||!!e[Zn]||!!e.constructor?.[Zn]||na(e)||aa(e):!1}var gx=Object.prototype.constructor.toString();function im(e){if(!e||typeof e!="object")return!1;let t=Wr(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===gx}function Au(e){return Ye(e)||be(15,e),e[Be].base_}function ea(e,t){Hr(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,o)=>t(o,r,e))}function Hr(e){let t=e[Be];return t?t.type_:Array.isArray(e)?1:na(e)?2:aa(e)?3:0}function ta(e,t){return Hr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function gu(e,t){return Hr(e)===2?e.get(t):e[t]}function cm(e,t,r){let o=Hr(e);o===2?e.set(t,r):o===3?e.add(r):e[t]=r}function yx(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function na(e){return e instanceof Map}function aa(e){return e instanceof Set}function zr(e){return e.copy_||e.base_}function Su(e,t){if(na(e))return new Map(e);if(aa(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=im(e);if(t===!0||t==="class_only"&&!r){let o=Object.getOwnPropertyDescriptors(e);delete o[Be];let n=Reflect.ownKeys(o);for(let a=0;a<n.length;a++){let u=n[a],l=o[u];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(o[u]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[u]})}return Object.create(Wr(e),o)}else{let o=Wr(e);if(o!==null&&r)return{...e};let n=Object.create(o);return Object.assign(n,e)}}function Ci(e,t=!1){return xi(e)||Ye(e)||!Ue(e)||(Hr(e)>1&&(e.set=e.add=e.clear=e.delete=hx),Object.freeze(e),t&&Object.entries(e).forEach(([r,o])=>Ci(o,!0))),e}function hx(){be(2)}function xi(e){return Object.isFrozen(e)}var Cu={};function Kr(e){let t=Cu[e];return t||be(0,e),t}function Sx(e,t){Cu[e]||(Cu[e]=t)}var ra;function sm(){return ra}function Cx(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function rm(e,t){t&&(Kr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function xu(e){Ru(e),e.drafts_.forEach(xx),e.drafts_=null}function Ru(e){e===ra&&(ra=e.parent_)}function om(e){return ra=Cx(ra,e)}function xx(e){let t=e[Be];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function nm(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[Be].modified_&&(xu(t),be(4)),Ue(e)&&(e=hi(t,e),t.parent_||Si(t,e)),t.patches_&&Kr("Patches").generateReplacementPatches_(r[Be].base_,e,t.patches_,t.inversePatches_)):e=hi(t,r,[]),xu(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Pu?e:void 0}function hi(e,t,r){if(xi(t))return t;let o=t[Be];if(!o)return ea(t,(n,a)=>am(e,o,t,n,a,r)),t;if(o.scope_!==e)return t;if(!o.modified_)return Si(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;let n=o.copy_,a=n,u=!1;o.type_===3&&(a=new Set(n),n.clear(),u=!0),ea(a,(l,m)=>am(e,o,n,l,m,r,u)),Si(e,n,!1),r&&e.patches_&&Kr("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function am(e,t,r,o,n,a,u){if(Ye(n)){let l=a&&t&&t.type_!==3&&!ta(t.assigned_,o)?a.concat(o):void 0,m=hi(e,n,l);if(cm(r,o,m),Ye(m))e.canAutoFreeze_=!1;else return}else u&&r.add(n);if(Ue(n)&&!xi(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hi(e,n),(!t||!t.scope_.parent_)&&typeof o!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,o)&&Si(e,n)}}function Si(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ci(t,r)}function Rx(e,t){let r=Array.isArray(e),o={type_:r?1:0,scope_:t?t.scope_:sm(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},n=o,a=bu;r&&(n=[o],a=oa);let{revoke:u,proxy:l}=Proxy.revocable(n,a);return o.draft_=l,o.revoke_=u,l}var bu={get(e,t){if(t===Be)return e;let r=zr(e);if(!ta(r,t))return Fx(e,r,t);let o=r[t];return e.finalized_||!Ue(o)?o:o===yu(e.base_,t)?(hu(e),e.copy_[t]=vu(o,e)):o},has(e,t){return t in zr(e)},ownKeys(e){return Reflect.ownKeys(zr(e))},set(e,t,r){let o=um(zr(e),t);if(o?.set)return o.set.call(e.draft_,r),!0;if(!e.modified_){let n=yu(zr(e),t),a=n?.[Be];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(yx(r,n)&&(r!==void 0||ta(e.base_,t)))return!0;hu(e),Fu(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return yu(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,hu(e),Fu(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=zr(e),o=Reflect.getOwnPropertyDescriptor(r,t);return o&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:o.enumerable,value:r[t]}},defineProperty(){be(11)},getPrototypeOf(e){return Wr(e.base_)},setPrototypeOf(){be(12)}},oa={};ea(bu,(e,t)=>{oa[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});oa.deleteProperty=function(e,t){return oa.set.call(this,e,t,void 0)};oa.set=function(e,t,r){return bu.set.call(this,e[0],t,r,e[0])};function yu(e,t){let r=e[Be];return(r?zr(r):e)[t]}function Fx(e,t,r){let o=um(t,r);return o?"value"in o?o.value:o.get?.call(e.draft_):void 0}function um(e,t){if(!(t in e))return;let r=Wr(e);for(;r;){let o=Object.getOwnPropertyDescriptor(r,t);if(o)return o;r=Wr(r)}}function Fu(e){e.modified_||(e.modified_=!0,e.parent_&&Fu(e.parent_))}function hu(e){e.copy_||(e.copy_=Su(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vx=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,o)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let u=this;return function(m=a,...d){return u.produce(m,p=>r.call(this,p,...d))}}typeof r!="function"&&be(6),o!==void 0&&typeof o!="function"&&be(7);let n;if(Ue(t)){let a=om(this),u=vu(t,void 0),l=!0;try{n=r(u),l=!1}finally{l?xu(a):Ru(a)}return rm(a,o),nm(n,a)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===Pu&&(n=void 0),this.autoFreeze_&&Ci(n,!0),o){let a=[],u=[];Kr("Patches").generateReplacementPatches_(t,n,a,u),o(a,u)}return n}else be(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...l)=>this.produceWithPatches(u,m=>t(m,...l));let o,n;return[this.produce(t,r,(u,l)=>{o=u,n=l}),o,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ue(e)||be(8),Ye(e)&&(e=lm(e));let t=om(this),r=vu(e,void 0);return r[Be].isManual_=!0,Ru(t),r}finishDraft(e,t){let r=e&&e[Be];(!r||!r.isManual_)&&be(9);let{scope_:o}=r;return rm(o,t),nm(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let o=Kr("Patches").applyPatches_;return Ye(e)?o(e,t):this.produce(e,n=>o(n,t))}};function vu(e,t){let r=na(e)?Kr("MapSet").proxyMap_(e,t):aa(e)?Kr("MapSet").proxySet_(e,t):Rx(e,t);return(t?t.scope_:sm()).drafts_.push(r),r}function lm(e){return Ye(e)||be(10,e),dm(e)}function dm(e){if(!Ue(e)||xi(e))return e;let t=e[Be],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Su(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Su(e,!0);return ea(r,(o,n)=>{cm(r,o,dm(n))}),t&&(t.finalized_=!1),r}function mm(){let t="replace",r="add",o="remove";function n(h,f,S,R){switch(h.type_){case 0:case 2:return u(h,f,S,R);case 1:return a(h,f,S,R);case 3:return l(h,f,S,R)}}function a(h,f,S,R){let{base_:P,assigned_:A}=h,C=h.copy_;C.length<P.length&&([P,C]=[C,P],[S,R]=[R,S]);for(let x=0;x<P.length;x++)if(A[x]&&C[x]!==P[x]){let F=f.concat([x]);S.push({op:t,path:F,value:y(C[x])}),R.push({op:t,path:F,value:y(P[x])})}for(let x=P.length;x<C.length;x++){let F=f.concat([x]);S.push({op:r,path:F,value:y(C[x])})}for(let x=C.length-1;P.length<=x;--x){let F=f.concat([x]);R.push({op:o,path:F})}}function u(h,f,S,R){let{base_:P,copy_:A}=h;ea(h.assigned_,(C,x)=>{let F=gu(P,C),I=gu(A,C),O=x?ta(P,C)?t:r:o;if(F===I&&O===t)return;let w=f.concat(C);S.push(O===o?{op:O,path:w}:{op:O,path:w,value:I}),R.push(O===r?{op:o,path:w}:O===o?{op:r,path:w,value:y(F)}:{op:t,path:w,value:y(F)})})}function l(h,f,S,R){let{base_:P,copy_:A}=h,C=0;P.forEach(x=>{if(!A.has(x)){let F=f.concat([C]);S.push({op:o,path:F,value:x}),R.unshift({op:r,path:F,value:x})}C++}),C=0,A.forEach(x=>{if(!P.has(x)){let F=f.concat([C]);S.push({op:r,path:F,value:x}),R.unshift({op:o,path:F,value:x})}C++})}function m(h,f,S,R){S.push({op:t,path:[],value:f===Pu?void 0:f}),R.push({op:t,path:[],value:h})}function d(h,f){return f.forEach(S=>{let{path:R,op:P}=S,A=h;for(let I=0;I<R.length-1;I++){let O=Hr(A),w=R[I];typeof w!="string"&&typeof w!="number"&&(w=""+w),(O===0||O===1)&&(w==="__proto__"||w==="constructor")&&be(19),typeof A=="function"&&w==="prototype"&&be(19),A=gu(A,w),typeof A!="object"&&be(18,R.join("/"))}let C=Hr(A),x=p(S.value),F=R[R.length-1];switch(P){case t:switch(C){case 2:return A.set(F,x);case 3:be(16);default:return A[F]=x}case r:switch(C){case 1:return F==="-"?A.push(x):A.splice(F,0,x);case 2:return A.set(F,x);case 3:return A.add(x);default:return A[F]=x}case o:switch(C){case 1:return A.splice(F,1);case 2:return A.delete(F);case 3:return A.delete(S.value);default:return delete A[F]}default:be(17,P)}}),h}function p(h){if(!Ue(h))return h;if(Array.isArray(h))return h.map(p);if(na(h))return new Map(Array.from(h.entries()).map(([S,R])=>[S,p(R)]));if(aa(h))return new Set(Array.from(h).map(p));let f=Object.create(Wr(h));for(let S in h)f[S]=p(h[S]);return ta(h,Zn)&&(f[Zn]=h[Zn]),f}function y(h){return Ye(h)?p(h):h}Sx("Patches",{applyPatches_:d,generatePatches_:n,generateReplacementPatches_:m})}var Je=new vx,Wt=Je.produce,Ri=Je.produceWithPatches.bind(Je),bT=Je.setAutoFreeze.bind(Je),IT=Je.setUseStrictShallowCopy.bind(Je),Iu=Je.applyPatches.bind(Je),wT=Je.createDraft.bind(Je),ET=Je.finishDraft.bind(Je);s();c();function Px(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Ax(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function bx(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(o=>typeof o=="function"?`function ${o.name||"unnamed"}()`:typeof o).join(", ");throw new TypeError(`${t}[${r}]`)}}var pm=e=>Array.isArray(e)?e:[e];function Ix(e){let t=Array.isArray(e[0])?e[0]:e;return bx(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function wx(e,t){let r=[],{length:o}=e;for(let n=0;n<o;n++)r.push(e[n].apply(null,t));return r}var VT=Symbol();var DT=Object.getPrototypeOf({});var Ex=class{constructor(e){this.value=e}deref(){return this.value}},Tx=typeof WeakRef<"u"?WeakRef:Ex,Ox=0,fm=1;function Fi(){return{s:Ox,v:void 0,o:null,p:null}}function bo(e,t={}){let r=Fi(),{resultEqualityCheck:o}=t,n,a=0;function u(){let l=r,{length:m}=arguments;for(let y=0,h=m;y<h;y++){let f=arguments[y];if(typeof f=="function"||typeof f=="object"&&f!==null){let S=l.o;S===null&&(l.o=S=new WeakMap);let R=S.get(f);R===void 0?(l=Fi(),S.set(f,l)):l=R}else{let S=l.p;S===null&&(l.p=S=new Map);let R=S.get(f);R===void 0?(l=Fi(),S.set(f,l)):l=R}}let d=l,p;if(l.s===fm)p=l.v;else if(p=e.apply(null,arguments),a++,o){let y=n?.deref?.()??n;y!=null&&o(y,p)&&(p=y,a!==0&&a--),n=typeof p=="object"&&p!==null||typeof p=="function"?new Tx(p):p}return d.s=fm,d.v=p,p}return u.clearCache=()=>{r=Fi(),u.resetResultsCount()},u.resultsCount=()=>a,u.resetResultsCount=()=>{a=0},u}function gm(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,o=(...n)=>{let a=0,u=0,l,m={},d=n.pop();typeof d=="object"&&(m=d,d=n.pop()),Px(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);let p={...r,...m},{memoize:y,memoizeOptions:h=[],argsMemoize:f=bo,argsMemoizeOptions:S=[],devModeChecks:R={}}=p,P=pm(h),A=pm(S),C=Ix(n),x=y(function(){return a++,d.apply(null,arguments)},...P),F=!0,I=f(function(){u++;let w=wx(C,arguments);return l=x.apply(null,w),l},...A);return Object.assign(I,{resultFunc:d,memoizedResultFunc:x,dependencies:C,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:y,argsMemoize:f})};return Object.assign(o,{withTypes:()=>o}),o}var j=gm(bo),qx=Object.assign((e,t=j)=>{Ax(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),o=r.map(a=>e[a]);return t(o,(...a)=>a.reduce((u,l,m)=>(u[r[m]]=l,u),{}))},{withTypes:()=>qx});s();c();function ym(e){return({dispatch:r,getState:o})=>n=>a=>typeof a=="function"?a(r,o,e):n(a)}var hm=ym(),Sm=ym;var kx=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ao:Ao.apply(null,arguments)},GT=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},Vx=e=>e&&typeof e.match=="function";function v(e,t){function r(...o){if(t){let n=t(...o);if(!n)throw new Error(Xe(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:o[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=o=>yi(o)&&o.type===e,r}var Fm=class ia extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ia.prototype)}static get[Symbol.species](){return ia}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ia(...t[0].concat(this)):new ia(...t.concat(this))}};function Cm(e){return Ue(e)?Wt(e,()=>{}):e}function xm(e,t,r){if(e.has(t)){let n=e.get(t);return r.update&&(n=r.update(n,t,e),e.set(t,n)),n}if(!r.insert)throw new Error(Xe(10));let o=r.insert(t,e);return e.set(t,o),o}function Dx(e){return typeof e=="boolean"}var Nx=()=>function(t){let{thunk:r=!0,immutableCheck:o=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=t??{},u=new Fm;return r&&(Dx(r)?u.push(hm):u.push(Sm(r.extraArgument))),u},Yr="RTK_autoBatch",wo=()=>e=>({payload:e,meta:{[Yr]:!0}}),vm=e=>t=>{setTimeout(t,e)},Mx=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:vm(10),Lx=(e={type:"raf"})=>t=>(...r)=>{let o=t(...r),n=!0,a=!1,u=!1,l=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?Mx:e.type==="callback"?e.queueNotification:vm(e.timeout),d=()=>{u=!1,a&&(a=!1,l.forEach(p=>p()))};return Object.assign({},o,{subscribe(p){let y=()=>n&&p(),h=o.subscribe(y);return l.add(p),()=>{h(),l.delete(p)}},dispatch(p){try{return n=!p?.meta?.[Yr],a=!n,a&&(u||(u=!0,m(d))),o.dispatch(p)}finally{n=!0}}})},Qx=e=>function(r){let{autoBatch:o=!0}=r??{},n=new Fm(e);return o&&n.push(Lx(typeof o=="object"?o:void 0)),n};function Pm(e){let t=Nx(),{reducer:r=void 0,middleware:o,devTools:n=!0,preloadedState:a=void 0,enhancers:u=void 0}=e||{},l;if(typeof r=="function")l=r;else if(xt(r))l=Po(r);else throw new Error(Xe(1));let m;typeof o=="function"?m=o(t):m=t();let d=Ao;n&&(d=kx({trace:!1,...typeof n=="object"&&n}));let p=tm(...m),y=Qx(p),h=typeof u=="function"?u(y):y(),f=d(...h);return fu(l,a,f)}function Am(e){let t={},r=[],o,n={addCase(a,u){let l=typeof a=="string"?a:a.type;if(!l)throw new Error(Xe(28));if(l in t)throw new Error(Xe(29));return t[l]=u,n},addMatcher(a,u){return r.push({matcher:a,reducer:u}),n},addDefaultCase(a){return o=a,n}};return e(n),[t,r,o]}function Bx(e){return typeof e=="function"}function G(e,t){let[r,o,n]=Am(t),a;if(Bx(e))a=()=>Cm(e());else{let l=Cm(e);a=()=>l}function u(l=a(),m){let d=[r[m.type],...o.filter(({matcher:p})=>p(m)).map(({reducer:p})=>p)];return d.filter(p=>!!p).length===0&&(d=[n]),d.reduce((p,y)=>{if(y)if(Ye(p)){let f=y(p,m);return f===void 0?p:f}else{if(Ue(p))return Wt(p,h=>y(h,m));{let h=y(p,m);if(h===void 0){if(p===null)return p;throw new Error(Xe(9))}return h}}return p},l)}return u.getInitialState=a,u}var bm=(e,t)=>Vx(e)?e.match(t):e(t);function Rt(...e){return t=>e.some(r=>bm(r,t))}function Io(...e){return t=>e.every(r=>bm(r,t))}function Pi(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",o=t.indexOf(e.meta.requestStatus)>-1;return r&&o}function ca(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Ai(...e){return e.length===0?t=>Pi(t,["pending"]):ca(e)?Rt(...e.map(t=>t.pending)):Ai()(e[0])}function Gr(...e){return e.length===0?t=>Pi(t,["rejected"]):ca(e)?Rt(...e.map(t=>t.rejected)):Gr()(e[0])}function sa(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?Io(Gr(...e),t):ca(e)?Io(Gr(...e),t):sa()(e[0])}function Ht(...e){return e.length===0?t=>Pi(t,["fulfilled"]):ca(e)?Rt(...e.map(t=>t.fulfilled)):Ht()(e[0])}function bi(...e){return e.length===0?t=>Pi(t,["pending","fulfilled","rejected"]):ca(e)?Rt(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):bi()(e[0])}var Ux="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Eu=(e=21)=>{let t="",r=e;for(;r--;)t+=Ux[Math.random()*64|0];return t},jx=["name","message","stack","code"],wu=class{constructor(e,t){fe(this,"_type");this.payload=e,this.meta=t}},Rm=class{constructor(e,t){fe(this,"_type");this.payload=e,this.meta=t}},_x=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of jx)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},J=(()=>{function e(t,r,o){let n=v(t+"/fulfilled",(m,d,p,y)=>({payload:m,meta:{...y||{},arg:p,requestId:d,requestStatus:"fulfilled"}})),a=v(t+"/pending",(m,d,p)=>({payload:void 0,meta:{...p||{},arg:d,requestId:m,requestStatus:"pending"}})),u=v(t+"/rejected",(m,d,p,y,h)=>({payload:y,error:(o&&o.serializeError||_x)(m||"Rejected"),meta:{...h||{},arg:p,requestId:d,rejectedWithValue:!!y,requestStatus:"rejected",aborted:m?.name==="AbortError",condition:m?.name==="ConditionError"}}));function l(m){return(d,p,y)=>{let h=o?.idGenerator?o.idGenerator(m):Eu(),f=new i.AbortController,S,R;function P(C){R=C,f.abort()}let A=async function(){let C;try{let F=o?.condition?.(m,{getState:p,extra:y});if(zx(F)&&(F=await F),F===!1||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let I=new Promise((O,w)=>{S=()=>{w({name:"AbortError",message:R||"Aborted"})},f.signal.addEventListener("abort",S)});d(a(h,m,o?.getPendingMeta?.({requestId:h,arg:m},{getState:p,extra:y}))),C=await Promise.race([I,Promise.resolve(r(m,{dispatch:d,getState:p,extra:y,requestId:h,signal:f.signal,abort:P,rejectWithValue:(O,w)=>new wu(O,w),fulfillWithValue:(O,w)=>new Rm(O,w)})).then(O=>{if(O instanceof wu)throw O;return O instanceof Rm?n(O.payload,h,m,O.meta):n(O,h,m)})])}catch(F){C=F instanceof wu?u(null,h,m,F.payload,F.meta):u(F,h,m)}finally{S&&f.signal.removeEventListener("abort",S)}return o&&!o.dispatchConditionRejection&&u.match(C)&&C.meta.condition||d(C),C}();return Object.assign(A,{abort:P,requestId:h,arg:m,unwrap(){return A.then($x)}})}}return Object.assign(l,{pending:a,rejected:u,fulfilled:n,settled:Rt(u,n),typePrefix:t})}return e.withTypes=()=>e,e})();function $x(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function zx(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Im=Symbol.for("rtk-slice-createasyncthunk"),eO={[Im]:J};function Wx(e,t){return`${e}/${t}`}function Hx({creators:e}={}){let t=e?.asyncThunk?.[Im];return function(o){let{name:n,reducerPath:a=n}=o;if(!n)throw new Error(Xe(11));typeof process<"u";let u=(typeof o.reducers=="function"?o.reducers(Gx()):o.reducers)||{},l=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(C,x){let F=typeof C=="string"?C:C.type;if(!F)throw new Error(Xe(12));if(F in m.sliceCaseReducersByType)throw new Error(Xe(13));return m.sliceCaseReducersByType[F]=x,d},addMatcher(C,x){return m.sliceMatchers.push({matcher:C,reducer:x}),d},exposeAction(C,x){return m.actionCreators[C]=x,d},exposeCaseReducer(C,x){return m.sliceCaseReducersByName[C]=x,d}};l.forEach(C=>{let x=u[C],F={reducerName:C,type:Wx(n,C),createNotation:typeof o.reducers=="function"};Jx(x)?Zx(F,x,d,t):Yx(F,x,d)});function p(){let[C={},x=[],F=void 0]=typeof o.extraReducers=="function"?Am(o.extraReducers):[o.extraReducers],I={...C,...m.sliceCaseReducersByType};return G(o.initialState,O=>{for(let w in I)O.addCase(w,I[w]);for(let w of m.sliceMatchers)O.addMatcher(w.matcher,w.reducer);for(let w of x)O.addMatcher(w.matcher,w.reducer);F&&O.addDefaultCase(F)})}let y=C=>C,h=new Map,f;function S(C,x){return f||(f=p()),f(C,x)}function R(){return f||(f=p()),f.getInitialState()}function P(C,x=!1){function F(O){let w=O[C];return typeof w>"u"&&x&&(w=R()),w}function I(O=y){let w=xm(h,x,{insert:()=>new WeakMap});return xm(w,O,{insert:()=>{let D={};for(let[M,$]of Object.entries(o.selectors??{}))D[M]=Kx($,O,R,x);return D}})}return{reducerPath:C,getSelectors:I,get selectors(){return I(F)},selectSlice:F}}let A={name:n,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:R,...P(a),injectInto(C,{reducerPath:x,...F}={}){let I=x??a;return C.inject({reducerPath:I,reducer:S},F),{...A,...P(I,!0)}}};return A}}function Kx(e,t,r,o){function n(a,...u){let l=t(a);return typeof l>"u"&&o&&(l=r()),e(l,...u)}return n.unwrapped=e,n}var Jr=Hx();function Gx(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Yx({type:e,reducerName:t,createNotation:r},o,n){let a,u;if("reducer"in o){if(r&&!Xx(o))throw new Error(Xe(17));a=o.reducer,u=o.prepare}else a=o;n.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,u?v(e,u):v(e))}function Jx(e){return e._reducerDefinitionType==="asyncThunk"}function Xx(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Zx({type:e,reducerName:t},r,o,n){if(!n)throw new Error(Xe(18));let{payloadCreator:a,fulfilled:u,pending:l,rejected:m,settled:d,options:p}=r,y=n(e,a,p);o.exposeAction(t,y),u&&o.addCase(y.fulfilled,u),l&&o.addCase(y.pending,l),m&&o.addCase(y.rejected,m),d&&o.addMatcher(y.settled,d),o.exposeCaseReducer(t,{fulfilled:u||vi,pending:l||vi,rejected:m||vi,settled:d||vi})}function vi(){}var wm="listener",Em="completed",Tm="cancelled",tO=`task-${Tm}`,rO=`task-${Em}`,oO=`${wm}-${Tm}`,nO=`${wm}-${Em}`;var{assign:Om}=Object;var Tu="listenerMiddleware";var eR=Om(v(`${Tu}/add`),{withTypes:()=>eR}),aO=v(`${Tu}/removeAll`),tR=Om(v(`${Tu}/remove`),{withTypes:()=>tR});var iO=Symbol.for("rtk-state-proxy-original");function Xe(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}s();c();var mr=j(e=>e.commercePagination?.principal.perPage||0,e=>e),Ii=j((e,t)=>e.commercePagination?.recommendations[t]?.perPage||0,e=>e),pr=j(e=>e.commercePagination?.principal.totalEntries||0,e=>e),wi=j((e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0,e=>e),Ei=j(e=>e.commercePagination?.principal.page||0,e=>e),qm=j((e,t)=>e.commercePagination?.recommendations[t]?.page||0,e=>e);var FO=j(e=>e[z].productListing.responseId,e=>e),ua=j(e=>e.productListing.responseId,e=>e),km=j(e=>e.productListing.requestId,e=>e),la=j(e=>e.productListing?.products.length||0,e=>e),Vm=j(e=>({total:pr(e),current:la(e)}),({current:e,total:t})=>e<t),Dm=j(e=>e.productListing?.isLoading,e=>K(e)?!1:e),Nm=j(e=>e.productListing?.error,e=>e??null);s();c();s();c();function Ou(e,t,r){if(e===void 0)return{};let o=t(e);return o!==r?{q:o}:{}}function qu(e,t,r){if(e===void 0)return{};let o=t(e);return o!==r?{sortCriteria:o}:{}}function Xr(e,t,r,o){if(e===void 0)return{};let n=Object.entries(e).filter(([a])=>t(a)).map(([a,{request:u}])=>{let l=r(u);return l.length?{[a]:l}:{}}).reduce((a,u)=>({...a,...u}),{});return Object.keys(n).length?{[o]:n}:{}}s();c();s();c();function Ft(e){let{activeValue:t,ancestryMap:r}=oR(e);return t?nR(t,r):[]}function oR(e){let t=[...e],r=new Map;for(;t.length>0;){let o=t.shift();if(o.state==="selected")return{activeValue:o,ancestryMap:r};if(r)for(let n of o.children)r.set(n,o);t.unshift(...o.children)}return{}}function nR(e,t){let r=[];if(!e)return[];let o=e;do r.unshift(o),o=t.get(o);while(o);return r}s();c();function Mm(){return{principal:Kt(),recommendations:{}}}function Kt(){return{page:0,perPage:0,totalEntries:0,totalPages:0}}s();c();s();c();s();c();var ot=(r=>(r.Relevance="relevance",r.Fields="fields",r))(ot||{}),fr=(r=>(r.Ascending="asc",r.Descending="desc",r))(fr||{}),gt=()=>({by:"relevance"});var DO=new k({options:{required:!1},values:{by:new ft({enum:ot,required:!0}),fields:new ee({each:new k({values:{name:new T,direction:new ft({enum:fr})}})})}});var da=e=>({by:"fields",fields:e}),Lm=new k({options:{required:!1},values:{by:new ft({enum:ot,required:!0}),fields:new ee({each:new k({values:{field:new T({required:!0}),direction:new ft({enum:fr}),displayName:new T}})})}});function Zr(){return{appliedSort:gt(),availableSorts:[gt()]}}function aR(e){return{page:e.commercePagination.principal.page??Kt().page,perPage:e.commercePagination.principal.perPage??Kt().perPage,sortCriteria:e.commerceSort.appliedSort??Zr().appliedSort,cf:{},nf:{},mnf:{},df:{},f:{},lf:{}}}function Ti(e){return{...iR(e?.commercePagination,t=>t.principal.page,Kt().page),...cR(e?.commercePagination,t=>t.principal.perPage,Kt().perPage),...qu(e?.commerceSort,t=>t.appliedSort,Zr().appliedSort),...Xr(e.commerceFacetSet,ma(e,"regular"),sR,"f"),...Xr(e.commerceFacetSet,ma(e,"location"),uR,"lf"),...Xr(e.commerceFacetSet,ma(e,"hierarchical"),dR,"cf"),...Xr(e.commerceFacetSet,ma(e,"dateRange"),Qm,"df"),...Xr(e.commerceFacetSet,ma(e,"numericalRange"),Qm,"nf"),...lR(e.manualNumericFacetSet)}}function Oi(e,t){return{...aR(e),...t}}function iR(e,t,r){if(e===void 0)return{};let o=t(e);return o!==r?{page:o}:{}}function cR(e,t,r){if(e===void 0)return{};let o=t(e);return o!==r?{perPage:o}:{}}function sR(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function uR(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function Qm(e){return e.values.filter(t=>t.state==="selected")}function lR(e){return e?{mnf:Object.entries(e).map(([r,o])=>{if(o.manualRange!==void 0)return{[r]:[o.manualRange]}}).filter(r=>r!==void 0).reduce((r,o)=>({...r,...o}),{})}:{}}function dR(e){return Ft(e.values).map(r=>r.value)}function ma(e,t){return r=>e.commerceFacetSet[r].request.type===t}s();c();var pa=()=>({query:""});var yq=j(e=>e[z].commerceSearch.responseId,e=>e),fa=j(e=>e.commerceSearch.responseId,e=>e),Bm=j(e=>e.commerceSearch.requestId,e=>e),ga=j(e=>e.commerceSearch?.products.length||0,e=>e),Um=j(e=>({total:pr(e),current:ga(e)}),({current:e,total:t})=>e<t),jm=j(e=>e.commerceSearch?.isLoading,e=>K(e)?!1:e),_m=j(e=>e.commerceSearch?.error,e=>e??null),qi=j(e=>e.commerceQuery?.query,e=>e??""),mR=j(e=>e.commerceSearch?.queryExecuted,e=>e),$m=(e,t)=>K(t.queryCorrection?.correctedQuery)?qi(e):t.queryCorrection.correctedQuery,zm=e=>({...Ou(e?.commerceQuery,t=>t.query,pa().query),...Ti(e)});function Wm(e,t){return{q:pa().query,...Oi(e,t)}}function Hm(e){return{query:mR(e)||""}}var ku;(t=>t.responseIdSelector=Km(fa))(ku||(ku={}));var Vu;(t=>t.responseIdSelector=Km(ua))(Vu||(Vu={}));function Km(e){return t=>e(t[z])}var Lu={};cu(Lu,{escape:()=>Eo,getHighlightedSuggestion:()=>Mu,highlightString:()=>fR});s();c();s();c();var eo=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Gm(e){return Array.isArray(e)}function ki(e){return e.trim()===""}function Ym(e){let t={};for(let[r,o]of e)t[r]=o;return t}function ya(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function fR(e){if(ki(e.openingDelimiter)||ki(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(K(e.content)||ki(e.content))return e.content;if(e.highlights.length===0)return Eo(e.content);let t=e.content.length,r="",o=0;for(let n=0;n<e.highlights.length;n++){let a=e.highlights[n],u=a.offset,l=u+a.length;if(l>t)break;r+=Eo(e.content.slice(o,u)),r+=e.openingDelimiter,r+=Eo(e.content.slice(u,l)),r+=e.closingDelimiter,o=l}return o!==t&&(r+=Eo(e.content.slice(o))),r}function Mu(e,t){return e=Eo(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,o,n,a)=>o?Nu(o,t.notMatchDelimiters):n?Nu(n,t.exactMatchDelimiters):a?Nu(a,t.correctionDelimiters):r)}function Nu(e,t){return t?t.open+e+t.close:e}function Eo(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",o=RegExp(r),n=RegExp(r,"g");return o.test(e)?e.replace(n,a=>t[a]):e}s();c();var sp=rt(np(),1);s();c();s();c();var Z=new Error("Failed to load reducers."),To=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}};var ro=class extends Error{constructor(r,o){super();fe(this,"statusCode");this.name="Disconnected",this.message=`Client could not connect to the following URL: ${r}`,this.statusCode=o??0}};s();c();function ap(e){let t=[];for(let r in e){let o=encodeURIComponent(r),n=encodeURIComponent(e[r]);t.push(`${o}=${n}`)}return t.join("&")}function ip(e){return typeof e!="object"||!e?!1:Object.values(e).every(BR)}function BR(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function cp(e){return e===429}var Oo=class e{static async call(t){let r=UR(t),{logger:o}=t,n=await e.preprocessRequest(r,t);o.info(n,"Platform request");let{url:a,...u}=n,l=async()=>{let m=await g(a,u);if(cp(m.status))throw m;return m};try{let m=await(0,sp.backOff)(l,{retry:d=>{let p=d&&cp(d.status);return p&&o.info("Platform retrying request"),p}});switch(m.status){case 419:case 401:throw o.info("Platform renewing token"),new To;case 404:throw new ro(a,m.status);default:return o.info({response:m,requestInfo:n},"Platform response"),m}}catch(m){return m.message==="Failed to fetch"?new ro(a):m}}static async preprocessRequest(t,r){let{origin:o,preprocessRequest:n,logger:a,requestMetadata:u}=r,{signal:l,...m}=t,d=ya(m);try{let p=await n(t,o,u);return{...t,...p}}catch(p){a.error(p,"Platform request preprocessing failed. Returning default request options.")}return d}};function Ne(e,t="prod",r="platform"){let o=t==="prod"?"":t,n=r==="platform"?"":`.${r}`;return`https://${e}${n}.org${o}.coveo.com`}function nt(e,t="prod"){return`${Ne(e,t)}/rest/search/v2`}function Di(e,t="prod"){return`${Ne(e,t,"analytics")}/rest/organizations/${e}/events/v1`}function UR(e){let{url:t,method:r,requestParams:o,contentType:n,accessToken:a,signal:u}=e,l=e.method==="POST"||e.method==="PUT",m=jR(o,n);return{url:t,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${a}`,...e.headers},...l&&{body:m},signal:u}}function jR(e,t){return t==="application/x-www-form-urlencoded"?ip(e)?ap(e):"":JSON.stringify(e)}s();c();s();c();function _R(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function $R(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Hu(e,t){if(t&&e.name==="AbortError")return{error:$R(e)};if(e instanceof ro)return{error:_R(e)};throw e}s();c();var qo=(e,t)=>({...Ca(e,t),requestParams:zR(e)}),zR=e=>{let{trackingId:t,clientId:r,context:o,language:n,country:a,currency:u,page:l,perPage:m,facets:d,sort:p}=e;return{trackingId:t,clientId:r,context:o,language:n,country:a,currency:u,page:l,perPage:m,facets:d,sort:p}},Ca=(e,t)=>{let{url:r,accessToken:o}=e,n=`${r}/${t}`;return{accessToken:o,method:"POST",contentType:"application/json",url:n,origin:"commerceApiFetch",requestMetadata:{method:t}}};s();c();var up=(e,t)=>({...Ca(e,t),requestParams:WR(e)}),WR=e=>{let{slotId:t,trackingId:r,clientId:o,context:n,language:a,country:u,currency:l,page:m,perPage:d}=e;return{slotId:t,trackingId:r,clientId:o,context:n,language:a,country:u,currency:l,page:m,perPage:d}};s();c();var lp=e=>({...Ca(e,"search/querySuggest"),requestParams:HR(e)}),HR=e=>{let{trackingId:t,query:r,clientId:o,context:n,language:a,country:u,currency:l}=e;return{trackingId:t,query:r,clientId:o,context:n,language:a,country:u,currency:l}};var Te=e=>e.error!==void 0,Ni=class{constructor(t){this.options=t}async getProductListing(t){return this.query({...qo(t,"listing"),...this.options})}async search(t){let r=qo(t,"search");return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async getRecommendations(t){return this.query({...up(t,"recommendations"),...this.options})}async productSuggestions(t){let r=qo(t,"search/productSuggest");return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async querySuggest(t){let r=lp(t);return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async facetSearch(t,r){let o=qo(t,"facet");return this.query({...o,url:`${o.url}?type=${r}`,requestParams:{...o.requestParams,facetId:t?.facetId,facetQuery:t?.facetQuery,query:t?.query},...this.options})}async plan(t){let r=qo(t,"search");return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async query(t){let r=await Oo.call(t);if(r instanceof Error)return Hu(r);let o=await r.json();return r.ok?{success:o}:{error:o}}};function ko(e,t="prod"){return`${Ne(e,t)}/rest/organizations/${e}/commerce/v2`}s();c();s();c();var Mi=e=>e;s();c();s();c();var V=new T({required:!0,emptyAllowed:!1}),pe=new T({required:!1,emptyAllowed:!1}),Se=new T({required:!0,emptyAllowed:!0}),dp=new T({required:!1,emptyAllowed:!0}),eV=new ee({each:V,required:!0}),mp=new T({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Me=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),xe=(e,t)=>{if("required"in t)return{payload:new ne({value:t}).validate({value:e}).value};let n=new k({options:{required:!0},values:t}).validate(e);if(n)throw new Xn(n);return{payload:e}},b=(e,t)=>{try{return xe(e,t)}catch(r){return{payload:e,error:Me(r)}}},je=(e,t,r,o)=>{let n=`Check the initialState of ${o}`;return pp(e,t,r,n,"Controller initialization error")},Le=(e,t,r,o)=>{let n=`Check the options of ${o}`;return pp(e,t,r,n,"Controller initialization error")},pp=(e,t,r,o,n)=>{try{return t.validate(r,o)}catch(a){throw e.logger.error(a,n),a}};s();c();s();c();var Vo="3.8.1",fp=["@coveo/atomic","@coveo/quantic"];var Ku=()=>pe,gp=()=>V,xa=v("configuration/updateBasicConfiguration",e=>b(e,{accessToken:pe,environment:new T({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:pe})),yp=v("configuration/updateSearchConfiguration",e=>b(e,{proxyBaseUrl:new T({required:!1,url:!0}),pipeline:new T({required:!1,emptyAllowed:!0}),searchHub:pe,timezone:pe,locale:pe,authenticationProviders:new ee({required:!1,each:V})})),Do={enabled:new W({default:!0}),originContext:Ku(),originLevel2:Ku(),originLevel3:Ku(),proxyBaseUrl:new T({required:!1,url:!0}),runtimeEnvironment:new de,anonymous:new W({default:!1}),deviceId:pe,userDisplayName:pe,documentLocation:pe,trackingId:pe,analyticsMode:new T({constrainTo:["legacy","next"],required:!1,default:"next"}),source:new k({options:{required:!1},values:fp.reduce((e,t)=>(e[t]=mp,e),{})})},Gu=v("configuration/updateAnalyticsConfiguration",e=>b(e,Do)),Li=v("configuration/analytics/disable"),Qi=v("configuration/analytics/enable"),hp=v("configuration/analytics/originlevel2",e=>b(e,{originLevel2:gp()})),Sp=v("configuration/analytics/originlevel3",e=>b(e,{originLevel3:gp()}));var No=v("commerce/configuration/updateBasicConfiguration",e=>b(e,{accessToken:pe,environment:new T({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:pe})),Mo=v("commerce/configuration/updateProxyBaseUrl",e=>b(e,{proxyBaseUrl:new T({required:!1,url:!0})})),Lo=v("commerce/configuration/updateAnalyticsConfiguration",e=>b(e,{enabled:Do.enabled,proxyBaseUrl:Do.proxyBaseUrl,source:Do.source,trackingId:Do.trackingId})),Bi=v("commerce/configuration/analytics/disable"),Ui=v("commerce/configuration/analytics/enable");s();c();s();c();var Cp=()=>({accessToken:"",environment:"prod",organizationId:"",analytics:{enabled:!0,trackingId:"",source:{}},commerce:{}});var Yu=G(Cp(),e=>e.addCase(No,(t,r)=>{KR(t,r.payload)}).addCase(Mo,(t,r)=>{GR(t,r.payload)}).addCase(Lo,(t,r)=>{YR(t,r.payload)}).addCase(Bi,t=>{t.analytics.enabled=!1}).addCase(Ui,t=>{t.analytics.enabled=!0}));function KR(e,t){K(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",K(t.organizationId)||(e.organizationId=t.organizationId)}function GR(e,t){K(t.proxyBaseUrl)||(e.commerce.apiBaseUrl=t.proxyBaseUrl)}function YR(e,t){K(t.enabled)||(e.analytics.enabled=t.enabled),K(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),K(t.source)||(e.analytics.source=t.source),K(t.trackingId)||(e.analytics.trackingId=t.trackingId)}s();c();s();c();s();c();function Qo(e){return e.currency}var xp=(e,t)=>({currency:Qo(t.commerceContext),products:JR(t.cart),transaction:e}),Rp=(e,t)=>({currency:Qo(t.commerceContext),...e}),oo=j(e=>e.cart,e=>e.cartItems,(e,t)=>t.map(r=>e[r])),JR=j(oo,e=>e.map(({quantity:t,...r})=>({quantity:t,product:r})));s();c();var Ju={productId:V,quantity:new U({required:!0,min:0}),name:new T({required:!1}),price:new U({required:!1,min:0})},Xu=new ee({each:new k({values:{...Ju}})}),Zu={items:Xu},Fp=new ne(Zu);var gr=v("commerce/cart/setItems",e=>b(e,Xu)),Bo=v("commerce/cart/updateItemQuantity",e=>b(e,Ju)),Uo=v("commerce/cart/purchase"),ji=J("commerce/cart/emit/purchaseEvent",async(e,{extra:t,getState:r})=>{let o=xp(e,r()),{relay:n}=t;n.emit("ec.purchase",o)}),_i=J("commerce/cart/emit/cartActionEvent",async(e,{extra:t,getState:r})=>{let o=Rp(e,r()),{relay:n}=t;n.emit("ec.cartAction",o)});s();c();s();c();s();c();function te(e){let t,r=new Map,o=()=>r.size===0,n=a=>{try{let u=JSON.stringify(a),l=t!==u;return t=u,l}catch(u){return console.warn('Could not detect if state has changed, check the controller "get state method"',u),!0}};return{subscribe(a){a();let u=Symbol(),l;return o()&&(t=JSON.stringify(this.state),l=e.subscribe(()=>{n(this.state)&&r.forEach(m=>m())})),r.set(u,a),()=>{r.delete(u),o()&&l&&l()}},get state(){return{}}}}s();c();function vp(e,t){return e.cart[no(t)]}var Pp=j(oo,e=>e.reduce((t,r)=>t+r.quantity,0)),Ap=j(oo,e=>e.reduce((t,r)=>t+r.price*r.quantity,0));function bp(e,t={}){if(!XR(e))throw Z;let{dispatch:r}=e,o=te(e),n=()=>e[z].cart,a={...t.initialState};je(e,Fp,a,"buildCart"),a.items!==void 0&&r(gr(a.items));function u(p,y){return y?y.quantity!==p.quantity:!0}function l(p,y){return!y||p.quantity>y.quantity?"add":"remove"}function m(p,y){return y?p.name===y.name&&p.price===y.price&&p.quantity===y.quantity:!1}function d(p,y){let{quantity:h,...f}=p,S=l(p,y),R=y?Math.abs(h-y.quantity):h;return{action:S,quantity:R,product:f}}return{...o,empty:function(){for(let p of oo(n()))this.updateItemQuantity({...p,quantity:0})},purchase(p){r(ji(p)),r(Uo())},updateItemQuantity(p){let y=vp(n(),p);!y&&p.quantity<=0||m(p,y)||(u(p,y)&&r(_i(d(p,y))),r(Bo(p)))},get state(){let p=n();return{items:oo(p),totalQuantity:Pp(p),totalPrice:Ap(p)}}}}function no(e){return`${e.productId},${e.name},${e.price}`}function XR(e){return e.addReducers({cart:jo}),!0}s();c();var $i=()=>({cartItems:[],cart:{},purchasedItems:[],purchased:{}}),zi=e=>wp(e.cartItems,e.cart),Ip=e=>wp(e.purchasedItems,e.purchased);function wp(e,t){let r=e.reduce((o,n)=>{let{productId:a,quantity:u}=t[n];return a in o||(o[a]={productId:a,quantity:0}),o[a].quantity+=u,o},{});return[...Object.values(r)]}var jo=G($i(),e=>{e.addCase(gr,(t,{payload:r})=>{let{cart:o,cartItems:n}=r.reduce((a,u)=>{let l=no(u);return{cartItems:[...a.cartItems,l],cart:{...a.cart,[l]:u},purchasedItems:[],purchased:{}}},$i());Ep(t,n,o)}).addCase(Bo,(t,{payload:r})=>{let o=no(r);if(!(o in t.cart)){ZR(r,t);return}if(r.quantity<=0){eF(r,t);return}t.cart[o]=r}).addCase(Uo,t=>{tF(t);let{cart:r,cartItems:o}=$i();Ep(t,o,r)})});function Ep(e,t,r){e.cartItems=t,e.cart=r}function ZR(e,t){if(e.quantity<=0)return;let r=no(e);t.cartItems=[...t.cartItems,r],t.cart[r]=e}function eF(e,t){let r=no(e);t.cartItems=t.cartItems.filter(o=>o!==r),delete t.cart[r]}function tF(e){for(let t of e.cartItems){if(t in e.purchased){e.purchased[t].quantity+=e.cart[t].quantity;continue}e.purchasedItems=[...e.purchasedItems,t],e.purchased[t]=e.cart[t]}}s();c();s();c();var rF=Intl.supportedValuesOf("currency"),oF=new T({required:!0,emptyAllowed:!1,constrainTo:rF}),el={url:V},tl={latitude:new U({min:-90,max:90,required:!0}),longitude:new U({min:-180,max:180,required:!0})},Ra={language:V,country:V,currency:oF,view:new k({options:{required:!0},values:el}),location:new k({options:{required:!1},values:tl})},Tp=new ne(Ra);var ye=v("commerce/context/set",e=>b(e,Ra)),Ce=v("commerce/context/setView",e=>b(e,el)),_o=v("commerce/context/setLocation",e=>b(e,tl));s();c();s();c();var Op=()=>({language:"",country:"",currency:"",view:{url:""}});var vt=G(Op(),e=>{e.addCase(ye,(t,{payload:r})=>r).addCase(Ce,(t,{payload:r})=>{t.view=r}).addCase(_o,(t,{payload:r})=>{t.location=r})});s();c();s();c();var Wi=()=>({correctedQuery:"",corrections:[],originalQuery:""});s();c();s();c();var at=v("breadcrumb/deselectAll"),yr=v("breadcrumb/deselectAllNonBreadcrumbs");s();c();s();c();var Pt=j(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${Vo}`));var Ze=(e,t)=>({...Fa(e,t),facets:[...aF(e),...iF(e)],...e.commerceSort&&{sort:cF(e.commerceSort.appliedSort)}}),Fa=(e,t,r)=>{let{view:o,location:n,...a}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.commerce.apiBaseUrl??ko(e.configuration.organizationId,e.configuration.environment),organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...a,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{user:{...n,...t.userAgent?{userAgent:t.userAgent}:{}},view:{...o,...t.referrer?{referrer:t.referrer}:{}},capture:e.configuration.analytics.enabled,cart:zi(e.cart),source:Pt(e.configuration.analytics)},...nF(e,r)}},nF=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};function aF(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.filter(t=>e.commerceFacetSet?.[t]).map(t=>e.commerceFacetSet[t].request).filter(t=>t&&t.values.length>0)}function iF(e){return e.manualNumericFacetSet?Object.entries(e.manualNumericFacetSet).filter(([t,r])=>r.manualRange!==void 0).map(([t,r])=>({facetId:t,field:t,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[r.manualRange],initialNumberOfValues:1})):[]}function cF(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}s();c();var ao=v("commerce/facets/core/updateNumberOfValues",e=>b(e,{facetId:V,numberOfValues:new U({required:!0,min:1})})),io=v("commerce/facets/core/updateIsFieldExpanded",e=>b(e,{facetId:V,isFieldExpanded:new W({required:!0})})),_e=v("commerce/facets/core/clearAll"),$e=v("commerce/facets/core/deselectAllValues",e=>b(e,{facetId:V})),co=v("commerce/facets/core/updateFreezeCurrentValues",e=>b(e,{facetId:V,freezeCurrentValues:new W({required:!0})})),$o=v("commerce/facets/core/updateAutoSelectionForAll",e=>b(e,{allow:new W({required:!0})}));s();c();var Hi={slotId:dp},sF={...Hi,pageSize:new U({required:!0,min:0})},so=v("commerce/pagination/setPageSize",e=>b(e,sF)),uF={...Hi,page:new U({required:!0,min:0})},hr=v("commerce/pagination/selectPage",e=>b(e,uF)),zo=v("commerce/pagination/nextPage",e=>b(e,Hi)),Wo=v("commerce/pagination/previousPage",e=>b(e,Hi)),Ho=v("commerce/pagination/registerRecommendationsSlot",e=>b(e,{slotId:V}));s();c();var it=v("commerce/query/update",e=>b(e,{query:new T}));s();c();s();c();var Sr=v("commerce/triggers/query/updateIgnore",e=>b(e,{q:new T({emptyAllowed:!0,required:!0})})),Ko=v("commerce/triggers/query/applyModification",e=>b(e,new k({values:{originalQuery:pe,modification:pe}})));var va=class{constructor(t){this.config=t}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}async fetchFromAPI(t){let r=new Date().getTime(),o=await this.extra.apiClient.search(t),n=new Date().getTime()-r,a=this.getState().commerceQuery.query||"";return{response:o,duration:n,queryExecuted:a,requestExecuted:t}}processSuccessResponse(t){return{...t,response:this.getSuccessResponse(t),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(t){return Te(t.response)?this.rejectWithValue(t.response.error):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),o=this.getSuccessResponse(t);if(!o||!r.didYouMean)return null;let{queryCorrection:n}=o;if(!(!K(n)&&!K(n.correctedQuery)))return null;let{correctedQuery:u,originalQuery:l}=o.queryCorrection;return this.onUpdateQueryForCorrection(u??""),{...t,response:{...o},queryExecuted:$m(r,o),originalQuery:l??""}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let o=r.triggers.find(l=>l.type==="query")?.content||"";if(!o)return null;if(this.getState().triggers?.queryModification.queryToIgnore===o)return this.dispatch(Sr({q:""})),null;let a=this.getCurrentQuery(),u=await this.automaticallyRetryQueryWithTriggerModification(o);return Te(u.response)?this.rejectWithValue(u.response.error):{...u,response:{...u.response.success},originalQuery:a}}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Ko({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI({...Ze(this.getState(),this.navigatorContext),query:t})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let t=this.getState();return t.commerceQuery.query!==void 0?t.commerceQuery.query:""}getSuccessResponse(t){return Te(t.response)?null:t.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(t){this.dispatch(it({query:t}))}};var ie=J("commerce/search/executeSearch",async(e,t)=>{let{getState:r}=t,o=r(),{navigatorContext:n}=t.extra,a=Ze(o,n),u=qi(o),l=new va(t),m=await l.fetchFromAPI({...a,query:u});return l.process(m)}),Cr=J("commerce/search/fetchMoreProducts",async(e,t)=>{let{getState:r}=t,o=r(),{navigatorContext:n}=t.extra;if(!Um(o))return null;let u=mr(o),m=ga(o)/u,d=qi(o),p=Ze(o,n),y=new va(t),h=await y.fetchFromAPI({...p,query:d,page:m});return y.process(h)}),Go=J("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{query:new T,clearFilters:new W}),e.clearFilters&&(r(_e()),r(yr())),r($o({allow:!0})),r(it({query:e.query})),r(hr({page:0}))}),Yo=J("commerce/search/fetchInstantProducts",async(e,{getState:t,rejectWithValue:r,extra:o})=>{let n=t(),{apiClient:a,navigatorContext:u}=o,{q:l}=e,m=await a.productSuggestions({...Ze(n,u),query:l});if(Te(m))return r(m.error);let d=m.success.products.slice(0,5);return{response:{...m.success,products:d}}}),lF={child:new k({options:{required:!0},values:{permanentid:new T({required:!0})}})},Jo=v("commerce/search/promoteChildToParent",e=>b(e,lF));s();c();function qp(){return{wasCorrectedTo:"",queryCorrection:Wi(),originalQuery:""}}var Ki=G(qp(),e=>{e.addCase(ie.pending,t=>{t.queryCorrection=Wi(),t.wasCorrectedTo=""}).addCase(ie.fulfilled,(t,r)=>{let{queryCorrection:o}=r.payload.response;t.originalQuery=r.payload.originalQuery,t.wasCorrectedTo=o?.correctedQuery??"",t.queryCorrection={correctedQuery:o?.correctedQuery??o?.corrections[0]?.correctedQuery??"",wordCorrections:o?.corrections[0]?.wordCorrections??[]}})});s();c();s();c();s();c();var re=V;s();c();var dF={state:new de({required:!0}),numberOfResults:new U({required:!0,min:0}),value:new T({required:!0,emptyAllowed:!0}),path:new ee({required:!0,each:V}),moreValuesAvailable:new W({required:!1})};function Pa(e){e.children.forEach(t=>{Pa(t)}),xe({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},dF)}var Xo={facetId:re,field:V,tabs:new k({options:{required:!1},values:{included:new ee({each:new T}),excluded:new ee({each:new T})}}),activeTab:new T({required:!1}),delimitingCharacter:new T({required:!1,emptyAllowed:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new U({required:!1,min:0}),numberOfValues:new U({required:!1,min:1}),sortCriteria:new de({required:!1}),basePath:new ee({required:!1,each:V}),filterByBasePath:new W({required:!1})},Zo=5,kp=v("categoryFacet/register",e=>b(e,Xo)),Vp=v("categoryFacet/toggleSelectValue",e=>{try{return xe(e.facetId,V),Pa(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Me(t)}}}),Dp=v("categoryFacet/deselectAll",e=>b(e,Xo.facetId)),t0=v("categoryFacet/updateNumberOfValues",e=>b(e,{facetId:Xo.facetId,numberOfValues:Xo.numberOfValues})),r0=v("categoryFacet/updateSortCriterion",e=>b(e,{facetId:Xo.facetId,criterion:new de})),o0=v("categoryFacet/updateBasePath",e=>b(e,{facetId:Xo.facetId,basePath:new ee({each:V})}));s();c();s();c();var Aa={facetId:re,captions:new k({options:{required:!1}}),numberOfValues:new U({required:!1,min:1}),query:new T({required:!1,emptyAllowed:!0})};var mF={path:new ee({required:!0,each:V}),displayValue:Se,rawValue:Se,count:new U({required:!0,min:0})},en=v("categoryFacet/selectSearchResult",e=>b(e,{facetId:re,value:new k({values:mF})})),Gi=v("categoryFacetSearch/register",e=>b(e,Aa));s();c();var Np={facetId:re,value:new k({values:{displayValue:Se,rawValue:Se,count:new U({required:!0,min:0})}})},Yi=v("facetSearch/register",e=>b(e,Aa)),xr=v("facetSearch/update",e=>b(e,Aa)),Yt=v("facetSearch/toggleSelectValue",e=>b(e,Np)),Jt=v("facetSearch/toggleExcludeValue",e=>b(e,Np));s();c();s();c();var Xt=v("facetOptions/update",(e={freezeFacetOrder:!0})=>b(e,{freezeFacetOrder:new W({required:!1})})),rl=v("facetOptions/facet/enable",e=>b(e,re)),Zt=v("facetOptions/facet/disable",e=>b(e,re));s();c();var pF=v("history/undo"),fF=v("history/redo"),At=v("history/snapshot"),N0=J("history/back",async(e,{dispatch:t})=>{t(pF()),await t(ve())}),M0=J("history/forward",async(e,{dispatch:t})=>{t(fF()),await t(ve())}),ve=J("history/change",async(e,{getState:t})=>t().history.present);s();c();s();c();var Ji={q:new T,enableQuerySyntax:new W,aq:new T,cq:new T,firstResult:new U({min:0}),numberOfResults:new U({min:0}),sortCriteria:new T,f:new k,fExcluded:new k,cf:new k,nf:new k,mnf:new k,df:new k,debug:new W,sf:new k,tab:new T,af:new k};var Ie=v("searchParameters/restore",e=>b(e,Ji));s();c();s();c();s();c();function er(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r}function E(e,t,r,o){function n(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function l(p){try{d(o.next(p))}catch(y){u(y)}}function m(p){try{d(o.throw(p))}catch(y){u(y)}}function d(p){p.done?a(p.value):n(p.value).then(l,m)}d((o=o.apply(e,t||[])).next())})}var ce;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ce||(ce={}));function Mp(){return typeof window<"u"}function hl(){return typeof navigator<"u"}function tn(){return typeof document<"u"}function al(){try{return typeof localStorage<"u"}catch{return!1}}function gF(){try{return typeof sessionStorage<"u"}catch{return!1}}function Yp(){return hl()&&navigator.cookieEnabled}var yF=[ce.click,ce.custom,ce.search,ce.view],hF=(e,t)=>yF.indexOf(e)!==-1?Object.assign({language:tn()?document.documentElement.lang:"unknown",userAgent:hl()?navigator.userAgent:"unknown"},t):t,wa=class e{static set(t,r,o){var n,a,u,l;o&&(a=new Date,a.setTime(a.getTime()+o)),l=window.location.hostname,l.indexOf(".")===-1?Lp(t,r,a):(u=l.split("."),n=u[u.length-2]+"."+u[u.length-1],Lp(t,r,a,n))}static get(t){for(var r=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){var a=o[n];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function Lp(e,t,r,o){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(o?`;domain=${o}`:"")+";path=/;SameSite=Lax"}function SF(){return al()?localStorage:Yp()?new Ea:gF()?sessionStorage:new on}var Ea=class e{getItem(t){return wa.get(`${e.prefix}${t}`)}removeItem(t){wa.erase(`${e.prefix}${t}`)}setItem(t,r,o){wa.set(`${e.prefix}${t}`,r,o)}};Ea.prefix="coveo_";var il=class{constructor(){this.cookieStorage=new Ea}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},on=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},ba="__coveo.analytics.history",Jp=20,Xp=1e3*60,Zp=75,nn=class{constructor(t){this.store=t||SF()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return E(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return E(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(ba);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return E(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(ba);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(ba,JSON.stringify(t.slice(0,Jp)))}catch{}}clear(){try{this.store.removeItem(ba)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((o,n)=>(n.internalTime||0)-(o.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,Zp)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>Xp:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:o,time:n,value:a}=r;return{name:o,time:n,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:o,value:n}=t;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:o}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},ef=Object.freeze({__proto__:null,HistoryStore:nn,MAX_NUMBER_OF_HISTORY_ELEMENTS:Jp,MAX_VALUE_SIZE:Zp,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Xp,STORE_KEY:ba,default:nn}),CF=(e,t)=>E(void 0,void 0,void 0,function*(){return e===ce.view?(yield xF(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),xF=e=>E(void 0,void 0,void 0,function*(){let t=new nn,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),Xi,RF=new Uint8Array(16);function FF(){if(!Xi&&(Xi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xi(RF)}var vF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ec(e){return typeof e=="string"&&vF.test(e)}var we=[];for(let e=0;e<256;++e)we.push((e+256).toString(16).slice(1));function tf(e,t=0){return(we[e[t+0]]+we[e[t+1]]+we[e[t+2]]+we[e[t+3]]+"-"+we[e[t+4]]+we[e[t+5]]+"-"+we[e[t+6]]+we[e[t+7]]+"-"+we[e[t+8]]+we[e[t+9]]+"-"+we[e[t+10]]+we[e[t+11]]+we[e[t+12]]+we[e[t+13]]+we[e[t+14]]+we[e[t+15]]).toLowerCase()}function PF(e){if(!ec(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function AF(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var bF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",IF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function wF(e,t,r){function o(n,a,u,l){var m;if(typeof n=="string"&&(n=AF(n)),typeof a=="string"&&(a=PF(a)),((m=a)===null||m===void 0?void 0:m.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+n.length);if(d.set(a),d.set(n,a.length),d=r(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,u){l=l||0;for(let p=0;p<16;++p)u[l+p]=d[p];return u}return tf(d)}try{o.name=e}catch{}return o.DNS=bF,o.URL=IF,o}var EF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qp={randomUUID:EF};function uo(e,t,r){if(Qp.randomUUID&&!t&&!e)return Qp.randomUUID();e=e||{};let o=e.random||(e.rng||FF)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=o[n];return t}return tf(o)}function TF(e,t,r,o){switch(e){case 0:return t&r^~t&o;case 1:return t^r^o;case 2:return t&r^t&o^r&o;case 3:return t^r^o}}function ol(e,t){return e<<t|e>>>32-t}function OF(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let u=unescape(encodeURIComponent(e));e=[];for(let l=0;l<u.length;++l)e.push(u.charCodeAt(l))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let o=e.length/4+2,n=Math.ceil(o/16),a=new Array(n);for(let u=0;u<n;++u){let l=new Uint32Array(16);for(let m=0;m<16;++m)l[m]=e[u*64+m*4]<<24|e[u*64+m*4+1]<<16|e[u*64+m*4+2]<<8|e[u*64+m*4+3];a[u]=l}a[n-1][14]=(e.length-1)*8/Math.pow(2,32),a[n-1][14]=Math.floor(a[n-1][14]),a[n-1][15]=(e.length-1)*8&4294967295;for(let u=0;u<n;++u){let l=new Uint32Array(80);for(let f=0;f<16;++f)l[f]=a[u][f];for(let f=16;f<80;++f)l[f]=ol(l[f-3]^l[f-8]^l[f-14]^l[f-16],1);let m=r[0],d=r[1],p=r[2],y=r[3],h=r[4];for(let f=0;f<80;++f){let S=Math.floor(f/20),R=ol(m,5)+TF(S,d,p,y)+h+t[S]+l[f]>>>0;h=y,y=p,p=ol(d,30)>>>0,d=m,m=R}r[0]=r[0]+m>>>0,r[1]=r[1]+d>>>0,r[2]=r[2]+p>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var qF=wF("v5",80,OF),Bp=qF,rf="2.30.39",Up=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,Ia={pageview:"pageview",event:"event"},tc=class{constructor({client:t,uuidGenerator:r=uo}){this.client=t,this.uuidGenerator=r}},cl=class extends tc{constructor({client:t,uuidGenerator:r=uo}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Up(window.location),this.lastReferrer=tn()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:tn()?document.title:"",encoding:tn()?document.characterSet:"UTF-8"},o={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),o),n),r)}updateLocationForNextPageView(t,r){let{pageViewId:o,referrer:n,location:a}=this.getNextValues(t,r);this.lastReferrer=n,this.pageViewId=o,this.currentLocation=a,t===Ia.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===Ia.pageview?this.nextPageViewId:this.pageViewId,referrer:t===Ia.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===Ia.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return Up(window.location)}},Rr=class e{constructor(t,r){if(!ec(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let o=new URL(t);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(o.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[o,n]=r;if(o.length!==32||isNaN(parseInt(n)))return null;let a=o.substring(0,8)+"-"+o.substring(8,12)+"-"+o.substring(12,16)+"-"+o.substring(16,20)+"-"+o.substring(20,32);return ec(a)?new e(a,Number.parseInt(n)*1e3):null}};Rr.cvo_cid="cvo_cid";Rr.expirationTime=120;var sl=class extends tc{constructor({client:t,uuidGenerator:r=uo}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return E(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),o=yield this.client.getCurrentVisitorId();return r.searchParams.set(Rr.cvo_cid,new Rr(o,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};sl.Id="link";var ct=Object.keys;function Zi(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var nl=128,of=192,jp=224,_p=240;function kF(e){return(e&248)===_p?4:(e&_p)===jp?3:(e&jp)===of?2:1}function VF(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let o=Number.parseInt(e.substring(r-2,r),16);if((o&nl)!=nl)break;if(r-=3,(o&of)!=nl){t-r>=kF(o)*3&&(r=t);break}}return e.substring(0,r)}var ul={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},DF=ct(ul).map(e=>ul[e]),NF=[...DF].join("|"),MF=new RegExp(`^(${NF}$)`),LF={svcAction:"svc_action",svcActionData:"svc_action_data"},QF=e=>ct(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let o=ul[r]||r;return Object.assign(Object.assign({},t),{[o]:e[r]})},{}),BF=e=>MF.test(e),UF=[BF],$p={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},zp={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Oe={action:"pa",list:"pal",listSource:"pls"},rc={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},jF=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],ll={id:"quoteId",affiliation:"quoteAffiliation"},dl={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},_F={add:Oe,bookmark_add:Oe,bookmark_remove:Oe,click:Oe,checkout:Oe,checkout_option:Oe,detail:Oe,impression:Oe,remove:Oe,refund:Object.assign(Object.assign({},Oe),rc),purchase:Object.assign(Object.assign({},Oe),rc),quickview:Oe,quote:Object.assign(Object.assign({},Oe),ll),review:Object.assign(Object.assign({},Oe),dl)},$F=ct($p).map(e=>$p[e]),zF=ct(zp).map(e=>zp[e]),WF=ct(Oe).map(e=>Oe[e]),HF=ct(rc).map(e=>rc[e]),KF=ct(dl).map(e=>dl[e]),GF=ct(ll).map(e=>ll[e]),YF=[...$F,"custom"].join("|"),JF=[...zF,"custom"].join("|"),nf="(pr[0-9]+)",af="(il[0-9]+pi[0-9]+)",XF=new RegExp(`^${nf}(${YF})$`),ZF=new RegExp(`^(${af}(${JF}))|(il[0-9]+nm)$`),ev=new RegExp(`^(${WF.join("|")})$`),tv=new RegExp(`^(${HF.join("|")})$`),rv=new RegExp(`^${nf}custom$`),ov=new RegExp(`^${af}custom$`),nv=new RegExp(`^(${[...jF,...KF,...GF].join("|")})$`),av=e=>XF.test(e),iv=e=>ZF.test(e),cv=e=>ev.test(e),sv=e=>tv.test(e),uv=e=>nv.test(e),lv=[iv,av,cv,sv,uv],dv=[rv,ov],mv={anonymizeIp:"aip"},pv={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},fv={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},gv=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],yv=Object.assign(Object.assign(Object.assign(Object.assign({},mv),pv),fv),gv.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),ml=Object.assign(Object.assign({},yv),LF),hv=e=>{let t=!!e.action&&_F[e.action]||{};return ct(e).reduce((r,o)=>{let n=t[o]||ml[o]||o;return Object.assign(Object.assign({},r),{[n]:e[o]})},{})},Sv=ct(ml).map(e=>ml[e]),Cv=e=>Sv.indexOf(e)!==-1,xv=e=>e==="custom",Rv=e=>[...lv,...UF,Cv,xv].some(t=>t(e)),Fv=e=>ct(e).reduce((t,r)=>{let o=vv(r);return o?Object.assign(Object.assign({},t),Pv(o,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),vv=e=>{let t;return[...dv].every(r=>{var o;return t=(o=r.exec(e))===null||o===void 0?void 0:o[1],!t}),t},Pv=(e,t)=>ct(t).reduce((r,o)=>Object.assign(Object.assign({},r),{[`${e}${o}`]:t[o]}),{}),pl=class{constructor(t){this.opts=t}sendEvent(t,r){return E(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:o,preprocessRequest:n}=this.opts,a=yield this.getQueryParamsForEventType(t),{url:u,payload:l}=yield this.preProcessRequestAsPotentialJSONString(`${o}/analytics/${t}?${a}`,r,n),m=this.encodeForEventType(t,l),d=new Blob([m],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(u,d)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,o){return E(this,void 0,void 0,function*(){let n=t,a=r;if(o){let u=yield o({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:l,body:m}=u;n=l||t;try{a=JSON.parse(m)}catch(d){console.error("Unable to process the request body as a JSON string",d)}}return{payload:a,url:n}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return E(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:o}=this.opts,n=yield o.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(t){return[ce.click,ce.custom,ce.search,ce.view].indexOf(t)!==-1}encodeEventToJson(t,r,o){let n=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return o&&(n=`access_token=${encodeURIComponent(o)}&${n}`),n}},fl=class{sendEvent(t,r){return E(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return E(this,void 0,void 0,function*(){return Promise.resolve()})}},oc=class{constructor(t){this.opts=t}sendEvent(t,r){return E(this,void 0,void 0,function*(){let{baseUrl:o,visitorIdProvider:n,preprocessRequest:a}=this.opts,u=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",l={url:`${o}/analytics/${t}${u}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},m=Object.assign(Object.assign({},l),a?yield a(l,"analyticsFetch"):{}),{url:d}=m,p=er(m,["url"]),y;try{y=yield g(d,p)}catch(h){console.error("An error has occured when sending the event.",h);return}if(y.ok){let h=yield y.json();return h.visitorId&&n.setCurrentVisitorId(h.visitorId),h}else{try{y.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,y,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return E(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield g(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[ce.click,ce.custom,ce.search,ce.view].indexOf(t)!==-1}getVisitorIdParam(){return E(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},gl=class{constructor(t,r){al()&&Yp()?this.storage=new il:al()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new on),this.client=new oc(t),this.beaconClient=new pl(t),window.addEventListener("beforeunload",()=>{let o=r();for(let{eventType:n,payload:a}of o)this.beaconClient.sendEvent(n,a)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},yl=class{constructor(t,r){this.storage=r||new on,this.client=new oc(t)}getClientDependingOnEventType(t){return this.client}},nc=class{constructor(){this.storage=new on,this.client=new fl}getClientDependingOnEventType(t){return this.client}},Av="xx",bv=e=>e?.startsWith(Av)||!1,Iv=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function wv(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Ev=["1",1,"yes",!0];function ac(){return hl()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Ev.indexOf(e)!==-1)}var cf="v15",sf={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Tv(e=sf.default,t=cf,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let o=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${o?"":"/rest"}/${t}`}var Ov="38824e1f-37f5-42d3-8372-a4b8fa9df946",rr=class{get defaultOptions(){return{endpoint:sf.default,isCustomEndpoint:!1,token:"",version:cf,beforeSendHooks:[],afterSendHooks:[]}}get version(){return rf}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[CF,hF].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};ac()?this.runtime=new nc:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(ce.view,{newEventType:ce.view,addClientIdParameter:!0}),this.addEventTypeMapping(ce.click,{newEventType:ce.click,addClientIdParameter:!0}),this.addEventTypeMapping(ce.custom,{newEventType:ce.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ce.search,{newEventType:ce.search,addClientIdParameter:!0})}initRuntime(t){return Mp()&&tn()?new gl(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(wv()&&console.warn(Iv),new yl(t))}get storage(){return this.runtime.storage}determineVisitorId(){return E(this,void 0,void 0,function*(){try{return Mp()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||uo()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),uo()}})}getCurrentVisitorId(){return E(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return E(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return E(this,void 0,void 0,function*(){if(ec(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Bp(t,Bp(r,Ov)))}})}getParameters(t,...r){return E(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return E(this,void 0,void 0,function*(){let o=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,o)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(uo()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(ac())return null;try{let r=new URL(t).searchParams.get(Rr.cvo_cid);if(r==null)return null;let o=Rr.fromString(r);return!o||!tn()||!o.validate(document.referrer,this.acceptedLinkReferrers)?null:o.clientId}catch{}return null}resolveParameters(t,...r){return E(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:o=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:u=!1}=this.eventTypeMapping[t]||{};return yield[f=>o.length>0?this.parseVariableArgumentsPayload(o,f):f[0],f=>E(this,void 0,void 0,function*(){return Object.assign(Object.assign({},f),{visitorId:n?yield this.getCurrentVisitorId():""})}),f=>E(this,void 0,void 0,function*(){return u?Object.assign(Object.assign({},f),{clientId:yield this.getCurrentVisitorId()}):f}),f=>a?this.ensureAnonymousUserWhenUsingApiKey(f):f,f=>this.beforeSendHooks.reduce((S,R)=>E(this,void 0,void 0,function*(){let P=yield S;return yield R(t,P)}),f)].reduce((f,S)=>E(this,void 0,void 0,function*(){let R=yield f;return yield S(R)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return E(this,void 0,void 0,function*(){let{usesMeasurementProtocol:o=!1}=this.eventTypeMapping[t]||{};return yield[y=>this.setTrackingIdIfTrackingIdNotPresent(y),y=>this.removeEmptyPayloadValues(y,t),y=>this.validateParams(y,t),y=>o?hv(y):y,y=>o?this.removeUnknownParameters(y):y,y=>o?this.processCustomParameters(y):this.mapCustomParametersToCustomData(y)].reduce((y,h)=>E(this,void 0,void 0,function*(){let f=yield y;return yield h(f)}),Promise.resolve(r))})}makeEvent(t,...r){return E(this,void 0,void 0,function*(){let{newEventType:o=t}=this.eventTypeMapping[t]||{},n=yield this.resolveParameters(t,...r),a=yield this.resolvePayloadForParameters(t,n);return{eventType:o,payload:a,log:u=>E(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:o,payload:Object.assign(Object.assign({},a),u)}),yield Promise.all(this.afterSendHooks.map(l=>l(t,Object.assign(Object.assign({},n),u)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return E(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return E(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:o}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,o)}})}clear(){this.storage.removeItem("visitorId"),new nn().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return E(this,void 0,void 0,function*(){return this.makeEvent(ce.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,o=er(t,["searchQueryUid"]);return E(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(o)).log({searchQueryUid:r})})}makeClickEvent(t){return E(this,void 0,void 0,function*(){return this.makeEvent(ce.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,o=er(t,["searchQueryUid"]);return E(this,void 0,void 0,function*(){return(yield this.makeClickEvent(o)).log({searchQueryUid:r})})}makeCustomEvent(t){return E(this,void 0,void 0,function*(){return this.makeEvent(ce.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,o=er(t,["lastSearchQueryUid"]);return E(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(o)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return E(this,void 0,void 0,function*(){return this.makeEvent(ce.view,t)})}sendViewEvent(t){return E(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return E(this,void 0,void 0,function*(){let r=yield(yield g(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return E(this,void 0,void 0,function*(){return yield(yield g(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let o={};for(let n=0,a=r.length;n<a;n++){let u=r[n];if(typeof u=="string")o[t[n]]=u;else if(typeof u=="object")return Object.assign(Object.assign({},o),u)}return o}isKeyAllowedEmpty(t,r){return({[ce.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let o=n=>typeof n<"u"&&n!==null&&n!=="";return Object.keys(t).filter(n=>this.isKeyAllowedEmpty(r,n)||o(t[n])).reduce((n,a)=>Object.assign(Object.assign({},n),{[a]:t[a]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(o=>{if(Rv(o))return!0;console.log(o,"is not processed by coveoua")}).reduce((o,n)=>Object.assign(Object.assign({},o),{[n]:t[n]}),{})}processCustomParameters(t){let{custom:r}=t,o=er(t,["custom"]),n={};r&&Zi(r)&&(n=this.lowercaseKeys(r));let a=Fv(o);return Object.assign(Object.assign({},n),a)}mapCustomParametersToCustomData(t){let{custom:r}=t,o=er(t,["custom"]);if(r&&Zi(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},o),{customData:Object.assign(Object.assign({},n),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),o={};return r.forEach(n=>{o[n.toLowerCase()]=t[n]}),o}validateParams(t,r){let{anonymizeIp:o}=t,n=er(t,["anonymizeIp"]);return o!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${o}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==ce.view||r==ce.click||r==ce.search||r==ce.custom)&&(n.originLevel3=this.limit(n.originLevel3,1024)),r==ce.view&&(n.location=this.limit(n.location,1024)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,o=er(t,["userId"]);return bv(this.options.token)&&!r?(o.userId="anonymous",o):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,o=er(t,["trackingId"]);return r?t:(o.hasOwnProperty("custom")&&Zi(o.custom)&&(o.custom.hasOwnProperty("context_website")||o.custom.hasOwnProperty("siteName"))&&(o.trackingId=o.custom.context_website||o.custom.siteName),o.hasOwnProperty("customData")&&Zi(o.customData)&&(o.customData.hasOwnProperty("context_website")||o.customData.hasOwnProperty("siteName"))&&(o.trackingId=o.customData.context_website||o.customData.siteName),o)}limit(t,r){return typeof t=="string"?VF(t,r):t}get baseUrl(){return Tv(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},tr;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(tr||(tr={}));var q;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2",e.generatedAnswerCitationClick="generatedAnswerCitationClick"})(q||(q={}));var Wp={[q.triggerNotify]:"queryPipelineTriggers",[q.triggerExecute]:"queryPipelineTriggers",[q.triggerQuery]:"queryPipelineTriggers",[q.triggerRedirect]:"queryPipelineTriggers",[q.queryError]:"errors",[q.queryErrorBack]:"errors",[q.queryErrorClear]:"errors",[q.queryErrorRetry]:"errors",[q.pagerNext]:"getMoreResults",[q.pagerPrevious]:"getMoreResults",[q.pagerNumber]:"getMoreResults",[q.pagerResize]:"getMoreResults",[q.pagerScrolling]:"getMoreResults",[q.facetSearch]:"facet",[q.facetShowLess]:"facet",[q.facetShowMore]:"facet",[q.recommendation]:"recommendation",[q.likeSmartSnippet]:"smartSnippet",[q.dislikeSmartSnippet]:"smartSnippet",[q.expandSmartSnippet]:"smartSnippet",[q.collapseSmartSnippet]:"smartSnippet",[q.openSmartSnippetFeedbackModal]:"smartSnippet",[q.closeSmartSnippetFeedbackModal]:"smartSnippet",[q.sendSmartSnippetReason]:"smartSnippet",[q.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[q.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[q.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[q.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[q.clearRecentQueries]:"recentQueries",[q.recentResultClick]:"recentlyClickedDocuments",[q.clearRecentResults]:"recentlyClickedDocuments",[q.showLessFoldedResults]:"folding",[q.caseDetach]:"case",[q.likeGeneratedAnswer]:"generatedAnswer",[q.dislikeGeneratedAnswer]:"generatedAnswer",[q.openGeneratedAnswerSource]:"generatedAnswer",[q.generatedAnswerStreamEnd]:"generatedAnswer",[q.generatedAnswerSourceHover]:"generatedAnswer",[q.generatedAnswerCopyToClipboard]:"generatedAnswer",[q.generatedAnswerHideAnswers]:"generatedAnswer",[q.generatedAnswerShowAnswers]:"generatedAnswer",[q.generatedAnswerExpand]:"generatedAnswer",[q.generatedAnswerCollapse]:"generatedAnswer",[q.generatedAnswerFeedbackSubmit]:"generatedAnswer",[q.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[tr.expandToFullUI]:"interface",[tr.openUserActions]:"User Actions",[tr.showPrecedingSessions]:"User Actions",[tr.showFollowingSessions]:"User Actions",[tr.clickViewedDocument]:"User Actions",[tr.clickPageView]:"User Actions",[tr.createArticle]:"createArticle"},an=class{constructor(){this.runtime=new nc,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ce.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ce.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ce.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ce.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return rf}};function qv(e){let t="";return e.filter(r=>{let o=r!==t;return t=r,o})}function kv(e){return e.map(t=>t.replace(/;/g,""))}function uf(e){let r=e.join(";");return r.length<=256?r:uf(e.slice(1))}var Hp=e=>{let t=kv(e),r=qv(t);return uf(r)};function Kp(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Hp(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Hp(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var ic=class{constructor(t,r){this.opts=t,this.provider=r;let o=t.enableAnalytics===!1||ac();this.coveoAnalyticsClient=o?new an:new rr(t)}disable(){this.coveoAnalyticsClient=new an}enable(){this.coveoAnalyticsClient=new rr(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(q.interfaceLoad)}logInterfaceLoad(){return E(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(q.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return E(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(q.recommendation)}logRecommendation(){return E(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(q.recommendationOpen,t,r)}logRecommendationOpen(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(q.staticFilterClearAll,t)}logStaticFilterClearAll(t){return E(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(q.staticFilterSelect,t)}logStaticFilterSelect(t){return E(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(q.staticFilterDeselect,t)}logStaticFilterDeselect(t){return E(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(q.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return E(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(q.interfaceChange,t)}logInterfaceChange(t){return E(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(q.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return E(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(q.didyoumeanClick)}logDidYouMeanClick(){return E(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(q.resultsSort,t)}logResultsSort(t){return E(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(q.searchboxSubmit)}logSearchboxSubmit(){return E(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(q.searchboxClear)}logSearchboxClear(){return E(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(q.searchboxAsYouType)}logSearchboxAsYouType(){return E(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(q.breadcrumbFacet,t)}logBreadcrumbFacet(t){return E(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(q.breadcrumbResetAll)}logBreadcrumbResetAll(){return E(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(q.documentQuickview,t,r)}logDocumentQuickview(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(q.documentOpen,t,r)}logDocumentOpen(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(q.omniboxAnalytics,Kp(t))}logOmniboxAnalytics(t){return E(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(q.omniboxFromLink,Kp(t))}logOmniboxFromLink(t){return E(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(q.searchFromLink)}logSearchFromLink(){return E(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(q.triggerNotify,t)}logTriggerNotify(t){return E(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(q.triggerExecute,t)}logTriggerExecute(t){return E(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(q.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return E(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(q.undoTriggerQuery,t)}logUndoTriggerQuery(t){return E(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(q.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return E(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(q.pagerResize,t)}logPagerResize(t){return E(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(q.pagerNumber,t)}logPagerNumber(t){return E(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(q.pagerNext,t)}logPagerNext(t){return E(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(q.pagerPrevious,t)}logPagerPrevious(t){return E(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(q.pagerScrolling)}logPagerScrolling(){return E(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(q.facetClearAll,t)}logFacetClearAll(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(q.facetSearch,t)}logFacetSearch(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(q.facetSelect,t)}logFacetSelect(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(q.facetDeselect,t)}logFacetDeselect(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(q.facetExclude,t)}logFacetExclude(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(q.facetUnexclude,t)}logFacetUnexclude(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(q.facetSelectAll,t)}logFacetSelectAll(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(q.facetUpdateSort,t)}logFacetUpdateSort(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(q.facetShowMore,t)}logFacetShowMore(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(q.facetShowLess,t)}logFacetShowLess(t){return E(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(q.queryError,t)}logQueryError(t){return E(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return E(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(q.queryErrorBack);return{description:t.description,log:()=>E(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(q.queryErrorBack)})}})}logQueryErrorBack(){return E(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return E(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(q.queryErrorRetry);return{description:t.description,log:()=>E(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(q.queryErrorRetry)})}})}logQueryErrorRetry(){return E(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return E(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(q.queryErrorClear);return{description:t.description,log:()=>E(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(q.queryErrorClear)})}})}logQueryErrorClear(){return E(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(q.likeSmartSnippet)}logLikeSmartSnippet(){return E(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(q.dislikeSmartSnippet)}logDislikeSmartSnippet(){return E(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(q.expandSmartSnippet)}logExpandSmartSnippet(){return E(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(q.collapseSmartSnippet)}logCollapseSmartSnippet(){return E(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(q.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return E(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(q.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return E(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(q.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(q.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return E(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(q.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return E(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(q.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return E(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(q.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return E(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(q.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(q.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(q.copyToClipboard,t,r)}logCopyToClipboard(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(q.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(q.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(q.recentQueryClick)}logRecentQueryClick(){return E(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(q.clearRecentQueries)}logClearRecentQueries(){return E(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(q.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(q.clearRecentResults)}logClearRecentResults(){return E(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(q.noResultsBack)}logNoResultsBack(){return E(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(q.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(q.showLessFoldedResults)}logShowLessFoldedResults(){return E(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var o;return{actionCause:r,customData:(o=t.payload)===null||o===void 0?void 0:o.customData}}makeCustomEvent(t,r,o=Wp[t]){return E(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:o,eventValue:t}),u=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(u,t),log:({searchUID:l})=>u.log({lastSearchQueryUid:l})}})}logCustomEvent(t,r,o=Wp[t]){return E(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(t,r,o)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,o){return E(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),o),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:t}),u=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(u,t),log:({searchUID:l})=>u.log({lastSearchQueryUid:l})}})}logCustomEventWithType(t,r,o){return E(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,o)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return E(this,void 0,void 0,function*(){let o=yield this.getBaseSearchEventRequest(t,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(o);return{description:this.makeEventDescription(n,t),log:({searchUID:a})=>n.log({searchQueryUid:a})}})}makeClickEvent(t,r,o,n){return E(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},o),n))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),u=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(u,t),log:({searchUID:l})=>u.log({searchQueryUid:l})}})}logClickEvent(t,r,o,n){return E(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,o,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var o,n;return E(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(o=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(o)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return E(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof rr?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(q.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return E(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(q.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return E(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(q.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return E(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCitationClick(t,r){return this.makeClickEvent(q.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logGeneratedAnswerCitationClick(t,r){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCitationClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(q.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(q.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(q.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(q.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(q.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(q.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(q.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(q.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(q.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return E(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(q.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return E(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(q.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return E(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},cc=Object.assign({},Ia),Gp=Object.keys(cc).map(e=>cc[e]),rn=class extends cl{constructor({client:t,uuidGenerator:r=uo}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>Gp.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(Gp.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(cc.pageview,{newEventType:ce.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(cc.event,{newEventType:ce.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var o;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((o=this.actionData)!==null&&o!==void 0?o:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),n),r)}getTicketPayload(){return QF(this.ticket)}};rn.Id="svc";var sc;(function(e){e.click="click",e.flowStart="flowStart"})(sc||(sc={}));var yt;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(yt||(yt={}));var uc;(function(e){e.quit="Quit",e.solved="Solved"})(uc||(uc={}));var lc=class{constructor(t,r){var o;this.options=t,this.provider=r;let n=((o=t.enableAnalytics)!==null&&o!==void 0?o:!0)&&!ac();this.coveoAnalyticsClient=n?new rr(t):new an,this.svc=new rn({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new an,this.svc=new rn({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new rr(this.options),this.svc=new rn({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(yt.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(yt.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(yt.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.svc.setAction(yt.suggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logRateDocumentSuggestion(t){return this.svc.setAction(yt.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(yt.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(yt.caseCancelled,{reason:uc.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(yt.caseSolved,{reason:uc.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(yt.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",sc.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",sc.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}};var lf=e=>new rr(e).getCurrentVisitorId(),bt=new ef.HistoryStore,Ta=(e,t)=>typeof t=="function"?(...r)=>{let o=ya(r[0]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics preprocessRequest. Returning original request."),o}}:void 0,Oa=(e,t)=>(...r)=>{let o=ya(r[1]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics hook. Returning original request."),o}};s();c();s();c();s();c();function Vv({config:e,environment:t,event:r,listenerManager:o}){let{url:n,token:a,mode:u}=e;u!=="disabled"&&(o.call(r),t.send(n,a,r))}var Dv=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Nv(e){return typeof e=="string"&&Dv.test(e)}function Mv(e){return{getClientId:()=>{let t="visitorId",r=e.get(),o=r.storage,n=o.getItem(t),a=n&&Nv(n)?n:r.generateUUID();return o.setItem(t,a),a}}}var mf="0.7.10";function Lv(e){let{trackingId:t}=e;return{trackingId:t}}function Qv(e){return(e.source||[]).concat([`relay@${mf}`])}function pf(e,t,r,o){let{getReferrer:n,getLocation:a,getUserAgent:u}=r,l=Lv(t),m=o.getClientId();return Object.freeze({type:e,config:l,ts:Date.now(),source:Qv(t),clientId:m,userAgent:u(),referrer:n(),location:a()})}function Bv(e,t,r,o,n){return{...t,meta:pf(e,r,o,n)}}var Uv="*";function jv(){let e=[];function t({type:m,callback:d}){return e.findIndex(p=>p.type===m&&p.callback===d)}function r(m,d){return m.type==="*"||d===m.type}function o(m){return t(m)<0&&e.push(m),()=>l(m.type,m.callback)}function n(m){e.forEach(d=>{if(r(d,m.meta.type))try{d.callback(m)}catch(p){console.error(p)}})}function a(m){if(m===Uv)e.length=0;else for(let d=e.length-1;d>=0;d--)e[d].type===m&&e.splice(d,1)}function u(m){let d=t(m);d>=0&&e.splice(d,1)}function l(m,d){d?u({type:m,callback:d}):a(m)}return{add:o,call:n,remove:l}}function df({url:e,token:t,trackingId:r,...o}){return Object.freeze({url:e,token:t,trackingId:r,...!!o.mode&&{mode:o.mode},...!!o.source&&{source:o.source}})}function _v(e){let t=df(e);return{get:()=>t,update:r=>{t=df({...t,...r})}}}function $v(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var Sl=zv();function zv(){let e="coveo_",t=r=>{let o=r.split(".").slice(-2);return o.length==2?o.join("."):""};return{getItem(r){let o=`${e}${r}=`,n=document.cookie.split(";");for(let a of n){let u=a.replace(/^\s+/,"");if(u.lastIndexOf(o,0)===0)return u.substring(o.length,u.length)}return null},setItem(r,o,n){let a=t(window.location.hostname),u=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,l=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${o}${u}${l};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function Wv(){return{getItem(e){return Sl.getItem(e)||localStorage.getItem(e)},removeItem(e){Sl.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Sl.setItem(e,t,31556952e3)}}}function Hv(){let e=document.referrer;return e===""?null:e}function Kv(){return{runtime:"browser",send:(e,t,r)=>{let o=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if($v().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!o)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>Hv(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:Wv()}}function Gv(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function Yv(){return{getItem(){return null},removeItem(){},setItem(){}}}function Jv(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Yv()}}function Xv(e){return e.get().mode!=="disabled"&&Zv()&&Gv()?Kv():Jv()}function Zv(){try{return typeof window=="object"}catch{return!1}}function eP(e){return{get:()=>Object.freeze(Xv(e))}}function ff(e){let t=_v(e),r=jv(),o=eP(t),n=Mv(o);return{emit:(a,u)=>{let l=t.get(),m=o.get(),d=Bv(a,u,l,m,n);return Vv({config:l,environment:m,event:d,listenerManager:r})},getMeta:a=>pf(a,t.get(),o.get(),n),on:(a,u)=>r.add({type:a,callback:u}),off:(a,u)=>r.remove(a,u),updateConfig:a=>t.update(a),version:mf}}var cn=j(e=>e.configuration.organizationId,e=>e.configuration.environment,e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>Pt(e.configuration.analytics),(e,t,r,{trackingId:o,apiBaseUrl:n,enabled:a},u)=>ff({mode:a?"emit":"disabled",url:n??Di(e,t),token:r,trackingId:o,source:u}));s();c();s();c();var sn=()=>"default";var qa=class{constructor(t){fe(this,"state");this.state=t()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||sn()}},gf=({logger:e,getState:t,analyticsClientMiddleware:r=(a,u)=>u,preprocessRequest:o,provider:n=new qa(t)})=>{let a=t(),u=a.configuration.accessToken,l=a.configuration.analytics.apiBaseUrl??Ne(a.configuration.organizationId,a.configuration.environment,"analytics"),m=a.configuration.analytics.runtimeEnvironment,d=a.configuration.analytics.enabled,p=new lc({enableAnalytics:d,token:u,endpoint:l,runtimeEnvironment:m,preprocessRequest:Ta(e,o),beforeSendHooks:[Oa(e,r),(y,h)=>(e.info({...h,type:y,endpoint:l,token:u},"Analytics request"),h)]},n);return d||p.disable(),p};s();c();s();c();s();c();s();c();function dc(){return{desiredCount:5,numberOfValues:8,set:{}}}s();c();s();c();var rP=(e,t)=>e.categoryFacetSet[t]?.request;var Rl=(e,t)=>{let r=rP(e,t);return Ft(r?.currentValues??[])};s();c();function mc(){return{}}s();c();function yf(e){return{request:e}}function un(){return{}}s();c();function hf(e){return{request:e}}function ln(){return{}}s();c();function Sf(e){return{request:e,hasBreadcrumbs:!0}}function dn(){return{}}function pc(e){return{facetSet:e.facetSet??dn(),categoryFacetSet:e.categoryFacetSet??mc(),dateFacetSet:e.dateFacetSet??un(),numericFacetSet:e.numericFacetSet??ln(),automaticFacetSet:e.automaticFacetSet??dc()}}var Fl=e=>{let t=[];return aP(e).forEach((r,o)=>{let n=pP(e,r.facetId),a=dP(r,o+1);if(nP(r)){if(!!!Rl(e,r.facetId).length)return;t.push({...a,...uP(e,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((u,l)=>{if(u.state==="idle")return;let m=Cf(u,l+1,n),d=oP(r)?xf(u):cP(u);t.push({...a,...m,...d})})}),iP(e).forEach((r,o)=>{let n=lP(r,o+1);r.values.forEach((a,u)=>{if(a.state==="idle")return;let l=Cf(a,u+1,"specific"),m=xf(a);t.push({...n,...l,...m})})}),t},oP=e=>e.type==="specific",nP=e=>e.type==="hierarchical",aP=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),iP=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),Cf=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),cP=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),xf=e=>({displayValue:e.value,value:e.value}),sP=(e,t)=>Rl(e,t).map(o=>o.value).join(";"),uP=(e,t)=>{let o=sP(e,t);return{value:o,valuePosition:1,displayValue:o}},lP=(e,t)=>({title:Rf(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),dP=(e,t)=>({title:Rf(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Rf=(e,t)=>`${e}_${t}`,mP=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,pP=(e,t)=>{let r=mP(e,t);return r?r.type:"specific"};s();c();var qe=()=>({q:"",enableQuerySyntax:!1});s();c();function ka(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function et(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:ka(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:ka(),extendedResults:{}}}s();c();var fP=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Va=class{constructor(t){this.getState=t;fe(this,"state");this.state=t()}getLanguage(){return fP(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,o=t?.contextValues||{},n={};for(let[a,u]of Object.entries(o)){let l=`context_${a}`;n[l]=u}return r.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=Vo),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||sn()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};s();c();s();c();s();c();var Ff=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Ff||{}),vf=(a=>(a.Relevancy="relevancy",a.QRE="qre",a.Date="date",a.Field="field",a.NoSort="nosort",a))(vf||{}),vl=e=>{if(fi(e))return e.map(t=>vl(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Pf=()=>({by:"relevancy"});var BQ=new k({values:{by:new ft({enum:vf,required:!0}),order:new ft({enum:Ff}),field:new T}});function lo(){return vl(Pf())}var Da=class Da extends Va{constructor(){super(...arguments);fe(this,"getFacetRequest",r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response)}getFacetState(){return Fl(pc(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||Da.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||et().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),o=this.state.search?.response.pipeline||this.state.pipeline||Da.fallbackPipelineName;return r?o:void 0}getBaseMetadata(){let r=this.getState(),o=super.getBaseMetadata(),n=r.search?.response?.extendedResults?.generativeQuestionAnsweringId;return n&&(o.generativeQuestionAnsweringId=n),o}getFacetMetadata(r,o){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetValue:o,facetTitle:`${a}_${r}`}}getFacetClearAllMetadata(r){let n=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:n,facetTitle:`${n}_${r}`}}getFacetUpdateSortMetadata(r,o){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,criteria:o,facetTitle:`${a}_${r}`}}getRangeBreadcrumbFacetMetadata(r,o){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetRangeEnd:o.end,facetRangeEndInclusive:o.endInclusive,facetRangeStart:o.start,facetTitle:`${a}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??lo()}}getStaticFilterToggleMetadata(r,o){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:o}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,o){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:a,categoryFacetPath:o,categoryFacetTitle:`${a}_${r}`}}getOmniboxAnalyticsMetadata(r,o){let n=this.state.querySuggest&&this.state.querySuggest[r],a=n.completions.map(d=>d.expression),u=n.partialQueries.length-1,l=n.partialQueries[u]||"",m=n.responseId;return{...this.getBaseMetadata(),suggestionRanking:a.indexOf(o),partialQuery:l,partialQueries:n.partialQueries.length>0?n.partialQueries:"",suggestions:a.length>0?a:"",querySuggestResponseId:m}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),o={};return r.generatedAnswer?.isVisible!==void 0&&(o.showGeneratedAnswer=r.generatedAnswer.isVisible),o}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||qe().q}get responseTime(){return this.state.search?.duration||et().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||et().response.totalCountFiltered}};fe(Da,"fallbackPipelineName","default");var Fr=Da,Af=({logger:e,getState:t,analyticsClientMiddleware:r=(a,u)=>u,preprocessRequest:o,provider:n=new Fr(t)})=>{let a=t(),u=a.configuration.accessToken,l=a.configuration.analytics.apiBaseUrl??Ne(a.configuration.organizationId,a.configuration.environment,"analytics"),m=a.configuration.analytics.runtimeEnvironment,d=a.configuration.analytics.enabled,p=new ic({token:u,endpoint:l,runtimeEnvironment:m,preprocessRequest:Ta(e,o),beforeSendHooks:[Oa(e,r),(y,h)=>(e.info({...h,type:y,endpoint:l,token:u},"Analytics request"),h)]},n);return d||p.disable(),p},Pl=()=>{let t=bt.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};s();c();s();c();var Al=()=>"";function bf(e,t){return{...new Fr(t).getBaseMetadata(),actionCause:e,type:e}}function gP(e){return Object.assign(e,{instantlyCallable:!0})}function yP(e,t){let r=a=>gP(J(e,a)),o=r(async(a,{getState:u,extra:l})=>{let{analyticsClientMiddleware:m,preprocessRequest:d,logger:p}=l;return await(await t({getState:u,analyticsClientMiddleware:m,preprocessRequest:d,logger:p})).log({state:u(),extra:l})});return Object.assign(o,{prepare:async({getState:a,analyticsClientMiddleware:u,preprocessRequest:l,logger:m})=>{let{description:d,log:p}=await t({getState:a,analyticsClientMiddleware:u,preprocessRequest:l,logger:m});return{description:d,action:r(async(y,{getState:h,extra:f})=>await p({state:h(),extra:f}))}}}),o}var If=(e,t,r)=>{function o(...n){let a=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return CP(a)}return o},hP=e=>e.configuration.analytics.analyticsMode==="legacy",SP=e=>e.configuration.analytics.analyticsMode==="next",CP=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:o,analyticsType:n,analyticsConfigurator:a,providerClass:u})=>(r??(r=l=>new u(l)),yP(e,async({getState:l,analyticsClientMiddleware:m,preprocessRequest:d,logger:p})=>{let y=[],h={log:async({state:A})=>{for(let C of y)await C(A)}},f=l(),S=a({getState:l,logger:p,analyticsClientMiddleware:m,preprocessRequest:d,provider:r(l)}),R=await t(S,l());h.description=R?.description,y.push(async A=>{hP(A)&&await xP(R,r,A,p,S.coveoAnalyticsClient)});let{emit:P}=cn(f);return y.push(async A=>{if(SP(A)&&n&&o){let C=o(A);await vP(P,n,C)}}),h}));async function xP(e,t,r,o,n){t(()=>r);let a=await e?.log({searchUID:t(()=>r).getSearchUID()});o.info({client:n,response:a},"Analytics response")}var RP=e=>r=>(o,n)=>Promise.resolve({description:{actionCause:e},log:async a=>{r(o,n)}}),Ee=If(Af,e=>e,Fr),kB=If(gf,RP("caseAssist"),qa);var FP={urihash:new T,sourcetype:new T,permanentid:new T},VB={uniqueId:V,raw:new k({values:FP}),title:V,uri:V,clickUri:V,rankingModifier:new T({required:!1,emptyAllowed:!0})};async function vP(e,t,r){await e(t,r)}s();c();s();c();var mn=v("facet/updateFacetAutoSelection",e=>b(e,{allow:new W({required:!0})}));s();c();s();c();var fc=class extends Fr{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let o in r)for(let n in r[o].cache)if(r[o].cache[n].isActive)return r[o].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let o in r)for(let n in r[o].cache)if(r[o].cache[n].isActive)return r[o].cache[n];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??qe().q}get responseTime(){return this.activeInstantResultCache?.duration??et().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??et().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var wf=()=>Ee("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new fc(e)),Ef=()=>({actionCause:"searchboxAsYouType"});s();c();var bl={id:V},IP={...bl,q:Se},dU=v("instantResults/register",e=>b(e,bl)),gc=v("instantResults/updateQuery",e=>b(e,IP)),mU=v("instantResults/clearExpired",e=>b(e,bl));s();c();var yc=new U({required:!0,min:0}),Tf=v("pagination/registerNumberOfResults",e=>b(e,yc)),Of=v("pagination/updateNumberOfResults",e=>b(e,yc)),qf=v("pagination/registerPage",e=>b(e,yc)),pn=v("pagination/updatePage",e=>b(e,yc)),kf=v("pagination/nextPage"),Vf=v("pagination/previousPage");s();c();var It=v("query/updateQuery",e=>b(e,{q:new T,enableQuerySyntax:new W}));s();c();s();c();var fn=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:!0,source:Pt(e)}});var hc=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??nt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&fn(e.configuration.analytics,t,r),...e.excerptLength&&!K(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});s();c();s();c();s();c();var gn=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await lf(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Pl()&&{pageId:Pl()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:Pt(e)}}}};var yn=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??nt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{actionsHistory:bt.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await gn(e.configuration.analytics,t),...e.excerptLength&&!K(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});s();c();s();c();var mo=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Il=()=>Ee("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),vr=e=>Ee("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||qe().q,aq:r.advancedSearchQueries?.aq||mo().aq,cq:r.advancedSearchQueries?.cq||mo().cq,dq:r.advancedSearchQueries?.dq||mo().dq,errorType:e.type,errorMessage:e.message}));s();c();s();c();var Ma=rt(Sc(),1),Qf=rt(Df(),1);s();c();var Cc=rt(Sc(),1),Mf=rt(Nf(),1);Cc.default.extend(Mf.default);var xc="YYYY/MM/DD@HH:mm:ss",wP="1401-01-01";function po(e,t){let r=(0,Cc.default)(e,t);return!r.isValid()&&!t?(0,Cc.default)(e,xc):r}function Na(e){return e.format(xc)}function Lf(e){return Na(po(e))===e}function Rc(e,t){let r=po(e,t);if(!r.isValid()){let o=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?n:o}`)}Vl(r)}function Vl(e){if(e.isBefore(wP))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}Ma.default.extend(Qf.default);var Bf=["past","now","next"],Uf=["minute","hour","day","week","month","quarter","year"],EP=e=>{let t=e==="now";return{amount:new U({required:!t,min:1}),unit:new T({required:!t,constrainTo:Uf}),period:new T({required:!0,constrainTo:Bf})}};function Pr(e){if(typeof e=="string"&&!wt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Dl(e):e;new ne(EP(t.period)).validate(t);let r=_f(t),o=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${o}`);Vl(r)}function jf(e){let{period:t,amount:r,unit:o}=e;switch(t){case"past":case"next":return`${t}-${r}-${o}`;case"now":return t}}function _f(e){let{period:t,amount:r,unit:o}=e;switch(t){case"past":return(0,Ma.default)().subtract(r,o);case"next":return(0,Ma.default)().add(r,o);case"now":return(0,Ma.default)()}}function La(e){return Na(_f(Dl(e)))}function $f(e){return e.toLocaleLowerCase().split("-")}function wt(e){let[t,r,o]=$f(e);if(t==="now")return!0;if(!Bf.includes(t)||!Uf.includes(o))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function zf(e){return!!e&&typeof e=="object"&&"period"in e}function Dl(e){let[t,r,o]=$f(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:o||void 0}}function Wf(e){return Pr(e),Dl(e)}s();c();function Hf(e){return e.type==="dateRange"}function Kf(e){return`start${e}`}function Gf(e){return`end${e}`}var Yf=()=>({dateFacetValueMap:{}});function TP(e,t,r){let o=e.start,n=e.end;return wt(o)&&(o=La(o),r.dateFacetValueMap[t][Kf(o)]=e.start),wt(n)&&(n=La(n),r.dateFacetValueMap[t][Gf(n)]=e.end),{...e,start:o,end:n}}function Jf(e,t){if(Hf(e)){let{facetId:r,currentValues:o}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:o.map(n=>TP(n,r,t))}}return e}function Ar(e){let t=Yf();return{request:{...e,facets:e.facets?.map(o=>Jf(o,t))},mappings:t}}function OP(e,t,r){return{...e,start:r.dateFacetValueMap[t][Kf(e.start)]||e.start,end:r.dateFacetValueMap[t][Gf(e.end)]||e.end}}function qP(e,t){return e.facetId in t.dateFacetValueMap}function kP(e,t){return qP(e,t)?{...e,values:e.values.map(r=>OP(r,e.facetId,t))}:e}function Fc(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(o=>kP(o,t))}}:e}s();c();s();c();s();c();s();c();s();c();s();c();s();c();s();c();var vc=e=>e.success!==void 0,st=e=>e.error!==void 0;s();c();var P_=v("didYouMean/enable"),A_=v("didYouMean/disable"),b_=v("didYouMean/automaticCorrections/disable"),I_=v("didYouMean/automaticCorrections/enable"),hn=v("didYouMean/correction",e=>b(e,V)),w_=v("didYouMean/automaticCorrections/mode",e=>b(e,new T({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));s();c();var Nl=()=>Ee("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic());var Xf=()=>({actionCause:"didYouMeanAutomatic"});s();c();s();c();function Zf(){return{contextValues:{}}}s();c();var Pc=()=>!1;s();c();function eg(){return{contextValues:{}}}s();c();function Ml(){return{enabled:!0,tabs:{}}}function Ac(){return{freezeFacetOrder:!1,facets:{}}}s();c();function Sn(){return[]}s();c();function br(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}s();c();function bc(){return{}}s();c();function tg(){return{}}s();c();function rg(){return{}}function Et(e){return{context:e.context||Zf(),dictionaryFieldContext:e.dictionaryFieldContext||eg(),facetSet:e.facetSet||dn(),numericFacetSet:e.numericFacetSet||ln(),dateFacetSet:e.dateFacetSet||un(),categoryFacetSet:e.categoryFacetSet||mc(),automaticFacetSet:e.automaticFacetSet??dc(),pagination:e.pagination||br(),query:e.query||qe(),tabSet:e.tabSet||rg(),advancedSearchQueries:e.advancedSearchQueries||mo(),staticFilterSet:e.staticFilterSet||tg(),querySet:e.querySet||bc(),sortCriteria:e.sortCriteria||lo(),pipeline:e.pipeline||Al(),searchHub:e.searchHub||sn(),facetOptions:e.facetOptions||Ac(),facetOrder:e.facetOrder??Sn(),debug:e.debug??Pc()}}s();c();var L1=new k({values:{undoneQuery:Se},options:{required:!0}}),og=()=>Ee("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null);s();c();var Ic=v("trigger/query/ignore",e=>b(e,new T({emptyAllowed:!0,required:!0}))),wc=v("trigger/query/modification",e=>b(e,new k({values:{originalQuery:pe,modification:pe}})));s();c();s();c();s();c();function Ir(e){return Object.values(e).map(t=>t.request)}function Ll(e,t){let r={};e.forEach(a=>r[a.facetId]=a);let o=[];t.forEach(a=>{a in r&&(o.push(r[a]),delete r[a])});let n=Object.values(r);return[...o,...n]}function ng(e){return Ir(e).map(t=>{let o=t.currentValues.some(({state:n})=>n!=="idle");return t.generateAutomaticRanges&&!o?{...t,currentValues:[]}:t})}function LP(e){return Ir(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function QP(e){return[...LP(e.facetSet??{}),...ng(e.numericFacetSet??{}),...ng(e.dateFacetSet??{}),...Ir(e.categoryFacetSet??{})]}function BP(e){return QP(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function Ql(e){return Ll(BP(e),e.facetOrder??[])}s();c();var Er=async(e,t)=>{let r=_P(e),o=Ql(e),n=UP(e),a=await yn(e,t),u=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Ar({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...o.length&&{facets:o},...e.pagination&&{numberOfResults:u(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:n}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function UP(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(jP).filter(r=>r.currentValues.length>0):void 0}function jP(e){let{field:t,label:r,values:o}=e,n=o.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:n}}function _P(e){let t=e.advancedSearchQueries?.cq.trim()||"",o=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",n=$P(e);return[t,o,...n].filter(a=>!!a).join(" AND ")}function $P(e){return Object.values(e.staticFilterSet||{}).map(r=>{let o=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),n=o.map(a=>a.expression).join(" OR ");return o.length>1?`(${n})`:n})}var Tr=class{constructor(t,r=o=>{this.dispatch(It({q:o}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},o){let n=new Date().getTime(),a=Fc(await this.extra.apiClient.search(r,o),t),u=new Date().getTime()-n,l=this.getState().query?.q||"";return{response:a,duration:u,queryExecuted:l,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return st(t.response)?(this.dispatch(vr(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),o=this.getSuccessResponse(t);if(!o||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=r.didYouMean,{results:u,queryCorrections:l,queryCorrection:m}=o;if(!n||!a)return null;let d=u.length===0&&l&&l.length!==0,p=!K(m)&&!K(m.correctedQuery);if(!d&&!p)return null;let h=d?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(At(Et(this.getState()))),h}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),o=this.getSuccessResponse(t);if(!o.queryCorrections)return null;let{correctedQuery:n}=o.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(n);return st(a.response)?(this.dispatch(vr(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(At(Et(this.getState()))),{...a,response:{...a.response.success,queryCorrections:o.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:Nl()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:o,originalQuery:n}=r.queryCorrection;return this.onUpdateQueryForCorrection(o),{...t,response:{...r},queryExecuted:o,automaticallyCorrected:!0,originalQuery:n,analyticsAction:Nl()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),o=this.getSuccessResponse(t);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,o),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let o=r.triggers.find(l=>l.type==="query")?.content||"";if(!o)return null;if(this.getState().triggers?.queryModification.queryToIgnore===o)return this.dispatch(Ic("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),u=await this.automaticallyRetryQueryWithTriggerModification(o);return st(u.response)?(this.dispatch(vr(u.response.error)),this.rejectWithValue(u.response.error)):(this.dispatch(At(Et(this.getState()))),{...u,response:{...u.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:og()})}getStateAfterResponse(t,r,o,n){return{...o,query:{q:t,enableQuerySyntax:o.query?.enableQuerySyntax??qe().enableQuerySyntax},search:{...et(),duration:r,response:n,results:n.results}}}processSuccessResponse(t){return this.dispatch(At(Et(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return vc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Er(this.getState()),{origin:"mainSearch"});return this.dispatch(hn(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(wc({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Er(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var X$=J("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{q:new T,enableQuerySyntax:new W,clearFilters:new W}),e.clearFilters&&(r(at()),r(yr())),r(mn({allow:!0})),r(It({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(pn(1))}),Ec=J("search/executeSearch",async(e,t)=>{let r=t.getState();return await qc(r,t,e)}),Tc=J("search/fetchPage",async(e,t)=>{let r=t.getState();return await Ul(r,t,e)}),Oc=J("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await jl(t,r)}),ag=J("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await KP(t,e,r)}),Z$=J("search/fetchInstantResults",async(e,t)=>Bl(e,t)),zP=async(e,t)=>{let r=await Er(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},WP=async(e,t,r)=>{let o=await yn(e);return Ar({...o,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},HP=async(e,t)=>{let r=await Er(e,t);return r.request.numberOfResults=0,r},ig=e=>{e.configuration.analytics.enabled&&bt.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function Bl(e,t){b(e,{id:V,q:V,maxResultsPerQuery:new U({required:!0,min:1}),cacheTimeout:new U});let{q:r,maxResultsPerQuery:o}=e,n=t.getState(),a=new Tr({...t,analyticsAction:wf()},d=>{t.dispatch(gc({q:d,id:e.id}))}),u=await WP(n,r,o),l=await a.fetchFromAPI(u,{origin:"instantResults",disableAbortWarning:!0}),m=await a.process(l);return"response"in m?{results:m.response.results,searchUid:m.response.searchUid,analyticsAction:m.analyticsAction,totalCountFiltered:m.response.totalCountFiltered,duration:m.duration}:m}async function Ul(e,t,r){ig(e);let{analyticsClientMiddleware:o,preprocessRequest:n,logger:a}=t.extra,{description:u}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:n,logger:a}),l=new Tr({...t,analyticsAction:r}),m=await Er(e,u),d=await l.fetchFromAPI(m,{origin:"mainSearch"});return await l.process(d)}async function jl(e,t){let{analyticsClientMiddleware:r,preprocessRequest:o,logger:n}=e.extra,{description:a}=await Il().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:o,logger:n}),u=new Tr({...e,analyticsAction:Il()}),l=await zP(t,a),m=await u.fetchFromAPI(l,{origin:"mainSearch"});return await u.process(m)}async function KP(e,t,r){let{analyticsClientMiddleware:o,preprocessRequest:n,logger:a}=e.extra,{description:u}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:o,preprocessRequest:n,logger:a}),l=new Tr({...e,analyticsAction:t}),m=await HP(r,u),d=await l.fetchFromAPI(m,{origin:"facetValues"});return await l.process(d)}async function qc(e,t,r){ig(e);let{analyticsClientMiddleware:o,preprocessRequest:n,logger:a}=t.extra,{description:u}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:n,logger:a}),l=await Er(e,u),m=new Tr({...t,analyticsAction:r}),d=await m.fetchFromAPI(l,{origin:"mainSearch"});return await m.process(d)}s();c();s();c();var ut=async(e,t,r)=>{let o=tA(e),n=GP(e),a=YP(e),u=e.configuration.analytics.analyticsMode==="legacy"?await yn(e,r):hc(e,t,r),l=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Ar({...u,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...o&&{cq:o},...n.length&&{facets:n},...e.pagination&&{numberOfResults:l(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function GP(e){return Ll(XP(e),e.facetOrder??[])}function YP(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(JP).filter(r=>r.currentValues.length>0):void 0}function JP(e){let{field:t,label:r,values:o}=e,n=o.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:n}}function XP(e){return ZP(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function ZP(e){return[...eA(e.facetSet??{}),...cg(e.numericFacetSet??{}),...cg(e.dateFacetSet??{}),...Ir(e.categoryFacetSet??{})]}function eA(e){return Ir(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function cg(e){return Ir(e).map(t=>{let o=t.currentValues.some(({state:n})=>n!=="idle");return t.generateAutomaticRanges&&!o?{...t,currentValues:[]}:t})}function tA(e){let t=e.advancedSearchQueries?.cq.trim()||"",o=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",n=rA(e);return[t,o,...n].filter(a=>!!a).join(" AND ")}function rA(e){return Object.values(e.staticFilterSet||{}).map(r=>{let o=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),n=o.map(a=>a.expression).join(" OR ");return o.length>1?`(${n})`:n})}var Or=class{constructor(t,r=o=>{this.dispatch(It({q:o}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},o){let n=new Date().getTime(),a=Fc(await this.extra.apiClient.search(r,o),t),u=new Date().getTime()-n,l=this.getState().query?.q||"";return{response:a,duration:u,queryExecuted:l,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return st(t.response)?(this.dispatch(vr(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),o=this.getSuccessResponse(t);if(!o||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=r.didYouMean,{results:u,queryCorrections:l,queryCorrection:m}=o;if(!n||!a)return null;let d=u.length===0&&l&&l.length!==0,p=!K(m)&&!K(m.correctedQuery);if(!d&&!p)return null;let h=d?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(At(Et(this.getState()))),h}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),o=this.getSuccessResponse(t);if(!o.queryCorrections)return null;let{correctedQuery:n}=o.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(n);return st(a.response)?(this.dispatch(vr(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(At(Et(this.getState()))),{...a,response:{...a.response.success,queryCorrections:o.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:o,originalQuery:n}=r.queryCorrection;return this.onUpdateQueryForCorrection(o),{...t,response:{...r},queryExecuted:o,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let o=r.triggers.find(l=>l.type==="query")?.content||"";if(!o)return null;if(this.getState().triggers?.queryModification.queryToIgnore===o)return this.dispatch(Ic("")),null;let a=this.getCurrentQuery(),u=await this.automaticallyRetryQueryWithTriggerModification(o);return st(u.response)?(this.dispatch(vr(u.response.error)),this.rejectWithValue(u.response.error)):(this.dispatch(At(Et(this.getState()))),{...u,response:{...u.response.success},automaticallyCorrected:!1,originalQuery:a})}processSuccessResponse(t){return this.dispatch(At(Et(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return vc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:o}=Xf(),n=await this.fetchFromAPI(await ut(r,this.extra.navigatorContext,{actionCause:o}),{origin:"mainSearch"});return this.dispatch(hn(t)),n}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(wc({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await ut(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var oA=J("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;b(e,{q:new T,enableQuerySyntax:new W,clearFilters:new W}),e.clearFilters&&(r(at()),r(yr())),r(mn({allow:!0})),r(It({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(pn(1))}),ge=J("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return qc(r,t,e.legacy);ug(r);let o=e.next?lg(e.next):void 0,n=await ut(r,t.extra.navigatorContext,o),a=new Or({...t,analyticsAction:o??{}}),u=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(u)}),Zz=J("search/fetchPage",async(e,t)=>{let r=t.getState();if(ug(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Ul(r,t,e.legacy);let o=new Or({...t,analyticsAction:e.next}),n=await ut(r,t.extra.navigatorContext,e.next),a=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(a)}),eW=J("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return jl(t,r);let o=bf("browseResults",t.getState),n=new Or({...t,analyticsAction:o}),a=await nA(r,t.extra.navigatorContext,o),u=await n.fetchFromAPI(a,{origin:"mainSearch"});return await n.process(u)}),sg=J("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return qc(r,t,e.legacy);let o=new Or({...t,analyticsAction:{}}),n=await iA(r,t.extra.navigatorContext),a=await o.fetchFromAPI(n,{origin:"facetValues"});return await o.process(a)}),tW=J("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Bl(e,t);b(e,{id:V,q:V,maxResultsPerQuery:new U({required:!0,min:1}),cacheTimeout:new U});let{q:o,maxResultsPerQuery:n}=e,a=lg(Ef()),u=await aA(r,t.extra.navigatorContext,o,n,a),l=new Or({...t,analyticsAction:a},p=>{t.dispatch(gc({q:p,id:e.id}))}),m=await l.fetchFromAPI(u,{origin:"instantResults",disableAbortWarning:!0}),d=await l.process(m);return"response"in d?{results:d.response.results,searchUid:d.response.searchUid,totalCountFiltered:d.response.totalCountFiltered,duration:d.duration}:d}),nA=async(e,t,r)=>{let o=await ut(e,t,r);return o.request={...o.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},o},aA=async(e,t,r,o,n)=>{let a=hc(e,t,n);return Ar({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:o,q:r})},iA=async(e,t,r)=>{let o=await ut(e,t,r);return o.request.numberOfResults=0,o},ug=e=>{e.configuration.analytics.enabled&&bt.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},lg=e=>({actionCause:e.actionCause,type:e.actionCause});s();c();function Cn(e,t){let{facetId:r,criterion:o}=t,n=e[r]?.request;n&&(n.sortCriteria=o)}function Qa(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function kc(e,t){e&&(e.numberOfValues=t)}s();c();s();c();var Vc=new T({regex:/^[a-zA-Z0-9-_]+$/}),Dc=new T({required:!0}),lW=new ee({each:new T}),dW=new T,mW=new W,Nc=new W,Mc=new U({min:0}),Ba=new U({min:1}),Lc=new W({required:!0}),cA=new k,sA=new T,uA={captions:cA,numberOfValues:Ba,query:sA},pW=new k({values:uA}),dg=new k({options:{required:!1},values:{type:new T({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new ee({required:!0,max:25,each:new T({emptyAllowed:!1,required:!0})})}}),fW=new W,mg=new ee({min:1,max:25,required:!1,each:new T({emptyAllowed:!1,required:!0})});s();c();var Tt={value:V,numberOfResults:new U({min:0}),state:V};var lA={facetId:re,field:new T({required:!0,emptyAllowed:!0}),tabs:new k({options:{required:!1},values:{included:new ee({each:new T}),excluded:new ee({each:new T})}}),activeTab:new T({required:!1}),filterFacetCount:new W({required:!1}),injectionDepth:new U({required:!1,min:0}),numberOfValues:new U({required:!1,min:1}),sortCriteria:new de({required:!1}),resultsMustMatch:new de({required:!1}),allowedValues:dg,customSort:mg},Qc=v("facet/register",e=>b(e,lA)),Bc=v("facet/toggleSelectValue",e=>b(e,{facetId:re,selection:new k({values:Tt})})),Uc=v("facet/toggleExcludeValue",e=>b(e,{facetId:re,selection:new k({values:Tt})})),ze=v("facet/deselectAll",e=>b(e,re)),pg=v("facet/updateSortCriterion",e=>b(e,{facetId:re,criterion:new de({required:!0})})),fg=v("facet/updateNumberOfValues",e=>b(e,{facetId:re,numberOfValues:new U({required:!0,min:1})})),gg=v("facet/updateIsFieldExpanded",e=>b(e,{facetId:re,isFieldExpanded:new W({required:!0})})),yg=v("facet/updateFreezeCurrentValues",e=>b(e,{facetId:re,freezeCurrentValues:new W({required:!0})}));var $W=G(dn(),e=>{e.addCase(Qc,(t,r)=>{let{facetId:o}=r.payload;o in t||(t[o]=Sf(mA(r.payload)))}).addCase(ve.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(Ie,(t,r)=>{let o=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(t).forEach(u=>{let{request:l}=t[u],m=o[u]||[],d=n[u]||[],p=m.length+d.length,y=l.currentValues.filter(h=>!m.includes(h.value)&&!d.includes(h.value));l.currentValues=[...m.map(Sg),...d.map(Cg),...y.map(pA)],l.preventAutoSelect=p>0,l.numberOfValues=Math.max(p,l.numberOfValues)})}).addCase(Bc,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a)return;a.preventAutoSelect=!0;let u=a.currentValues.find(m=>m.value===n.value);if(!u){jc(a,n);return}let l=u.state==="selected";u.state=l?"idle":"selected",a.freezeCurrentValues=!0}).addCase(Uc,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a)return;a.preventAutoSelect=!0;let u=a.currentValues.find(m=>m.value===n.value);if(!u){jc(a,n);return}let l=u.state==="excluded";u.state=l?"idle":"excluded",a.freezeCurrentValues=!0}).addCase(yg,(t,r)=>{let{facetId:o,freezeCurrentValues:n}=r.payload,a=t[o]?.request;a&&(a.freezeCurrentValues=n)}).addCase(ze,(t,r)=>{Qa(t[r.payload]?.request)}).addCase(at,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Qa(r))}).addCase(yr,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Qa(r))}).addCase(mn,(t,r)=>Object.values(t).forEach(o=>{o.request.preventAutoSelect=!r.payload.allow})).addCase(pg,(t,r)=>{Cn(t,r.payload)}).addCase(fg,(t,r)=>{let{facetId:o,numberOfValues:n}=r.payload;kc(t[o]?.request,n)}).addCase(gg,(t,r)=>{let{facetId:o,isFieldExpanded:n}=r.payload,a=t[o]?.request;a&&(a.isFieldExpanded=n)}).addCase(ge.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>hg(t[n.facetId]?.request,n))}).addCase(sg.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>hg(t[n.facetId]?.request,n))}).addCase(Yt,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!a)return;let{rawValue:u}=n,{currentValues:l}=a,m=l.find(p=>p.value===u);if(m){m.state="selected";return}let d=Sg(u);jc(a,d),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Jt,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!a)return;let{rawValue:u}=n,{currentValues:l}=a,m=l.find(p=>p.value===u);if(m){m.state="excluded";return}let d=Cg(u);jc(a,d),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Zt,(t,r)=>{if(!(r.payload in t))return;let{request:o}=t[r.payload];Qa(o)})});function jc(e,t){let{currentValues:r}=e,o=r.findIndex(l=>l.state==="idle"),n=o===-1?r.length:o,a=r.slice(0,n),u=r.slice(n+1);e.currentValues=[...a,t,...u],e.numberOfValues=e.currentValues.length}function hg(e,t){e&&(e.currentValues=t.values.map(_l),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var dA={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function mA(e){return{...dA,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function _l(e){let{value:t,state:r}=e;return{value:t,state:r}}function Sg(e){return{value:e,state:"selected"}}function Cg(e){return{value:e,state:"excluded"}}function pA(e){return{...e,state:"idle"}}s();c();s();c();var $c={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function zc(e,t){let{request:r}=t,{facetId:o}=r;if(o in e)return;let n=xg(r);r.numberOfValues=n,e[o]=t}function Wc(e,t,r){let o=e[t]?.request;o&&(o.currentValues=r,o.numberOfValues=xg(o))}function Hc(e,t,r){let o=e[t]?.request;if(!o)return;let n=_c(o.currentValues,r);if(!n)return;let a=n.state==="selected";n.state=a?"idle":"selected",o.preventAutoSelect=!0}function Kc(e,t,r){let o=e[t]?.request;if(!o)return;let n=_c(o.currentValues,r);if(!n)return;let a=n.state==="excluded";n.state=a?"idle":"excluded",o.preventAutoSelect=!0}function qr(e,t){let r=e[t]?.request;r&&r.currentValues.forEach(o=>o.state="idle")}function Gc(e,t){Object.entries(e).forEach(([r,{request:o}])=>{let n=t[r]||[];o.currentValues.forEach(l=>{let m=!!_c(n,l);return l.state=m?"selected":"idle",l});let a=n.filter(l=>!_c(o.currentValues,l)),u=o.currentValues;u.push(...a),o.numberOfValues=Math.max(o.numberOfValues,u.length)})}function Yc(e,t,r){t.forEach(o=>{let n=o.facetId,a=e[n]?.request;if(!a)return;let u=r(o.values);a.currentValues=u,a.preventAutoSelect=!1})}function _c(e,t){let{start:r,end:o}=t;return e.find(n=>n.start===r&&n.end===o)}function Ua(e,t){let{start:r,end:o,endInclusive:n}=t;return e.find(a=>a.start===r&&a.end===o&&a.endInclusive===n)}function xg(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:o}=e;return t?Math.max(o,r.length):r.length}s();c();s();c();function nr(e){let t=Rg(e.start,e),r=Rg(e.end,e),o=e.endInclusive??!1,n=e.state??"idle";return{start:t,end:r,endInclusive:o,state:n}}function Rg(e,t){let{dateFormat:r}=t;return zf(e)?(Pr(e),jf(e)):typeof e=="string"&&wt(e)?(Pr(e),e):(Rc(e,r),Na(po(e,r)))}s();c();var ja=v("rangeFacet/updateSortCriterion",e=>b(e,{facetId:re,criterion:new de({required:!0})}));s();c();var fo={state:V,start:new U({required:!0}),end:new U({required:!0}),endInclusive:new W({required:!0}),numberOfResults:new U({required:!0,min:0})},ht={start:V,end:V,endInclusive:new W({required:!0}),state:V,numberOfResults:new U({required:!0,min:0})},$l=e=>({facetId:re,selection:typeof e.start=="string"?new k({values:ht}):new k({values:fo})});var fA={start:V,end:V,endInclusive:new W({required:!0}),state:V},gA={facetId:re,field:V,tabs:new k({options:{required:!1},values:{included:new ee({each:new T}),excluded:new ee({each:new T})}}),activeTab:new T({required:!1}),currentValues:new ee({required:!1,each:new k({values:fA})}),generateAutomaticRanges:new W({required:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new U({required:!1,min:0}),numberOfValues:new U({required:!1,min:1}),sortCriteria:new de({required:!1}),rangeAlgorithm:new de({required:!1})};function Fg(e){return wt(e)?La(e):e}function _a(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:o}=nr(t);if(po(Fg(r)).isAfter(po(Fg(o))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var $a=v("dateFacet/register",e=>{try{return xe(e,gA),_a(e),{payload:e,error:null}}catch(t){return{payload:e,error:Me(t)}}}),xn=v("dateFacet/toggleSelectValue",e=>b(e,{facetId:re,selection:new k({values:ht})})),Rn=v("dateFacet/toggleExcludeValue",e=>b(e,{facetId:re,selection:new k({values:ht})})),Jc=v("dateFacet/updateFacetValues",e=>{try{return xe(e,{facetId:re,values:new ee({each:new k({values:ht})})}),_a({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Me(t)}}}),vg=ja,Pg=ze;var yA=G(un(),e=>{e.addCase($a,(t,r)=>{let{payload:o}=r,n=hA(o);zc(t,yf(n))}).addCase(ve.fulfilled,(t,r)=>r.payload?.dateFacetSet??t).addCase(Ie,(t,r)=>{let o=r.payload.df||{};Gc(t,o)}).addCase(xn,(t,r)=>{let{facetId:o,selection:n}=r.payload;Hc(t,o,n)}).addCase(Rn,(t,r)=>{let{facetId:o,selection:n}=r.payload;Kc(t,o,n)}).addCase(Jc,(t,r)=>{let{facetId:o,values:n}=r.payload;Wc(t,o,n)}).addCase(Pg,(t,r)=>{qr(t,r.payload)}).addCase(at,t=>{Object.keys(t).forEach(r=>{qr(t,r)})}).addCase(vg,(t,r)=>{Cn(t,r.payload)}).addCase(ge.fulfilled,(t,r)=>{let o=r.payload.response.facets;Yc(t,o,Xc)}).addCase(Zt,(t,r)=>{qr(t,r.payload)})});function hA(e){return{...$c,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function Xc(e){return e.map(t=>{let{numberOfResults:r,...o}=t;return o})}s();c();s();c();var SA={state:V,start:new U({required:!0}),end:new U({required:!0}),endInclusive:new W({required:!0})},CA={facetId:re,field:V,tabs:new k({options:{required:!1},values:{included:new ee({each:new T}),excluded:new ee({each:new T})}}),activeTab:new T({required:!1}),currentValues:new ee({required:!1,each:new k({values:SA})}),generateAutomaticRanges:new W({required:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new U({required:!1,min:0}),numberOfValues:new U({required:!1,min:1}),sortCriteria:new de({required:!1}),rangeAlgorithm:new de({required:!1})};function za(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Wa=v("numericFacet/register",e=>{try{return b(e,CA),za(e),{payload:e,error:null}}catch(t){return{payload:e,error:Me(t)}}}),Fn=v("numericFacet/toggleSelectValue",e=>b(e,{facetId:re,selection:new k({values:fo})})),vn=v("numericFacet/toggleExcludeValue",e=>b(e,{facetId:re,selection:new k({values:fo})})),Zc=v("numericFacet/updateFacetValues",e=>{try{return xe(e,{facetId:re,values:new ee({each:new k({values:fo})})}),za({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Me(t)}}}),Ag=ja,bg=ze;var Ig=G(ln(),e=>{e.addCase(Wa,(t,r)=>{let{payload:o}=r,n=xA(o);zc(t,hf(n))}).addCase(ve.fulfilled,(t,r)=>r.payload?.numericFacetSet??t).addCase(Ie,(t,r)=>{let o=r.payload.nf||{};Gc(t,o)}).addCase(Fn,(t,r)=>{let{facetId:o,selection:n}=r.payload;Hc(t,o,n)}).addCase(vn,(t,r)=>{let{facetId:o,selection:n}=r.payload;Kc(t,o,n)}).addCase(Zc,(t,r)=>{let{facetId:o,values:n}=r.payload;Wc(t,o,n)}).addCase(bg,(t,r)=>{qr(t,r.payload)}).addCase(at,t=>{Object.keys(t).forEach(r=>{qr(t,r)})}).addCase(Ag,(t,r)=>{Cn(t,r.payload)}).addCase(ge.fulfilled,(t,r)=>{let o=r.payload.response.facets;Yc(t,o,zl)}).addCase(Zt,(t,r)=>{qr(t,r.payload)})});function xA(e){return{...$c,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function zl(e){return e.map(t=>{let{numberOfResults:r,...o}=t;return o})}s();c();s();c();var Pn={f:new k,lf:new k,cf:new k,nf:new k,mnf:new k,df:new k,sortCriteria:new k,page:new U({min:0}),perPage:new U({min:1})};var We=v("commerce/productListingParameters/restore",e=>b(e,Pn));s();c();var he=J("commerce/productListing/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{let a=t(),u=await o.getProductListing(Ze(a,n));return Te(u)?r(u.error):{response:u.success}}),kr=J("commerce/productListing/fetchMoreProducts",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{let a=t();if(!Vm(a))return null;let l=mr(a),d=la(a)/l,p=await o.getProductListing({...Ze(a,n),page:d});return Te(p)?r(p.error):{response:p.success}}),RA={child:new k({options:{required:!0},values:{permanentid:new T({required:!0})}})},An=v("commerce/productListing/promoteChildToParent",e=>b(e,RA));s();c();var Vr=v("commerce/querySuggest/clear",e=>b(e,{id:V})),ke=J("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,validatePayload:n,navigatorContext:a}})=>{n(e,{id:V});let u=t(),l=FA(e.id,u,a),m=await o.querySuggest(l);return Te(m)?r(m.error):{id:e.id,query:l.query,...m.success}}),bn=v("commerce/querySuggest/register",e=>b(e,{id:V,count:new U({min:0})})),Ot=v("commerce/querySuggest/selectSuggestion",e=>b(e,{id:V,expression:Se})),FA=(e,t,r)=>{let{view:o,...n}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.commerce.apiBaseUrl??ko(t.configuration.organizationId,t.configuration.environment),organizationId:t.configuration.organizationId,trackingId:t.configuration.analytics.trackingId,query:t.querySet[e],...n,...t.configuration.analytics.enabled?{clientId:r.clientId}:{},context:{user:{...location,...r.userAgent?{userAgent:r.userAgent}:{}},view:{...o,...r.referrer?{referrer:r.referrer}:{}},capture:t.configuration.analytics.enabled,cart:zi(t.cart),source:Pt(t.configuration.analytics)}}};s();c();s();c();var es={q:new T,...Pn};var Pe=v("commerce/searchParameters/restore",e=>b(e,es));s();c();var go=v("commerce/facets/categoryFacet/updateNumberOfValues",e=>b(e,{facetId:V,numberOfValues:new U({required:!1,min:1})})),Dr=v("commerce/facets/categoryFacet/toggleSelectValue",e=>{try{return xe(e.facetId,V),Pa(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Me(t)}}});s();c();var qt=v("commerce/facets/dateFacet/toggleSelectValue",e=>b(e,{facetId:V,selection:new k({values:ht})})),kt=v("commerce/facets/dateFacet/toggleExcludeValue",e=>b(e,{facetId:V,selection:new k({values:ht})})),In=v("commerce/facets/dateFacet/updateValues",e=>{try{return xe(e,{facetId:V,values:new ee({each:new k({values:ht})})}),_a({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Me(t)}}});s();c();s();c();var wg=(e,t,r,o)=>{let a=`*${t.categoryFacetSearchSet[e].options.query}*`,u=t.commerceFacetSet[Ha(e)]?.request,l=u&&vA(u)?u&&PA(u):[],m=l.length?[l]:[],d=t.commerceQuery?.query,{url:p,accessToken:y,organizationId:h,trackingId:f,language:S,country:R,currency:P,clientId:A,context:C,...x}=Ze(t,o);return{url:p,accessToken:y,organizationId:h,facetId:Ha(e),facetQuery:a,ignorePaths:m,trackingId:f,language:S,country:R,currency:P,clientId:A,context:C,query:d,...!r&&{...x,query:""}}};function vA(e){return e.type==="hierarchical"}var PA=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};s();c();var Eg=(e,t,r,o)=>{let a=`*${t.facetSearchSet[e].options.query}*`,u=t.commerceQuery?.query,{url:l,accessToken:m,organizationId:d,trackingId:p,language:y,country:h,currency:f,clientId:S,context:R,...P}=Ze(t,o);return{url:l,accessToken:m,organizationId:d,facetId:Ha(e),facetQuery:a,trackingId:p,language:y,country:h,currency:f,clientId:S,context:R,query:u,...!r&&{...P,query:""}}};var Tg=e=>async({facetId:t,facetSearchType:r},{getState:o,extra:{validatePayload:n,navigatorContext:a,apiClient:u}})=>{let l=o();n(t,V);let m=AA(l,t)||bA(l,t)?Eg(t,l,e,a):wg(t,l,e,a),d=await u.facetSearch(m,r);return{facetId:t,response:d}},lt=J("commerce/facetSearch/executeSearch",Tg(!1)),He=J("commerce/facetSearch/facetFieldSuggest",Tg(!0)),AA=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,bA=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1,ts="field_suggestion:";function Ha(e){return e.startsWith(ts)?e.slice(ts.length):e}function Qe(e){return e.startsWith(ts)?e:`${ts}${e}`}s();c();var Vt=v("commerce/facets/locationFacet/toggleSelectValue",e=>b(e,{facetId:V,selection:new k({values:Tt})}));s();c();var dt=v("commerce/facets/numericFacet/toggleSelectValue",e=>b(e,{facetId:V,selection:new k({values:os})})),mt=v("commerce/facets/numericFacet/toggleExcludeValue",e=>b(e,{facetId:V,selection:new k({values:os})})),rs=v("commerce/facets/numericFacet/updateValues",e=>{try{return xe(e,{facetId:V,values:new ee({each:new k({values:os})})}),za({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Me(t)}}}),wn=v("commerce/facets/numericFacet/updateManualRange",e=>xe(e,{facetId:V,...os})),os={state:new T({required:!0,constrainTo:["idle","selected","excluded"]}),start:new U({required:!0}),end:new U({required:!0}),endInclusive:new W({required:!0})};s();c();var Dt=v("commerce/facets/regularFacet/toggleExcludeValue",e=>b(e,{facetId:V,selection:new k({values:Tt})})),Nt=v("commerce/facets/regularFacet/toggleSelectValue",e=>b(e,{facetId:V,selection:new k({values:Tt})}));s();c();function Og(e,t){let{facetId:r,numberOfValues:o}=t,n=e[r]?.request.values[0];if(n){for(;n.children.length&&n?.state!=="selected";)n=n.children[0];n.retrieveCount=o}}s();c();function Hl(e,t){for(let r of Object.keys(e))delete e[r];t.payload.f&&qg(e,t.payload.f,"regular"),t.payload.lf&&qg(e,t.payload.lf,"location"),t.payload.nf&&Wl(e,t.payload.nf,"numericalRange"),t.payload.mnf&&Wl(e,t.payload.mnf,"numericalRange"),t.payload.df&&Wl(e,t.payload.df,"dateRange"),t.payload.cf&&IA(e,t.payload.cf)}function qg(e,t,r){let o=Object.entries(t);for(let[n,a]of o)e[n]={request:{...Kl(n),type:r,values:a.map(u=>{let l={...kg(),value:u};switch(r){case"regular":return l;case"location":return l}})}}}function Wl(e,t,r){let o=Object.entries(t);for(let[n,a]of o)e[n]={request:{...Kl(n),type:r,values:a.map(u=>{let l={start:u.start,end:u.end,endInclusive:u.endInclusive,...kg()};switch(r){case"dateRange":return l;case"numericalRange":return l}})}}}function IA(e,t){let r=Object.entries(t);for(let[o,n]of r)e[o]={request:{...Kl(o),type:"hierarchical",values:[],delimitingCharacter:"|"}},Gl(e[o].request,n,10)}function Kl(e){return{facetId:e,field:e,isFieldExpanded:!1,preventAutoSelect:!1,initialNumberOfValues:10}}function kg(){return{state:"selected",isAutoSelected:!1,isSuggested:!1,numberOfResults:10,moreValuesAvailable:!0}}function Vg(e){return{state:"selected",value:e}}function Gl(e,t,r){e.values=wA(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function wA(e,t){if(!e.length)return[];let r=Ka(e[0],t),o=r;for(let n of e.splice(1)){let a=Ka(n,t);o.children.push(a),o=a}return o.state="selected",[r]}function Ka(e,t){return{children:[],state:"idle",value:e,retrieveCount:t}}s();c();function Dg(){return{}}var me=G(Dg(),e=>{e.addCase(he.fulfilled,Ng).addCase(ie.fulfilled,Ng).addCase(He.fulfilled,(t,r)=>Mg(t,Qe(r.payload.facetId))).addCase(ke.fulfilled,(t,r)=>{if(r.payload.fieldSuggestionsFacets)for(let{facetId:o}of r.payload.fieldSuggestionsFacets)Mg(t,Qe(o))}).addCase(Nt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!ns(a))return;a.preventAutoSelect=!0;let u=a.values.find(l=>l.value===n.value);if(!u){ir(a,n);return}ar(u,"select"),a.freezeCurrentValues=!0}).addCase(Vt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!EA(a))return;let u=a.values.find(l=>l.value===n.value);if(!u){ir(a,n);return}ar(u,"select")}).addCase(dt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Yl(a))return;a.preventAutoSelect=!0;let u=Ua(a.values,n);if(!u){ir(a,n);return}if(ar(u,"select"),a.interval==="continuous"&&u.state==="idle"){a.values=[];return}}).addCase(qt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Jl(a))return;a.preventAutoSelect=!0;let u=Ua(a.values,n);if(!u){ir(a,n);return}ar(u,"select")}).addCase(Dr,(t,r)=>{let{facetId:o,selection:n,retrieveCount:a}=r.payload,u=t[o]?.request;if(!u||!Xl(u))return;let{path:l}=n,m=l.slice(0,l.length-1),d=TA(u,m,a);if(d.length){let y=d[0];y.state="selected",y.children=[];return}let p=Ka(n.value,a);p.state="selected",d.push(p),u.numberOfValues=1}).addCase(Dt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!ns(a))return;a.preventAutoSelect=!0;let u=a.values.find(l=>l.value===n.value);if(!u){ir(a,n);return}ar(u,"exclude"),a.freezeCurrentValues=!0}).addCase(mt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Yl(a))return;a.preventAutoSelect=!0;let u=Ua(a.values,n);if(!u){ir(a,n);return}if(ar(u,"exclude"),a.interval==="continuous"&&u.state==="idle"){a.values=[];return}}).addCase(kt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Jl(a))return;a.preventAutoSelect=!0;let u=Ua(a.values,n);if(!u){ir(a,n);return}ar(u,"exclude")}).addCase(go,(t,r)=>{let{facetId:o,numberOfValues:n}=r.payload,a=t[o]?.request;if(a){if(!a.values.length)return kc(a,n);Og(t,r.payload)}}).addCase(Yt,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!a||!ns(a))return;let{rawValue:u}=n;a.freezeCurrentValues=!0,a.preventAutoSelect=!0;let l=a.values.find(m=>m.value===u);if(!l){ir(a,Vg(u));return}ar(l,"select")}).addCase(Jt,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!a||!ns(a))return;let{rawValue:u}=n;a.freezeCurrentValues=!0,a.preventAutoSelect=!0;let l=a.values.find(m=>m.value===u);if(!l){ir(a,{state:"excluded",value:u});return}ar(l,"exclude")}).addCase(en,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o];if(!a||!Xl(a?.request))return;let u=[...n.path,n.rawValue];Gl(a.request,u,a.request.initialNumberOfValues)}).addCase(rs,(t,r)=>{let{facetId:o,values:n}=r.payload,a=t[o]?.request;!a||!Yl(a)||(a.values=n,a.numberOfValues=n.length)}).addCase(In,(t,r)=>{let{facetId:o,values:n}=r.payload,a=t[o]?.request;!a||!Jl(a)||(a.values=Xc(n),a.numberOfValues=n.length)}).addCase(ao,(t,r)=>{let{facetId:o,numberOfValues:n}=r.payload,a=t[o]?.request;a&&(a.numberOfValues=n)}).addCase(io,(t,r)=>{let{facetId:o,isFieldExpanded:n}=r.payload,a=t[o]?.request;a&&(a.isFieldExpanded=n)}).addCase($o,(t,r)=>Object.values(t).forEach(o=>{o.request.preventAutoSelect=!r.payload.allow})).addCase(co,(t,r)=>{let{facetId:o,freezeCurrentValues:n}=r.payload,a=t[o]?.request;a&&(a.freezeCurrentValues=n)}).addCase($e,(t,r)=>{let{facetId:o}=r.payload,n=t[o]?.request;n&&Zl(n)}).addCase(wn,(t,r)=>{let{facetId:o}=r.payload,n=t[o]?.request;n&&Zl(n)}).addCase(_e,VA).addCase(ye,Lg).addCase(Ce,Lg).addCase(Pe,Hl).addCase(We,Hl)});function ns(e){return e.type==="regular"}function EA(e){return e.type==="location"}function Yl(e){return e.type==="numericalRange"}function Jl(e){return e.type==="dateRange"}function Xl(e){return e.type==="hierarchical"}function Ng(e,t){let r=new Set(Object.keys(e)),o=t.payload.response.facets;for(let n of o)OA(e,n,r);for(let n of r)delete e[n]}function Mg(e,t){let r=e[t]?.request;r||(e[t]={request:{}},r=e[t].request,r.initialNumberOfValues=10,r.values=[])}function Zl(e){e.type==="hierarchical"?(e.numberOfValues=e.initialNumberOfValues,e.values=[],e.preventAutoSelect=!0):e.values.forEach(t=>t.state="idle")}function TA(e,t,r){let o=e.values;for(let n of t){let a=o[0];(!a||n!==a.value)&&(a=Ka(n,r),o.length=0,o.push(a)),a.state="idle",o=a.children}return o}function ar(e,t){switch(e.state){case"idle":e.state=t==="exclude"?"excluded":"selected";break;case"excluded":e.state=t==="exclude"?"idle":"selected";break;case"selected":e.state=t==="exclude"?"excluded":"idle";break;default:break}}function OA(e,t,r){let o=t.facetId??t.field,n=e[o]?.request;n?r.delete(o):(e[o]={request:{}},n=e[o].request,n.initialNumberOfValues=t.numberOfValues),n.facetId=o,n.displayName=t.displayName,n.numberOfValues=t.numberOfValues,n.field=t.field,n.type=t.type,n.values=qA(t)??[],n.freezeCurrentValues=!1,n.preventAutoSelect=!1,t.type==="hierarchical"&&Xl(n)?n.delimitingCharacter=t.delimitingCharacter:t.type==="numericalRange"&&(n.interval=t.interval,t.domain&&(n.domain={min:t.domain.min,max:t.domain.max,increment:t.domain.increment}))}function qA(e){switch(e.type){case"numericalRange":return zl(e.values);case"dateRange":return Xc(e.values);case"hierarchical":return e.values.every(t=>t.state==="idle"&&t.children.length===0)?[]:e.values.map(Qg);case"regular":return e.values.map(_l);case"location":return e.values.map(kA);default:return}}function Qg(e){let t=e.children.every(n=>n.state==="idle"&&n.children.length===0)?[]:e.children.map(Qg),{state:r,value:o}=e;return{children:t,state:r,value:o,retrieveCount:Zo}}function kA(e){let{value:t,state:r}=e;return{value:t,state:r}}function ir(e,t){let{values:r}=e,o=r.findIndex(l=>l.state==="idle"),n=o===-1?r.length:o,a=r.slice(0,n),u=r.slice(n+1);e.values=[...a,t,...u],e.numberOfValues=e.values.length}function VA(e){Object.values(e).forEach(t=>Zl(t.request))}function Lg(e){Object.values(e).forEach(t=>{t.request.values=[]})}s();c();s();c();function Bg(){return[]}var Nr=G(Bg(),e=>{e.addCase(ke.fulfilled,(t,r)=>r.payload.fieldSuggestionsFacets??[])});s();c();s();c();function Ug(){return{}}var is=G(Ug(),e=>e.addCase(wn,(t,r)=>{let{facetId:o,...n}=r.payload;t[o]={manualRange:n}}).addCase(mt,(t,r)=>{as(t,r.payload.facetId)}).addCase(dt,(t,r)=>{as(t,r.payload.facetId)}).addCase($e,(t,r)=>{as(t,r.payload.facetId)}).addCase(Pe,(t,r)=>{jg(t,r.payload.mnf)}).addCase(We,(t,r)=>{jg(t,r.payload.mnf)}).addCase(_e,t=>{for(let r of Object.keys(t))as(t,r)})),as=(e,t)=>{e[t]&&(e[t]={manualRange:void 0})},jg=(e,t)=>{for(let r of Object.keys(e))delete e[r];t&&Object.entries(t).forEach(([r,o])=>{let n=o[0];e[r]={manualRange:n}})};s();c();s();c();s();c();var Ga=j((e,t)=>e.recommendations&&e.recommendations[t]?.products.length||0,e=>e),_g=j((e,t)=>({total:wi(e,t),current:Ga(e,t)}),({current:e,total:t})=>e<t),$g=j((e,t)=>e.recommendations?e.recommendations[t]?.isLoading:!1,e=>K(e)?!1:e);s();c();var cs={slotId:V,productId:new T({required:!1,emptyAllowed:!1})},zg=new ne(cs);var Wg=(e,t,r,o)=>{let n=Fa(t,r,e);return{...n,context:{...n.context,...o?{product:{productId:o}}:{},purchased:Ip(t.cart)},slotId:e}},St=J("commerce/recommendations/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{let{slotId:a,productId:u}=e,l=Wg(a,t(),n,u),m=await o.getRecommendations(l);return Te(m)?r(m.error):{response:m.success}}),Mr=J("commerce/recommendations/fetchMore",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{let a=e.slotId,u=t();if(_g(u,a))return null;let m=Ii(u,a),p=Ga(u,a)/m,y={...Wg(a,u,n),page:p},h=await o.getRecommendations(y);return Te(h)?r(h.error):{response:h.success}}),En=v("commerce/recommendations/registerSlot",e=>b(e,cs)),DA={child:new k({options:{required:!0},values:{permanentid:new T({required:!0})}}),...cs},Tn=v("commerce/recommendations/promoteChildToParent",e=>b(e,DA));s();c();var cr=v("commerce/sort/apply",e=>b(e,{by:new ft({enum:ot,required:!0})}));var Mt=G(Mm(),e=>{e.addCase(zo,(t,r)=>{let o=ss(t,r.payload?.slotId);o&&o.page<o.totalPages-1&&++o.page}).addCase(Wo,(t,r)=>{let o=ss(t,r.payload?.slotId);o&&o.page>0&&--o.page}).addCase(hr,(t,r)=>{let o=ss(t,r.payload.slotId);o&&r.payload.page>=0&&r.payload.page<o.totalPages&&(o.page=r.payload.page)}).addCase(so,(t,r)=>{let o=ss(t,r.payload.slotId);o&&(o.perPage=r.payload.pageSize)}).addCase(he.fulfilled,(t,r)=>{t.principal=r.payload.response.pagination}).addCase(ie.fulfilled,(t,r)=>{t.principal=r.payload.response.pagination}).addCase(St.fulfilled,(t,r)=>{t.recommendations[r.meta.arg.slotId]=r.payload.response.pagination}).addCase(Ho,(t,r)=>{let o=r.payload.slotId;o in t.recommendations||(t.recommendations[o]=Kt())}).addCase(_e,tt).addCase($e,tt).addCase(Nt,tt).addCase(Dt,tt).addCase(Vt,tt).addCase(dt,tt).addCase(mt,tt).addCase(qt,tt).addCase(kt,tt).addCase(Dr,tt).addCase(cr,tt).addCase(ye,tt).addCase(Ce,tt).addCase(Pe,Hg).addCase(We,Hg)});function ss(e,t){return t?e.recommendations[t]:e.principal}function tt(e){e.principal.page=Kt().page}function Hg(e,t){t.payload.page&&(e.principal.page=t.payload.page),t.payload.perPage&&(e.principal.perPage=t.payload.perPage)}s();c();s();c();var us=()=>({error:null,isLoading:!1,requestId:"",responseId:"",facets:[],products:[]});var On=G(us(),e=>{e.addCase(he.rejected,(t,r)=>{Kg(t,r.payload)}).addCase(kr.rejected,(t,r)=>{Kg(t,r.payload)}).addCase(he.fulfilled,(t,r)=>{let o=Jg(r.payload);Gg(t,r.payload.response),t.products=r.payload.response.products.map((n,a)=>Xg(n,o+a+1))}).addCase(kr.fulfilled,(t,r)=>{if(!r.payload)return;let o=Jg(r.payload);Gg(t,r.payload.response),t.products=t.products.concat(r.payload.response.products.map((n,a)=>Xg(n,o+a+1)))}).addCase(he.pending,(t,r)=>{Yg(t,r.meta.requestId)}).addCase(kr.pending,(t,r)=>{Yg(t,r.meta.requestId)}).addCase(An,(t,r)=>{let{products:o}=t,n,a=o.findIndex(p=>(n=p.children.find(y=>y.permanentid===r.payload.child.permanentid),!!n));if(a===-1||n===void 0)return;let u=o[a].position,{children:l,totalNumberOfChildren:m}=o[a],d={...n,children:l,totalNumberOfChildren:m,position:u};o.splice(a,1,d)}).addCase(Ce,()=>us()).addCase(ye,()=>us())});function Kg(e,t){e.error=t||null,e.isLoading=!1}function Gg(e,t){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1}function Yg(e,t){e.isLoading=!0,e.requestId=t}function Jg(e){let t=e.response.pagination;return t.page*t.perPage}function Xg(e,t){let r=e.children.some(u=>u.permanentid===e.permanentid);if(e.children.length===0||r)return{...e,position:t};let{children:o,totalNumberOfChildren:n,...a}=e;return{...e,children:[a,...o],position:t}}s();c();var Ke=G(pa(),e=>{e.addCase(it,(t,r)=>({...t,...r.payload})).addCase(Pe,(t,r)=>{t.query=r.payload.q??""}).addCase(Ot,(t,r)=>{t.query=r.payload.expression})});s();c();s();c();var Zg=()=>({}),ey=()=>({headline:"",error:null,isLoading:!1,responseId:"",products:[]});var qn=G(Zg(),e=>{e.addCase(En,(t,r)=>{let o=r.payload.slotId;o in t||(t[o]=NA())}).addCase(St.rejected,(t,r)=>{ty(t,r.meta.arg.slotId,r.payload)}).addCase(Mr.rejected,(t,r)=>{ty(t,r.meta.arg.slotId,r.payload)}).addCase(St.fulfilled,(t,r)=>{let o=r.meta.arg.slotId,n=r.payload.response;ry(t,o,n);let a=t[o];if(!a)return;let u=ny(r.payload);a.products=n.products.map((l,m)=>ay(l,u+m+1))}).addCase(Mr.fulfilled,(t,r)=>{if(!r.payload)return;let o=r.meta.arg.slotId,n=r.payload.response;ry(t,o,n);let a=t[o];if(!a)return;let u=ny(r.payload);a.products=a.products.concat(n.products.map((l,m)=>ay(l,u+m+1)))}).addCase(St.pending,(t,r)=>{oy(t,r.meta.arg.slotId)}).addCase(Mr.pending,(t,r)=>{oy(t,r.meta.arg.slotId)}).addCase(Tn,(t,r)=>{let o=t[r.payload.slotId];if(!o)return;let{products:n}=o,a,u=n.findIndex(y=>(a=y.children.find(h=>h.permanentid===r.payload.child.permanentid),!!a));if(u===-1||a===void 0)return;let l=n[u].position,{children:m,totalNumberOfChildren:d}=n[u],p={...a,children:m,totalNumberOfChildren:d,position:l};n.splice(u,1,p)})});function NA(e){return{...ey(),...e}}function ty(e,t,r){let o=e[t];o&&(o.error=r??null,o.isLoading=!1)}function ry(e,t,r){let o=e[t];o&&(o.error=null,o.headline=r.headline,o.responseId=r.responseId,o.isLoading=!1)}function oy(e,t){let r=e[t];r&&(r.isLoading=!0)}function ny(e){let t=e.response.pagination;return t.page*t.perPage}function ay(e,t){let r=e.children.some(u=>u.permanentid===e.permanentid);if(e.children.length===0||r)return{...e,position:t};let{children:o,totalNumberOfChildren:n,...a}=e;return{...e,children:[a,...o],position:t}}s();c();s();c();var ls=()=>({error:null,isLoading:!1,requestId:"",responseId:"",products:[],facets:[],queryExecuted:""});var Lt=G(ls(),e=>{e.addCase(ie.rejected,(t,r)=>{iy(t,r.payload)}).addCase(Cr.rejected,(t,r)=>{iy(t,r.payload)}).addCase(ie.fulfilled,(t,r)=>{let o=uy(r.payload);sy(t,r.payload.response,r.payload.queryExecuted),t.products=r.payload.response.products.map((n,a)=>ly(n,o+a+1))}).addCase(Cr.fulfilled,(t,r)=>{if(!r.payload)return;let o=uy(r.payload);sy(t,r.payload.response,r.payload.queryExecuted),t.products=t.products.concat(r.payload.response.products.map((n,a)=>ly(n,o+a+1)))}).addCase(ie.pending,(t,r)=>{cy(t,r.meta.requestId)}).addCase(Cr.pending,(t,r)=>{cy(t,r.meta.requestId)}).addCase(Jo,(t,r)=>{let{products:o}=t,n,a=o.findIndex(p=>(n=p.children.find(y=>y.permanentid===r.payload.child.permanentid),!!n));if(a===-1||n===void 0)return;let u=o[a].position,{children:l,totalNumberOfChildren:m}=o[a],d={...n,children:l,totalNumberOfChildren:m,position:u};o.splice(a,1,d)}).addCase(Ce,()=>ls()).addCase(ye,()=>ls())});function iy(e,t){e.error=t||null,e.isLoading=!1}function cy(e,t){e.isLoading=!0,e.requestId=t}function sy(e,t,r){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1,e.queryExecuted=r??""}function uy(e){let t=e.response.pagination;return t.page*t.perPage}function ly(e,t){let r=e.children.some(u=>u.permanentid===e.permanentid);if(e.children.length===0||r)return{...e,position:t};let{children:o,totalNumberOfChildren:n,...a}=e;return{...e,children:[a,...o],position:t}}s();c();var Qt=G(Zr(),e=>{e.addCase(cr,(t,r)=>{t.appliedSort=r.payload}).addCase(he.fulfilled,dy).addCase(ie.fulfilled,dy).addCase(ye,Zr).addCase(Ce,Zr).addCase(Pe,py).addCase(We,py)});function dy(e,t){let r=t.payload.response;e.appliedSort=my(r.sort.appliedSort),e.availableSorts=r.sort.availableSorts.map(my)}var my=e=>e.sortCriteria==="relevance"?gt():{by:"fields",fields:(e.fields||[]).map(({field:t,direction:r,displayName:o})=>({name:t,direction:r,displayName:o}))};function py(e,t){t.payload.sortCriteria&&(e.appliedSort=t.payload.sortCriteria)}s();c();s();c();function fy(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function gy(e,t){let r=[],o=[],n=[],a=[];return t.forEach(u=>{switch(u.type){case"redirect":r.push(u.content);break;case"query":o.push(u.content);break;case"execute":n.push({functionName:u.content.name,params:u.content.params});break;case"notify":a.push(u.content);break}}),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=n,e.notifications=a,e}function yy(e,t){return e.queryModification={...t,queryToIgnore:""},e}function hy(e,t){return e.queryModification.queryToIgnore=t,e}s();c();var Sy=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var Bt=G(Sy(),e=>e.addCase(ie.pending,fy).addCase(ie.fulfilled,(t,r)=>gy(t,r.payload.response.triggers)).addCase(Ko,(t,r)=>yy(t,r.payload)).addCase(Sr,(t,r)=>hy(t,r.payload.q)));s();c();var ed=G(Vo,e=>e);s();c();var Ut=G(Sn(),e=>{e.addCase(ge.fulfilled,td).addCase(he.fulfilled,td).addCase(ie.fulfilled,td).addCase(Pe,Cy).addCase(We,Cy).addCase(ve.fulfilled,(t,r)=>r.payload?.facetOrder??t).addCase(Ce,()=>Sn()).addCase(ye,()=>Sn())});function td(e,t){return t.payload.response.facets.map(r=>r.facetId)}function Cy(e,t){return[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.lf??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.mnf??{})]}s();c();s();c();function Ya(e,t,r){let{facetId:o}=t;if(e[o])return;let n=!1,a={...Lr,...t},u=r();e[o]={options:a,isLoading:n,response:u,initialNumberOfValues:a.numberOfValues,requestId:""}}function ds(e,t){let{facetId:r,...o}=t,n=e[r];n&&(n.options={...n.options,...o})}function Qr(e,t,r){let o=e[t];o&&(o.requestId=r,o.isLoading=!0)}function Br(e,t){let r=e[t];r&&(r.isLoading=!1)}function ms(e,t,r){let{facetId:o,response:n}=t,a=e[o];a&&a.requestId===r&&(a.isLoading=!1,a.response=n)}function ps(e,t,r){let{facetId:o,response:n}=t,a=e[o];a&&a.requestId===r&&(a.isLoading=!1,"success"in n&&(a.response=n.success))}function fs(e,t,r,o){let{facetId:n,response:a}=t,u=Qe(n),l=e[u];if(!l)Ya(e,{facetId:u},o),l=e[u];else if(l.requestId!==r)return;l.isLoading=!1,"success"in a&&(l.response=a.success)}function xy(e,t,r,o){if(t.fieldSuggestionsFacets)for(let n of t.fieldSuggestionsFacets)n.facetId in e||n.type!=="regular"||(e[n.facetId]={options:{...Lr,query:t.query??""},isLoading:!1,response:o(),initialNumberOfValues:Lr.numberOfValues,requestId:r})}function Ry(e,t,r,o){if(t.fieldSuggestionsFacets)for(let n of t.fieldSuggestionsFacets){let a=Qe(n.facetId);a in e||n.type!=="hierarchical"||(e[a]={options:{...Lr,query:t.query??""},isLoading:!1,response:o(),initialNumberOfValues:Lr.numberOfValues,requestId:r})}}function Ja(e,t,r){let{facetId:o}=t,n=e[o];n&&(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=Lr.query)}function sr(e,t){Object.keys(e).forEach(r=>Ja(e,{facetId:r},t))}var Lr={captions:{},numberOfValues:10,query:""};s();c();s();c();var Fy=async(e,t,r,o)=>{let n=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:u,query:l,numberOfValues:m}=n,{field:d,delimitingCharacter:p,basePath:y,filterFacetCount:h}=a,f=MA(a),S=f.length?[f]:[],R=`*${l}*`;return{url:t.configuration.search.apiBaseUrl??nt(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:y,captions:u,numberOfValues:m,query:R,field:d,delimitingCharacter:p,ignorePaths:S,filterFacetCount:h,type:"hierarchical",...o?{}:{searchContext:(await ut(t,r)).request}}},MA=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};s();c();var vy=async(e,t,r,o)=>{let{captions:n,query:a,numberOfValues:u}=t.facetSearchSet[e].options,{field:l,currentValues:m,filterFacetCount:d}=t.facetSet[e].request,p=m.filter(h=>h.state!=="idle").map(h=>h.value),y=`*${a}*`;return{url:t.configuration.search.apiBaseUrl??nt(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:n,numberOfValues:u,query:y,field:l,ignoreValues:p,filterFacetCount:d,type:"specific",...o?{}:{searchContext:(await ut(t,r)).request}}};var Py=e=>async(t,{getState:r,extra:{apiClient:o,validatePayload:n,navigatorContext:a}})=>{let u=r(),l;n(t,V),LA(u,t)?l=await vy(t,u,a,e):l=await Fy(t,u,a,e);let m=await o.facetSearch(l);return{facetId:t,response:m}},Ur=J("facetSearch/executeSearch",Py(!1)),S6=J("facetSearch/executeSearch",Py(!0)),kn=v("facetSearch/clearResults",e=>b(e,{facetId:re})),LA=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;s();c();function Ay(){return{}}var Vn=G(Ay(),e=>{e.addCase(Gi,(t,r)=>{let o=r.payload;Ya(t,o,yo)}).addCase(xr,(t,r)=>{ds(t,r.payload)}).addCase(lt.pending,(t,r)=>{let{facetId:o}=r.meta.arg;Qr(t,o,r.meta.requestId)}).addCase(He.pending,(t,r)=>{let{facetId:o}=r.meta.arg;Qr(t,o,r.meta.requestId)}).addCase(Ur.pending,(t,r)=>{let o=r.meta.arg;Qr(t,o,r.meta.requestId)}).addCase(lt.rejected,(t,r)=>{let{facetId:o}=r.meta.arg;Br(t,o)}).addCase(He.rejected,(t,r)=>{let{facetId:o}=r.meta.arg;Br(t,Qe(o))}).addCase(Ur.rejected,(t,r)=>{let o=r.meta.arg;Br(t,o)}).addCase(lt.fulfilled,(t,r)=>{ps(t,r.payload,r.meta.requestId)}).addCase(He.fulfilled,(t,r)=>{fs(t,r.payload,r.meta.requestId,yo)}).addCase(ke.fulfilled,(t,r)=>{Ry(t,r.payload,r.meta.requestId,yo)}).addCase(Ur.fulfilled,(t,r)=>{ms(t,r.payload,r.meta.requestId)}).addCase(kn,(t,{payload:{facetId:r}})=>{Ja(t,{facetId:r},yo)}).addCase(he.fulfilled,t=>sr(t,yo)).addCase(ie.fulfilled,t=>sr(t,yo)).addCase(ge.fulfilled,t=>{sr(t,yo)})});function yo(){return{moreValuesAvailable:!1,values:[]}}s();c();s();c();function by(){return{}}var Dn=G(by(),e=>{e.addCase(Yi,(t,r)=>{let o=r.payload;Ya(t,o,jr)}).addCase(xr,(t,r)=>{ds(t,r.payload)}).addCase(lt.pending,(t,r)=>{let{facetId:o}=r.meta.arg;Qr(t,o,r.meta.requestId)}).addCase(He.pending,(t,r)=>{let{facetId:o}=r.meta.arg;Qr(t,Qe(o),r.meta.requestId)}).addCase(Ur.pending,(t,r)=>{let o=r.meta.arg;Qr(t,o,r.meta.requestId)}).addCase(lt.rejected,(t,r)=>{let{facetId:o}=r.meta.arg;Br(t,o)}).addCase(He.rejected,(t,r)=>{let{facetId:o}=r.meta.arg;Br(t,Qe(o))}).addCase(Ur.rejected,(t,r)=>{let o=r.meta.arg;Br(t,o)}).addCase(lt.fulfilled,(t,r)=>{ps(t,r.payload,r.meta.requestId)}).addCase(He.fulfilled,(t,r)=>{fs(t,r.payload,r.meta.requestId,jr)}).addCase(ke.fulfilled,(t,r)=>{xy(t,r.payload,r.meta.requestId,jr)}).addCase(Ur.fulfilled,(t,r)=>{ms(t,r.payload,r.meta.requestId)}).addCase(kn,(t,{payload:r})=>{Ja(t,r,jr)}).addCase(ge.fulfilled,t=>{sr(t,jr)}).addCase(he.fulfilled,t=>sr(t,jr)).addCase(ie.fulfilled,t=>sr(t,jr)).addCase(Ce,t=>sr(t,jr))});function jr(){return{moreValuesAvailable:!1,values:[]}}s();c();s();c();s();c();s();c();s();c();async function wy(e,t){let r=e.getReader(),o;for(;!(o=await r.read()).done;)t(o.value)}function Ey(e){let t,r,o,n=!1;return function(u){t===void 0?(t=u,r=0,o=-1):t=QA(t,u);let l=t.length,m=0;for(;r<l;){n&&(t[r]===10&&(m=++r),n=!1);let d=-1;for(;r<l&&d===-1;++r)switch(t[r]){case 58:o===-1&&(o=r-m);break;case 13:n=!0;case 10:d=r;break}if(d===-1)break;e(t.subarray(m,d),o),m=r,o=-1}m===l?t=void 0:m!==0&&(t=t.subarray(m),r-=m)}}function Ty(e,t,r){let o=Iy(),n=new TextDecoder;return function(u,l){if(u.length===0)r?.(o),o=Iy();else if(l>0){let m=n.decode(u.subarray(0,l)),d=l+(u[l+1]===32?2:1),p=n.decode(u.subarray(d));switch(m){case"data":o.data=o.data?o.data+`
`+p:p;break;case"event":o.event=p;break;case"id":e(o.id=p);break;case"retry":let y=parseInt(p,10);isNaN(y)||t(o.retry=y);break}}}}function QA(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Iy(){return{data:"",event:"",id:"",retry:void 0}}var BA=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r},gs="text/event-stream",UA=1e3,Oy="last-event-id";function qy(){typeof window<"u"}function rd(e,t){var{signal:r,headers:o,onopen:n,onmessage:a,onclose:u,onerror:l,openWhenHidden:m,fetch:d}=t,p=BA(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((y,h)=>{let f=Object.assign({},o);f.accept||(f.accept=gs);let S;function R(){S?.abort(),document.hidden||I()}!m&&qy()&&document.addEventListener("visibilitychange",R);let P=UA,A=0;function C(){qy()&&document.removeEventListener("visibilitychange",R),clearTimeout(A),S?.abort()}r?.addEventListener("abort",()=>{C(),y()});let x=d??x,F=n??jA;async function I(){var O;S=typeof i.AbortController>"u"?null:new i.AbortController;try{let w=await x(e,Object.assign(Object.assign({},p),{headers:f,signal:S?.signal}));await F(w),await wy(w.body,Ey(Ty(D=>{D?f[Oy]=D:delete f[Oy]},D=>{P=D},a))),u?.(),C(),y()}catch(w){if(!S?.signal.aborted)try{let D=(O=l?.(w))!==null&&O!==void 0?O:P;clearTimeout(A),A=setTimeout(I,D)}catch(D){C(),h(D)}}}I()})}function jA(e){let t=e.headers.get("content-type");if(!t?.startsWith(gs))throw new Error(`Expected content-type to be ${gs}, Actual: ${t}`)}s();c();s();c();var ys=j(e=>e.query,e=>e);var F5=j(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t)),v5=j(e=>ys(e)?.q,e=>e.search.requestId,(e,t)=>({q:e,requestId:t}));s();c();var _A=j(e=>e.pipeline,e=>e);s();c();var $A=j(e=>e.searchHub,e=>e);s();c();s();c();function zA(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var ky=xt;function Hy(e,t){if(e===t||!(ky(e)&&ky(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),o=Object.keys(e),n=r.length===o.length,a=Array.isArray(t)?[]:{};for(let u of r)a[u]=Hy(e[u],t[u]),n&&(n=e[u]===a[u]);return n?e:a}function Nn(e){let t=0;for(let r in e)t++;return t}var Vy=e=>[].concat(...e);function WA(e){return new RegExp("(^|:)//").test(e)}function HA(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Dy(e){return e!=null}function KA(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var GA=e=>e.replace(/\/$/,""),YA=e=>e.replace(/^\//,"");function JA(e,t){if(!e)return t;if(!t)return e;if(WA(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=GA(e),t=YA(t),`${e}${r}${t}`}var Ny=(...e)=>g(...e),XA=e=>e.status>=200&&e.status<=299,ZA=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function My(e){if(!xt(e))return e;let t={...e};for(let[r,o]of Object.entries(t))o===void 0&&delete t[r];return t}function Ky({baseUrl:e,prepareHeaders:t=y=>y,fetchFn:r=Ny,paramsSerializer:o,isJsonContentType:n=ZA,jsonContentType:a="application/json",jsonReplacer:u,timeout:l,responseHandler:m,validateStatus:d,...p}={}){return typeof g>"u"&&r===Ny&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(h,f)=>{let{signal:S,getState:R,extra:P,endpoint:A,forced:C,type:x}=f,F,{url:I,headers:O=new Headers(p.headers),params:w=void 0,responseHandler:D=m??"json",validateStatus:M=d??XA,timeout:$=l,...X}=typeof h=="string"?{url:h}:h,N={...p,signal:S,...X};O=new Headers(My(O)),N.headers=await t(O,{getState:R,extra:P,endpoint:A,forced:C,type:x})||O;let Q=ae=>typeof ae=="object"&&(xt(ae)||Array.isArray(ae)||typeof ae.toJSON=="function");if(!N.headers.has("content-type")&&Q(N.body)&&N.headers.set("content-type",a),Q(N.body)&&n(N.headers)&&(N.body=JSON.stringify(N.body,u)),w){let ae=~I.indexOf("?")?"&":"?",ue=o?o(w):new URLSearchParams(My(w));I+=ae+ue}I=JA(e,I);let L=new Request(I,N);F={request:new Request(I,N)};let B,Y=!1,H=$&&setTimeout(()=>{Y=!0,f.abort()},$);try{B=await r(L)}catch(ae){return{error:{status:Y?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(ae)},meta:F}}finally{H&&clearTimeout(H)}let oe=B.clone();F.response=oe;let se,le="";try{let ae;if(await Promise.all([y(B,D).then(ue=>se=ue,ue=>ae=ue),oe.text().then(ue=>le=ue,()=>{})]),ae)throw ae}catch(ae){return{error:{status:"PARSING_ERROR",originalStatus:B.status,data:le,error:String(ae)},meta:F}}return M(B,se)?{data:se,meta:F}:{error:{status:B.status,data:se},meta:F}};async function y(h,f){if(typeof f=="function")return f(h);if(f==="content-type"&&(f=n(h.headers)?"json":"text"),f==="json"){let S=await h.text();return S.length?JSON.parse(S):null}return h.text()}}var Mn=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function eb(e=0,t=5){let r=Math.min(e,t),o=~~((Math.random()+.4)*(300<<r));await new Promise(n=>setTimeout(a=>n(a),o))}function tb(e){throw Object.assign(new Mn({error:e}),{throwImmediately:!0})}var Ly={},rb=(e,t)=>async(r,o,n)=>{let a=[5,(t||Ly).maxRetries,(n||Ly).maxRetries].filter(p=>p!==void 0),[u]=a.slice(-1),m={maxRetries:u,backoff:eb,retryCondition:(p,y,{attempt:h})=>h<=u,...t,...n},d=0;for(;;)try{let p=await e(r,o,n);if(p.error)throw new Mn(p);return p}catch(p){if(d++,p.throwImmediately){if(p instanceof Mn)return p.value;throw p}if(p instanceof Mn&&!m.retryCondition(p.value.error,r,{attempt:d,baseQueryApi:o,extraOptions:n}))return p.value;await m.backoff(d,m.maxRetries)}},Gy=Object.assign(rb,{fail:tb}),id=v("__rtkq/focused"),Yy=v("__rtkq/unfocused"),cd=v("__rtkq/online"),Jy=v("__rtkq/offline");function Xy(e){return e.type==="query"}function ob(e){return e.type==="mutation"}function sd(e,t,r,o,n,a){return nb(e)?e(t,r,o,n).map(nd).map(a):Array.isArray(e)?e.map(nd).map(a):[]}function nb(e){return typeof e=="function"}function nd(e){return typeof e=="string"?{type:e}:e}function ab(e,t){return e.catch(t)}var Za=Symbol("forceQueryFn"),ad=e=>typeof e[Za]=="function";function ib({serializeQueryArgs:e,queryThunk:t,mutationThunk:r,api:o,context:n}){let a=new Map,u=new Map,{unsubscribeQueryResult:l,removeMutationResult:m,updateSubscriptionOptions:d}=o.internalActions;return{buildInitiateQuery:R,buildInitiateMutation:P,getRunningQueryThunk:p,getRunningMutationThunk:y,getRunningQueriesThunk:h,getRunningMutationsThunk:f};function p(A,C){return x=>{let F=n.endpointDefinitions[A],I=e({queryArgs:C,endpointDefinition:F,endpointName:A});return a.get(x)?.[I]}}function y(A,C){return x=>u.get(x)?.[C]}function h(){return A=>Object.values(a.get(A)||{}).filter(Dy)}function f(){return A=>Object.values(u.get(A)||{}).filter(Dy)}function S(A){}function R(A,C){let x=(F,{subscribe:I=!0,forceRefetch:O,subscriptionOptions:w,[Za]:D,...M}={})=>($,X)=>{let N=e({queryArgs:F,endpointDefinition:C,endpointName:A}),Q=t({...M,type:"query",subscribe:I,forceRefetch:O,subscriptionOptions:w,endpointName:A,originalArgs:F,queryCacheKey:N,[Za]:D}),L=o.endpoints[A].select(F),_=$(Q),B=L(X());let{requestId:Y,abort:H}=_,oe=B.requestId!==Y,se=a.get($)?.[N],le=()=>L(X()),ae=Object.assign(D?_.then(le):oe&&!se?Promise.resolve(B):Promise.all([se,_]).then(le),{arg:F,requestId:Y,subscriptionOptions:w,queryCacheKey:N,abort:H,async unwrap(){let ue=await ae;if(ue.isError)throw ue.error;return ue.data},refetch:()=>$(x(F,{subscribe:!1,forceRefetch:!0})),unsubscribe(){I&&$(l({queryCacheKey:N,requestId:Y}))},updateSubscriptionOptions(ue){ae.subscriptionOptions=ue,$(d({endpointName:A,requestId:Y,queryCacheKey:N,options:ue}))}});if(!se&&!oe&&!D){let ue=a.get($)||{};ue[N]=ae,a.set($,ue),ae.then(()=>{delete ue[N],Nn(ue)||a.delete($)})}return ae};return x}function P(A){return(C,{track:x=!0,fixedCacheKey:F}={})=>(I,O)=>{let w=r({type:"mutation",endpointName:A,originalArgs:C,track:x,fixedCacheKey:F}),D=I(w);let{requestId:M,abort:$,unwrap:X}=D,N=ab(D.unwrap().then(B=>({data:B})),B=>({error:B})),Q=()=>{I(m({requestId:M,fixedCacheKey:F}))},L=Object.assign(N,{arg:D.arg,requestId:M,abort:$,unwrap:X,reset:Q}),_=u.get(I)||{};return u.set(I,_),_[M]=L,L.then(()=>{delete _[M],Nn(_)||u.delete(I)}),F&&(_[F]=L,L.then(()=>{_[F]===L&&(delete _[F],Nn(_)||u.delete(I))})),L}}}function Qy(e){return e}function cb({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:o,api:n,assertTagType:a}){let u=(C,x,F,I)=>(O,w)=>{let D=r[C],M=o({queryArgs:x,endpointDefinition:D,endpointName:C});if(O(n.internalActions.queryResultPatched({queryCacheKey:M,patches:F})),!I)return;let $=n.endpoints[C].select(x)(w()),X=sd(D.providesTags,$.data,void 0,x,{},a);O(n.internalActions.updateProvidedBy({queryCacheKey:M,providedTags:X}))},l=(C,x,F,I=!0)=>(O,w)=>{let M=n.endpoints[C].select(x)(w()),$={patches:[],inversePatches:[],undo:()=>O(n.util.patchQueryData(C,x,$.inversePatches,I))};if(M.status==="uninitialized")return $;let X;if("data"in M)if(Ue(M.data)){let[N,Q,L]=Ri(M.data,F);$.patches.push(...Q),$.inversePatches.push(...L),X=N}else X=F(M.data),$.patches.push({op:"replace",path:[],value:X}),$.inversePatches.push({op:"replace",path:[],value:M.data});return $.patches.length===0||O(n.util.patchQueryData(C,x,$.patches,I)),$},m=(C,x,F)=>I=>I(n.endpoints[C].initiate(x,{subscribe:!1,forceRefetch:!0,[Za]:()=>({data:F})})),d=async(C,{signal:x,abort:F,rejectWithValue:I,fulfillWithValue:O,dispatch:w,getState:D,extra:M})=>{let $=r[C.endpointName];try{let X=Qy,N,Q={signal:x,abort:F,dispatch:w,getState:D,extra:M,endpoint:C.endpointName,type:C.type,forced:C.type==="query"?p(C,D()):void 0},L=C.type==="query"?C[Za]:void 0;if(L?N=L():$.query?(N=await t($.query(C.originalArgs),Q,$.extraOptions),$.transformResponse&&(X=$.transformResponse)):N=await $.queryFn(C.originalArgs,Q,$.extraOptions,_=>t(_,Q,$.extraOptions)),typeof process<"u",N.error)throw new Mn(N.error,N.meta);return O(await X(N.data,N.meta,C.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:N.meta,[Yr]:!0})}catch(X){let N=X;if(N instanceof Mn){let Q=Qy;$.query&&$.transformErrorResponse&&(Q=$.transformErrorResponse);try{return I(await Q(N.value,N.meta,C.originalArgs),{baseQueryMeta:N.meta,[Yr]:!0})}catch(L){N=L}}throw typeof process<"u",console.error(N),N}};function p(C,x){let F=x[e]?.queries?.[C.queryCacheKey],I=x[e]?.config.refetchOnMountOrArgChange,O=F?.fulfilledTimeStamp,w=C.forceRefetch??(C.subscribe&&I);return w?w===!0||(Number(new Date)-Number(O))/1e3>=w:!1}let y=J(`${e}/executeQuery`,d,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Yr]:!0}},condition(C,{getState:x}){let F=x(),I=F[e]?.queries?.[C.queryCacheKey],O=I?.fulfilledTimeStamp,w=C.originalArgs,D=I?.originalArgs,M=r[C.endpointName];return ad(C)?!0:I?.status==="pending"?!1:p(C,F)||Xy(M)&&M?.forceRefetch?.({currentArg:w,previousArg:D,endpointState:I,state:F})?!0:!O},dispatchConditionRejection:!0}),h=J(`${e}/executeMutation`,d,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Yr]:!0}}}),f=C=>"force"in C,S=C=>"ifOlderThan"in C,R=(C,x,F)=>(I,O)=>{let w=f(F)&&F.force,D=S(F)&&F.ifOlderThan,M=(X=!0)=>{let N={forceRefetch:X,isPrefetch:!0};return n.endpoints[C].initiate(x,N)},$=n.endpoints[C].select(x)(O());if(w)I(M());else if(D){let X=$?.fulfilledTimeStamp;if(!X){I(M());return}(Number(new Date)-Number(new Date(X)))/1e3>=D&&I(M())}else I(M(!1))};function P(C){return x=>x?.meta?.arg?.endpointName===C}function A(C,x){return{matchPending:Io(Ai(C),P(x)),matchFulfilled:Io(Ht(C),P(x)),matchRejected:Io(Gr(C),P(x))}}return{queryThunk:y,mutationThunk:h,prefetch:R,updateQueryData:l,upsertQueryData:m,patchQueryData:u,buildMatchThunkActions:A}}function Zy(e,t,r,o){return sd(r[e.meta.arg.endpointName][t],Ht(e)?e.payload:void 0,sa(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,o)}function hs(e,t,r){let o=e[t];o&&r(o)}function ei(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function By(e,t,r){let o=e[ei(t)];o&&r(o)}var Xa={};function sb({reducerPath:e,queryThunk:t,mutationThunk:r,context:{endpointDefinitions:o,apiUid:n,extractRehydrationInfo:a,hasRehydrationInfo:u},assertTagType:l,config:m}){let d=v(`${e}/resetApiState`),p=Jr({name:`${e}/queries`,initialState:Xa,reducers:{removeQueryResult:{reducer(x,{payload:{queryCacheKey:F}}){delete x[F]},prepare:wo()},queryResultPatched:{reducer(x,{payload:{queryCacheKey:F,patches:I}}){hs(x,F,O=>{O.data=Iu(O.data,I.concat())})},prepare:wo()}},extraReducers(x){x.addCase(t.pending,(F,{meta:I,meta:{arg:O}})=>{var D;let w=ad(O);F[D=O.queryCacheKey]??(F[D]={status:"uninitialized",endpointName:O.endpointName}),hs(F,O.queryCacheKey,M=>{M.status="pending",M.requestId=w&&M.requestId?M.requestId:I.requestId,O.originalArgs!==void 0&&(M.originalArgs=O.originalArgs),M.startedTimeStamp=I.startedTimeStamp})}).addCase(t.fulfilled,(F,{meta:I,payload:O})=>{hs(F,I.arg.queryCacheKey,w=>{if(w.requestId!==I.requestId&&!ad(I.arg))return;let{merge:D}=o[I.arg.endpointName];if(w.status="fulfilled",D)if(w.data!==void 0){let{fulfilledTimeStamp:M,arg:$,baseQueryMeta:X,requestId:N}=I,Q=Wt(w.data,L=>D(L,O,{arg:$.originalArgs,baseQueryMeta:X,fulfilledTimeStamp:M,requestId:N}));w.data=Q}else w.data=O;else w.data=o[I.arg.endpointName].structuralSharing??!0?Hy(Ye(w.data)?Au(w.data):w.data,O):O;delete w.error,w.fulfilledTimeStamp=I.fulfilledTimeStamp})}).addCase(t.rejected,(F,{meta:{condition:I,arg:O,requestId:w},error:D,payload:M})=>{hs(F,O.queryCacheKey,$=>{if(!I){if($.requestId!==w)return;$.status="rejected",$.error=M??D}})}).addMatcher(u,(F,I)=>{let{queries:O}=a(I);for(let[w,D]of Object.entries(O))(D?.status==="fulfilled"||D?.status==="rejected")&&(F[w]=D)})}}),y=Jr({name:`${e}/mutations`,initialState:Xa,reducers:{removeMutationResult:{reducer(x,{payload:F}){let I=ei(F);I in x&&delete x[I]},prepare:wo()}},extraReducers(x){x.addCase(r.pending,(F,{meta:I,meta:{requestId:O,arg:w,startedTimeStamp:D}})=>{w.track&&(F[ei(I)]={requestId:O,status:"pending",endpointName:w.endpointName,startedTimeStamp:D})}).addCase(r.fulfilled,(F,{payload:I,meta:O})=>{O.arg.track&&By(F,O,w=>{w.requestId===O.requestId&&(w.status="fulfilled",w.data=I,w.fulfilledTimeStamp=O.fulfilledTimeStamp)})}).addCase(r.rejected,(F,{payload:I,error:O,meta:w})=>{w.arg.track&&By(F,w,D=>{D.requestId===w.requestId&&(D.status="rejected",D.error=I??O)})}).addMatcher(u,(F,I)=>{let{mutations:O}=a(I);for(let[w,D]of Object.entries(O))(D?.status==="fulfilled"||D?.status==="rejected")&&w!==D?.requestId&&(F[w]=D)})}}),h=Jr({name:`${e}/invalidation`,initialState:Xa,reducers:{updateProvidedBy:{reducer(x,F){var w,D;let{queryCacheKey:I,providedTags:O}=F.payload;for(let M of Object.values(x))for(let $ of Object.values(M)){let X=$.indexOf(I);X!==-1&&$.splice(X,1)}for(let{type:M,id:$}of O){let X=(w=x[M]??(x[M]={}))[D=$||"__internal_without_id"]??(w[D]=[]);X.includes(I)||X.push(I)}},prepare:wo()}},extraReducers(x){x.addCase(p.actions.removeQueryResult,(F,{payload:{queryCacheKey:I}})=>{for(let O of Object.values(F))for(let w of Object.values(O)){let D=w.indexOf(I);D!==-1&&w.splice(D,1)}}).addMatcher(u,(F,I)=>{var w,D;let{provided:O}=a(I);for(let[M,$]of Object.entries(O))for(let[X,N]of Object.entries($)){let Q=(w=F[M]??(F[M]={}))[D=X||"__internal_without_id"]??(w[D]=[]);for(let L of N)Q.includes(L)||Q.push(L)}}).addMatcher(Rt(Ht(t),sa(t)),(F,I)=>{let O=Zy(I,"providesTags",o,l),{queryCacheKey:w}=I.meta.arg;h.caseReducers.updateProvidedBy(F,h.actions.updateProvidedBy({queryCacheKey:w,providedTags:O}))})}}),f=Jr({name:`${e}/subscriptions`,initialState:Xa,reducers:{updateSubscriptionOptions(x,F){},unsubscribeQueryResult(x,F){},internal_getRTKQSubscriptions(){}}}),S=Jr({name:`${e}/internalSubscriptions`,initialState:Xa,reducers:{subscriptionsUpdated:{reducer(x,F){return Iu(x,F.payload)},prepare:wo()}}}),R=Jr({name:`${e}/config`,initialState:{online:KA(),focused:HA(),middlewareRegistered:!1,...m},reducers:{middlewareRegistered(x,{payload:F}){x.middlewareRegistered=x.middlewareRegistered==="conflict"||n!==F?"conflict":!0}},extraReducers:x=>{x.addCase(cd,F=>{F.online=!0}).addCase(Jy,F=>{F.online=!1}).addCase(id,F=>{F.focused=!0}).addCase(Yy,F=>{F.focused=!1}).addMatcher(u,F=>({...F}))}}),P=Po({queries:p.reducer,mutations:y.reducer,provided:h.reducer,subscriptions:S.reducer,config:R.reducer}),A=(x,F)=>P(d.match(F)?void 0:x,F),C={...R.actions,...p.actions,...f.actions,...S.actions,...y.actions,...h.actions,resetApiState:d};return{reducer:A,actions:C}}var od=Symbol.for("RTKQ/skipToken"),eh={status:"uninitialized"},Uy=Wt(eh,()=>{}),jy=Wt(eh,()=>{});function ub({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let o=y=>Uy,n=y=>jy;return{buildQuerySelector:l,buildMutationSelector:m,selectInvalidatedBy:d,selectCachedArgsForQuery:p};function a(y){return{...y,...zA(y.status)}}function u(y){return y[t]}function l(y,h){return f=>{let S=e({queryArgs:f,endpointDefinition:h,endpointName:y});return r(f===od?o:A=>u(A)?.queries?.[S]??Uy,a)}}function m(){return y=>{let h;return typeof y=="object"?h=ei(y)??od:h=y,r(h===od?n:R=>u(R)?.mutations?.[h]??jy,a)}}function d(y,h){let f=y[t],S=new Set;for(let R of h.map(nd)){let P=f.provided[R.type];if(!P)continue;let A=(R.id!==void 0?P[R.id]:Vy(Object.values(P)))??[];for(let C of A)S.add(C)}return Vy(Array.from(S.values()).map(R=>{let P=f.queries[R];return P?[{queryCacheKey:R,endpointName:P.endpointName,originalArgs:P.originalArgs}]:[]}))}function p(y,h){return Object.values(y[t].queries).filter(f=>f?.endpointName===h&&f.status!=="uninitialized").map(f=>f.originalArgs)}}var _y=WeakMap?new WeakMap:void 0,$y=({endpointName:e,queryArgs:t})=>{let r="",o=_y?.get(t);if(typeof o=="string")r=o;else{let n=JSON.stringify(t,(a,u)=>(u=typeof u=="bigint"?{$bigint:u.toString()}:u,u=xt(u)?Object.keys(u).sort().reduce((l,m)=>(l[m]=u[m],l),{}):u,u));xt(t)&&_y?.set(t,n),r=n}return`${e}(${r})`};function lb(...e){return function(r){let o=bo(d=>r.extractRehydrationInfo?.(d,{reducerPath:r.reducerPath??"api"})),n={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:o,serializeQueryArgs(d){let p=$y;if("serializeQueryArgs"in d.endpointDefinition){let y=d.endpointDefinition.serializeQueryArgs;p=h=>{let f=y(h);return typeof f=="string"?f:$y({...h,queryArgs:f})}}else r.serializeQueryArgs&&(p=r.serializeQueryArgs);return p(d)},tagTypes:[...r.tagTypes||[]]},a={endpointDefinitions:{},batch(d){d()},apiUid:Eu(),extractRehydrationInfo:o,hasRehydrationInfo:bo(d=>o(d)!=null)},u={injectEndpoints:m,enhanceEndpoints({addTagTypes:d,endpoints:p}){if(d)for(let y of d)n.tagTypes.includes(y)||n.tagTypes.push(y);if(p)for(let[y,h]of Object.entries(p))typeof h=="function"?h(a.endpointDefinitions[y]):Object.assign(a.endpointDefinitions[y]||{},h);return u}},l=e.map(d=>d.init(u,n,a));function m(d){let p=d.endpoints({query:y=>({...y,type:"query"}),mutation:y=>({...y,type:"mutation"})});for(let[y,h]of Object.entries(p)){if(d.overrideExisting!==!0&&y in a.endpointDefinitions){if(d.overrideExisting==="throw")throw new Error(Xe(39));typeof process<"u";continue}a.endpointDefinitions[y]=h;for(let f of l)f.injectEndpoint(y,h)}return u}return u.injectEndpoints({endpoints:r.endpoints})}}function _r(e,...t){return Object.assign(e,...t)}var db=({api:e,queryThunk:t,internalState:r})=>{let o=`${e.reducerPath}/subscriptions`,n=null,a=null,{updateSubscriptionOptions:u,unsubscribeQueryResult:l}=e.internalActions,m=(f,S)=>{var P,A;if(u.match(S)){let{queryCacheKey:C,requestId:x,options:F}=S.payload;return f?.[C]?.[x]&&(f[C][x]=F),!0}if(l.match(S)){let{queryCacheKey:C,requestId:x}=S.payload;return f[C]&&delete f[C][x],!0}if(e.internalActions.removeQueryResult.match(S))return delete f[S.payload.queryCacheKey],!0;if(t.pending.match(S)){let{meta:{arg:C,requestId:x}}=S,F=f[P=C.queryCacheKey]??(f[P]={});return F[`${x}_running`]={},C.subscribe&&(F[x]=C.subscriptionOptions??F[x]??{}),!0}let R=!1;if(t.fulfilled.match(S)||t.rejected.match(S)){let C=f[S.meta.arg.queryCacheKey]||{},x=`${S.meta.requestId}_running`;R||(R=!!C[x]),delete C[x]}if(t.rejected.match(S)){let{meta:{condition:C,arg:x,requestId:F}}=S;if(C&&x.subscribe){let I=f[A=x.queryCacheKey]??(f[A]={});I[F]=x.subscriptionOptions??I[F]??{},R=!0}}return R},d=()=>r.currentSubscriptions,h={getSubscriptions:d,getSubscriptionCount:f=>{let R=d()[f]??{};return Nn(R)},isRequestSubscribed:(f,S)=>!!d()?.[f]?.[S]};return(f,S)=>{if(n||(n=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(f))return n=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(f))return[!1,h];let R=m(r.currentSubscriptions,f),P=!0;if(R){a||(a=setTimeout(()=>{let x=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,F]=Ri(n,()=>x);S.next(e.internalActions.subscriptionsUpdated(F)),n=x,a=null},500));let A=typeof f.type=="string"&&!!f.type.startsWith(o),C=t.rejected.match(f)&&f.meta.condition&&!!f.meta.arg.subscribe;P=!A&&!C}return[P,!1]}};function mb(e){for(let t in e)return!1;return!0}var pb=2147483647/1e3-1,fb=({reducerPath:e,api:t,queryThunk:r,context:o,internalState:n})=>{let{removeQueryResult:a,unsubscribeQueryResult:u}=t.internalActions,l=Rt(u.match,r.fulfilled,r.rejected);function m(h){let f=n.currentSubscriptions[h];return!!f&&!mb(f)}let d={},p=(h,f,S)=>{if(l(h)){let R=f.getState()[e],{queryCacheKey:P}=u.match(h)?h.payload:h.meta.arg;y(P,R.queries[P]?.endpointName,f,R.config)}if(t.util.resetApiState.match(h))for(let[R,P]of Object.entries(d))P&&clearTimeout(P),delete d[R];if(o.hasRehydrationInfo(h)){let R=f.getState()[e],{queries:P}=o.extractRehydrationInfo(h);for(let[A,C]of Object.entries(P))y(A,C?.endpointName,f,R.config)}};function y(h,f,S,R){let A=o.endpointDefinitions[f]?.keepUnusedDataFor??R.keepUnusedDataFor;if(A===1/0)return;let C=Math.max(0,Math.min(A,pb));if(!m(h)){let x=d[h];x&&clearTimeout(x),d[h]=setTimeout(()=>{m(h)||S.dispatch(a({queryCacheKey:h})),delete d[h]},C*1e3)}}return p},zy=new Error("Promise never resolved before cacheEntryRemoved."),gb=({api:e,reducerPath:t,context:r,queryThunk:o,mutationThunk:n,internalState:a})=>{let u=bi(o),l=bi(n),m=Ht(o,n),d={},p=(f,S,R)=>{let P=y(f);if(o.pending.match(f)){let A=R[t].queries[P],C=S.getState()[t].queries[P];!A&&C&&h(f.meta.arg.endpointName,f.meta.arg.originalArgs,P,S,f.meta.requestId)}else if(n.pending.match(f))S.getState()[t].mutations[P]&&h(f.meta.arg.endpointName,f.meta.arg.originalArgs,P,S,f.meta.requestId);else if(m(f)){let A=d[P];A?.valueResolved&&(A.valueResolved({data:f.payload,meta:f.meta.baseQueryMeta}),delete A.valueResolved)}else if(e.internalActions.removeQueryResult.match(f)||e.internalActions.removeMutationResult.match(f)){let A=d[P];A&&(delete d[P],A.cacheEntryRemoved())}else if(e.util.resetApiState.match(f))for(let[A,C]of Object.entries(d))delete d[A],C.cacheEntryRemoved()};function y(f){return u(f)?f.meta.arg.queryCacheKey:l(f)?f.meta.arg.fixedCacheKey??f.meta.requestId:e.internalActions.removeQueryResult.match(f)?f.payload.queryCacheKey:e.internalActions.removeMutationResult.match(f)?ei(f.payload):""}function h(f,S,R,P,A){let C=r.endpointDefinitions[f],x=C?.onCacheEntryAdded;if(!x)return;let F={},I=new Promise(X=>{F.cacheEntryRemoved=X}),O=Promise.race([new Promise(X=>{F.valueResolved=X}),I.then(()=>{throw zy})]);O.catch(()=>{}),d[R]=F;let w=e.endpoints[f].select(C.type==="query"?S:R),D=P.dispatch((X,N,Q)=>Q),M={...P,getCacheEntry:()=>w(P.getState()),requestId:A,extra:D,updateCachedData:C.type==="query"?X=>P.dispatch(e.util.updateQueryData(f,S,X)):void 0,cacheDataLoaded:O,cacheEntryRemoved:I},$=x(S,M);Promise.resolve($).catch(X=>{if(X!==zy)throw X})}return p},yb=({api:e,context:{apiUid:t},reducerPath:r})=>(o,n)=>{e.util.resetApiState.match(o)&&n.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},hb=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:o,queryThunk:n,api:a,assertTagType:u,refetchQuery:l,internalState:m})=>{let{removeQueryResult:d}=a.internalActions,p=Rt(Ht(o),sa(o)),y=Rt(Ht(o,n),Gr(o,n)),h=[],f=(P,A)=>{p(P)?R(Zy(P,"invalidatesTags",r,u),A):y(P)?R([],A):a.util.invalidateTags.match(P)&&R(sd(P.payload,void 0,void 0,void 0,void 0,u),A)};function S(P){for(let A in P.queries)if(P.queries[A]?.status==="pending")return!0;for(let A in P.mutations)if(P.mutations[A]?.status==="pending")return!0;return!1}function R(P,A){let C=A.getState(),x=C[e];if(h.push(...P),x.config.invalidationBehavior==="delayed"&&S(x))return;let F=h;if(h=[],F.length===0)return;let I=a.util.selectInvalidatedBy(C,F);t.batch(()=>{let O=Array.from(I.values());for(let{queryCacheKey:w}of O){let D=x.queries[w],M=m.currentSubscriptions[w]??{};D&&(Nn(M)===0?A.dispatch(d({queryCacheKey:w})):D.status!=="uninitialized"&&A.dispatch(l(D,w)))}})}return f},Sb=({reducerPath:e,queryThunk:t,api:r,refetchQuery:o,internalState:n})=>{let a={},u=(h,f)=>{(r.internalActions.updateSubscriptionOptions.match(h)||r.internalActions.unsubscribeQueryResult.match(h))&&m(h.payload,f),(t.pending.match(h)||t.rejected.match(h)&&h.meta.condition)&&m(h.meta.arg,f),(t.fulfilled.match(h)||t.rejected.match(h)&&!h.meta.condition)&&l(h.meta.arg,f),r.util.resetApiState.match(h)&&p()};function l({queryCacheKey:h},f){let S=f.getState()[e],R=S.queries[h],P=n.currentSubscriptions[h];if(!R||R.status==="uninitialized")return;let{lowestPollingInterval:A,skipPollingIfUnfocused:C}=y(P);if(!Number.isFinite(A))return;let x=a[h];x?.timeout&&(clearTimeout(x.timeout),x.timeout=void 0);let F=Date.now()+A;a[h]={nextPollTimestamp:F,pollingInterval:A,timeout:setTimeout(()=>{(S.config.focused||!C)&&f.dispatch(o(R,h)),l({queryCacheKey:h},f)},A)}}function m({queryCacheKey:h},f){let R=f.getState()[e].queries[h],P=n.currentSubscriptions[h];if(!R||R.status==="uninitialized")return;let{lowestPollingInterval:A}=y(P);if(!Number.isFinite(A)){d(h);return}let C=a[h],x=Date.now()+A;(!C||x<C.nextPollTimestamp)&&l({queryCacheKey:h},f)}function d(h){let f=a[h];f?.timeout&&clearTimeout(f.timeout),delete a[h]}function p(){for(let h of Object.keys(a))d(h)}function y(h={}){let f=!1,S=Number.POSITIVE_INFINITY;for(let R in h)h[R].pollingInterval&&(S=Math.min(h[R].pollingInterval,S),f=h[R].skipPollingIfUnfocused||f);return{lowestPollingInterval:S,skipPollingIfUnfocused:f}}return u},Cb=({api:e,context:t,queryThunk:r,mutationThunk:o})=>{let n=Ai(r,o),a=Gr(r,o),u=Ht(r,o),l={};return(d,p)=>{if(n(d)){let{requestId:y,arg:{endpointName:h,originalArgs:f}}=d.meta,S=t.endpointDefinitions[h],R=S?.onQueryStarted;if(R){let P={},A=new Promise((I,O)=>{P.resolve=I,P.reject=O});A.catch(()=>{}),l[y]=P;let C=e.endpoints[h].select(S.type==="query"?f:y),x=p.dispatch((I,O,w)=>w),F={...p,getCacheEntry:()=>C(p.getState()),requestId:y,extra:x,updateCachedData:S.type==="query"?I=>p.dispatch(e.util.updateQueryData(h,f,I)):void 0,queryFulfilled:A};R(f,F)}}else if(u(d)){let{requestId:y,baseQueryMeta:h}=d.meta;l[y]?.resolve({data:d.payload,meta:h}),delete l[y]}else if(a(d)){let{requestId:y,rejectedWithValue:h,baseQueryMeta:f}=d.meta;l[y]?.reject({error:d.payload??d.error,isUnhandledError:!h,meta:f}),delete l[y]}}},xb=({reducerPath:e,context:t,api:r,refetchQuery:o,internalState:n})=>{let{removeQueryResult:a}=r.internalActions,u=(m,d)=>{id.match(m)&&l(d,"refetchOnFocus"),cd.match(m)&&l(d,"refetchOnReconnect")};function l(m,d){let p=m.getState()[e],y=p.queries,h=n.currentSubscriptions;t.batch(()=>{for(let f of Object.keys(h)){let S=y[f],R=h[f];if(!R||!S)continue;(Object.values(R).some(A=>A[d]===!0)||Object.values(R).every(A=>A[d]===void 0)&&p.config[d])&&(Nn(R)===0?m.dispatch(a({queryCacheKey:f})):S.status!=="uninitialized"&&m.dispatch(o(S,f)))}})}return u};function Rb(e){let{reducerPath:t,queryThunk:r,api:o,context:n}=e,{apiUid:a}=n,u={invalidateTags:v(`${t}/invalidateTags`)},l=y=>y.type.startsWith(`${t}/`),m=[yb,fb,hb,Sb,gb,Cb];return{middleware:y=>{let h=!1,S={...e,internalState:{currentSubscriptions:{}},refetchQuery:p,isThisApiSliceAction:l},R=m.map(C=>C(S)),P=db(S),A=xb(S);return C=>x=>{if(!yi(x))return C(x);h||(h=!0,y.dispatch(o.internalActions.middlewareRegistered(a)));let F={...y,next:C},I=y.getState(),[O,w]=P(x,F,I),D;if(O?D=C(x):D=w,y.getState()[t]&&(A(x,F,I),l(x)||n.hasRehydrationInfo(x)))for(let M of R)M(x,F,I);return D}},actions:u};function p(y,h,f={}){return r({type:"query",endpointName:y.endpointName,originalArgs:y.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:h,...f})}}var Wy=Symbol(),Fb=({createSelector:e=j}={})=>({name:Wy,init(t,{baseQuery:r,tagTypes:o,reducerPath:n,serializeQueryArgs:a,keepUnusedDataFor:u,refetchOnMountOrArgChange:l,refetchOnFocus:m,refetchOnReconnect:d,invalidationBehavior:p},y){mm();let h=H=>(typeof process<"u",H);Object.assign(t,{reducerPath:n,endpoints:{},internalActions:{onOnline:cd,onOffline:Jy,onFocus:id,onFocusLost:Yy},util:{}});let{queryThunk:f,mutationThunk:S,patchQueryData:R,updateQueryData:P,upsertQueryData:A,prefetch:C,buildMatchThunkActions:x}=cb({baseQuery:r,reducerPath:n,context:y,api:t,serializeQueryArgs:a,assertTagType:h}),{reducer:F,actions:I}=sb({context:y,queryThunk:f,mutationThunk:S,reducerPath:n,assertTagType:h,config:{refetchOnFocus:m,refetchOnReconnect:d,refetchOnMountOrArgChange:l,keepUnusedDataFor:u,reducerPath:n,invalidationBehavior:p}});_r(t.util,{patchQueryData:R,updateQueryData:P,upsertQueryData:A,prefetch:C,resetApiState:I.resetApiState}),_r(t.internalActions,I);let{middleware:O,actions:w}=Rb({reducerPath:n,context:y,queryThunk:f,mutationThunk:S,api:t,assertTagType:h});_r(t.util,w),_r(t,{reducer:F,middleware:O});let{buildQuerySelector:D,buildMutationSelector:M,selectInvalidatedBy:$,selectCachedArgsForQuery:X}=ub({serializeQueryArgs:a,reducerPath:n,createSelector:e});_r(t.util,{selectInvalidatedBy:$,selectCachedArgsForQuery:X});let{buildInitiateQuery:N,buildInitiateMutation:Q,getRunningMutationThunk:L,getRunningMutationsThunk:_,getRunningQueriesThunk:B,getRunningQueryThunk:Y}=ib({queryThunk:f,mutationThunk:S,api:t,serializeQueryArgs:a,context:y});return _r(t.util,{getRunningMutationThunk:L,getRunningMutationsThunk:_,getRunningQueryThunk:Y,getRunningQueriesThunk:B}),{name:Wy,injectEndpoint(H,oe){var le;let se=t;(le=se.endpoints)[H]??(le[H]={}),Xy(oe)?_r(se.endpoints[H],{name:H,select:D(H,oe),initiate:N(H,oe)},x(f,H)):ob(oe)&&_r(se.endpoints[H],{name:H,select:M(),initiate:Q(H)},x(S,H))}}}}),th=lb(Fb());var vb=async(e,t,r)=>{let o=t.getState(),{accessToken:n,environment:a,organizationId:u}=o.configuration,l=o.generatedAnswer.answerConfigurationId,m={...e,headers:{...e?.headers||{},Authorization:`Bearer ${n}`}};try{let d=Ne(u,a);return{data:Ky({baseUrl:`${d}/rest/organizations/${u}/answer/v1/configs/${l}`})(m,t,r)}}catch(d){return{error:d}}},rh=th({reducerPath:"answer",baseQuery:Gy(vb,{maxRetries:3}),endpoints:()=>({})});var Pb=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},Ab=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},bb=(e,t)=>{e.citations=t.citations},Ib=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},wb=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`${t.errorMessage} - code ${t.code}`)},Eb=(e,t)=>{let r=JSON.parse(e.data);r.finishReason==="ERROR"&&r.errorMessage&&wb(t,r);let o=r.payload.length?JSON.parse(r.payload):{};switch(r.payloadType){case"genqa.headerMessageType":o.contentFormat&&Pb(t,o);break;case"genqa.messageType":o.textDelta&&Ab(t,o);break;case"genqa.citationsType":o.citations&&bb(t,o);break;case"genqa.endOfStreamType":(t.answer?.length||o.answerGenerated)&&Ib(t,o);break}},oh=rh.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:o,updateCachedData:n}){await o;let{configuration:a,generatedAnswer:u,insightConfiguration:l}=r(),{organizationId:m,environment:d,accessToken:p}=a,y=Ne(m,d),h=`${y}/rest/organizations/${m}/insight/v1/configs/${l?.insightId}/answer/${u.answerConfigurationId}/generate`,f=`${y}/rest/organizations/${m}/answer/v1/configs/${u.answerConfigurationId}/generate`;await rd(l?h:f,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${p}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch:g,onopen:async S=>{let R=S.headers.get("x-answer-id");R&&n(P=>{P.answerId=R})},onmessage:S=>{n(R=>{Eb(S,R)})},onerror:S=>{throw S}})}})})}),g8=j(e=>ys(e)?.q,e=>e.search.requestId,(e,t)=>({q:e,requestId:t}));s();c();function ud(){return typeof window<"u"&&typeof document<"u"}s();c();function Tb(e){let t=e.payload?.analyticsAction;return nh(e)&&!K(t)}function nh(e){return"type"in e}var ah=e=>t=>r=>{let o;Tb(r)&&(o=r.payload.analyticsAction,delete r.payload.analyticsAction);let n=t(r);return nh(r)&&(r.type==="search/executeSearch/fullfilled"&&o===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&o===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&o===void 0&&console.error("No analytics action associated with product recommendation:",r)),o!==void 0&&e.dispatch(o),n};s();c();s();c();var ph=rt(ch(),1);s();c();var q8=v("tab/register",e=>{let t=new k({values:{id:V,expression:Se}});return b(e,t)}),Ln=v("tab/updateActiveTab",e=>b(e,V));s();c();var Ss=rt(Sc(),1),lh=rt(sh(),1),dh=rt(uh(),1);Ss.default.extend(dh.default);Ss.default.extend(lh.default);var mh=()=>({organizationId:"",accessToken:"",search:{locale:"en-US",timezone:Ss.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"next",source:{}},knowledge:{answerConfigurationId:""},environment:"prod"});var Cs=G(mh(),e=>e.addCase(xa,(t,r)=>{qb(t,r.payload)}).addCase(yp,(t,r)=>{kb(t,r.payload)}).addCase(Gu,(t,r)=>{Vb(t,r.payload)}).addCase(Li,t=>{t.analytics.enabled=!1}).addCase(Qi,t=>{t.analytics.enabled=!0}).addCase(hp,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Sp,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Ln,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Ie,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));function qb(e,t){K(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",K(t.organizationId)||(e.organizationId=t.organizationId)}function kb(e,t){K(t.proxyBaseUrl)||(e.search.apiBaseUrl=t.proxyBaseUrl),K(t.locale)||(e.search.locale=t.locale),K(t.timezone)||(e.search.timezone=t.timezone),K(t.authenticationProviders)||(e.search.authenticationProviders=t.authenticationProviders)}function Vb(e,t){K(t.enabled)||(e.analytics.enabled=t.enabled),K(t.originContext)||(e.analytics.originContext=t.originContext),K(t.originLevel2)||(e.analytics.originLevel2=t.originLevel2),K(t.originLevel3)||(e.analytics.originLevel3=t.originLevel3),K(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),K(t.trackingId)||(e.analytics.trackingId=t.trackingId),K(t.analyticsMode)||(e.analytics.analyticsMode=t.analyticsMode),K(t.source)||(e.analytics.source=t.source);let r=(0,ph.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),K(t.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.runtimeEnvironment),K(t.anonymous)||(e.analytics.anonymous=t.anonymous),K(t.deviceId)||(e.analytics.deviceId=t.deviceId),K(t.userDisplayName)||(e.analytics.userDisplayName=t.userDisplayName),K(t.documentLocation)||(e.analytics.documentLocation=t.documentLocation)}var Ve=Cs;s();c();function Db(e){return e.instantlyCallable}var fh=()=>e=>t=>e(Db(t)?t():t);s();c();var gh=e=>()=>t=>r=>{let o=r;if(!o.error)return t(r);let n=o.error;if(o.payload?.ignored||e.error(n.stack||n.message||n.name||"Error",`Action dispatch error ${o.type}`,r),o.error.name!=="SchemaValidationError")return t(r)},yh=e=>t=>r=>o=>(e.debug({action:o,nextState:t.getState()},`Action dispatched: ${o.type}`),r(o));s();c();var fd=e=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href,clientId:e}),gd=()=>({referrer:null,userAgent:null,location:null,clientId:""});s();c();function hh(e,t){let r={...e},o,n=a=>(u,l)=>{let m=a(u,l);return o?o(m,l):m};return{get combinedReducer(){let a=Ym(Object.entries(t).filter(([u])=>!(u in r)).map(([u,l])=>[u,()=>l]));return n(Po({...a,...r}))},containsAll(a){return Object.keys(a).every(l=>l in r)},add(a){Object.keys(a).filter(u=>!(u in r)).forEach(u=>r[u]=a[u])},addCrossReducer(a){o=a}}}s();c();s();c();function xs(e,t,r){var o,n,a;t===void 0&&(t=50),r===void 0&&(r={});var u=(o=r.isImmediate)!=null&&o,l=(n=r.callback)!=null&&n,m=r.maxWait,d=Date.now(),p=[];function y(){if(m!==void 0){var f=Date.now()-d;if(f+t>=m)return m-f}return t}var h=function(){var f=[].slice.call(arguments),S=this;return new Promise(function(R,P){var A=u&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,d=Date.now(),!u){var x=e.apply(S,f);l&&l(x),p.forEach(function(F){return(0,F.resolve)(x)}),p=[]}},y()),A){var C=e.apply(S,f);return l&&l(C),R(C)}p.push({resolve:R,reject:P})})};return h.cancel=function(f){a!==void 0&&clearTimeout(a),p.forEach(function(S){return(0,S.reject)(f)}),p=[]},h}function Sh(e,t){let r=0,o=xs(()=>r=0,500);return n=>a=>async u=>{if(!(typeof u=="function"))return a(u);let m=await a(u);if(!Nb(m))return m;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),m;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),m;r++,o();let d=await Mb(t);n.dispatch(xa({accessToken:d})),n.dispatch(u)}}function Nb(e){return e?.error?.name===new To().name}async function Mb(e){try{return await e()}catch{return""}}s();c();function Ch({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:o,name:n}){return Pm({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:n,shouldHotReload:!1},middleware:a=>a({thunk:{extraArgument:o}}).prepend(...r).concat(yh(o.logger))})}function xh(e,t,r){let{reducers:o}=e,n=hh({...o,configurationReducer:r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let a=t.logger,u=()=>{let p="";try{p=cn(d.state).getMeta("").clientId}catch(y){a.warn("Error while obtaining clientID from relay",y)}return p},l={...t,get relay(){return cn(d.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():ud()?fd(u()):gd()}},m=Lb(e,l,n),d={addReducers(p){n.containsAll(p)||(n.add(p),m.replaceReducer(n.combinedReducer))},dispatch:m.dispatch,subscribe:m.subscribe,enableAnalytics(){m.dispatch(Qi())},disableAnalytics(){m.dispatch(Li())},get state(){return m.getState()},get relay(){return cn(this.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():ud()?fd(u()):gd()},logger:a,store:m};return d}function Lb(e,t,r){let{preloadedState:o,configuration:n}=e,a=n.name||"coveo-headless",u=Qb(e,t.logger);return Ch({preloadedState:o,reducer:r.combinedReducer,middlewares:u,thunkExtraArguments:t,name:a})}function Qb(e,t){let{renewAccessToken:r}=e.configuration,o=Sh(t,r);return[fh,o,gh(t),ah].concat(oh.middleware,e.middlewares||[])}s();c();var Eh=rt(wh(),1);function Th(e){return(0,Eh.pino)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}s();c();function Oh(e,t){let r=oI(e),o=xe,n=nI(e);return{analyticsClientMiddleware:r,validatePayload:o,preprocessRequest:n,logger:t}}function oI(e){let{analytics:t}=e,r=(o,n)=>n;return t?.analyticsClientMiddleware||r}function nI(e){return e.preprocessRequest||Mi}s();c();s();c();var qh={organizationId:V,accessToken:V,name:new T({required:!1,emptyAllowed:!1}),analytics:new k({options:{required:!1},values:{enabled:new W({required:!1}),originContext:new T({required:!1}),originLevel2:new T({required:!1}),originLevel3:new T({required:!1}),analyticsMode:new T({constrainTo:["legacy","next"],required:!1,default:"next"}),proxyBaseUrl:new T({required:!1,url:!0})}}),environment:new T({required:!1,default:"prod",constrainTo:["prod","hipaa","stg","dev"]})};var kh=new ne({...qh,analytics:new k({options:{required:!0},values:{enabled:new W({required:!1,default:!0}),proxyBaseUrl:new T({required:!1,url:!0}),source:new k({options:{required:!1},values:{"@coveo/atomic":pe,"@coveo/quantic":pe}}),trackingId:V}}),context:new k({options:{required:!0},values:Ra}),cart:new k({values:Zu}),proxyBaseUrl:new T({required:!1,url:!0})});function Vh(){return{accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",analytics:{trackingId:"sports-ui-samples"},context:{language:"en",country:"US",currency:"USD",view:{url:"https://sports.barca.group"}},cart:{items:[{productId:"SP01057_00001",quantity:1,name:"Kayaker Canoe",price:800},{productId:"SP00081_00001",quantity:1,name:"Bamboo Canoe Paddle",price:120},{productId:"SP04236_00005",quantity:1,name:"Eco-Brave Rashguard",price:33},{productId:"SP04236_00005",quantity:1,name:"Eco-Brave Rashguard",price:33}]},organizationId:"searchuisamples"}}var aI={productListing:On,recommendations:qn,commerceSearch:Lt,commercePagination:Mt,commerceSort:Qt,facetOrder:Ut,fieldSuggestionsOrder:Nr,facetSearchSet:Dn,categoryFacetSearchSet:Vn,commerceFacetSet:me,manualNumericFacetSet:is,commerceContext:vt,commerceQuery:Ke,cart:jo,didYouMean:Ki,triggers:Bt};function Dh(e){let t=Th(e.loggerOptions),{configuration:r}=e;iI(r,t);let o=cI(r,t),n={...Oh(r,t),apiClient:o},a={...aI,configuration:Yu,version:ed},u={...e,reducers:a},l=xh(u,n,Yu),{state:m,...d}=l,{accessToken:p,environment:y,organizationId:h,analytics:f,proxyBaseUrl:S,context:R,cart:P}=r;return d.dispatch(No({accessToken:p,environment:y,organizationId:h})),d.dispatch(Lo(f)),S!==void 0&&d.dispatch(Mo({proxyBaseUrl:S})),d.dispatch(ye(R)),P?.items!==void 0&&d.dispatch(gr(P.items)),Yd({...d,get[z](){return l.state},get configuration(){return{...l.state.configuration}}})}function iI(e,t){try{kh.validate(e)}catch(r){throw t.error("Commerce engine configuration error",r),r}}function cI(e,t){return new Ni({logger:t,preprocessRequest:e.preprocessRequest||Mi})}s();c();function sI(e){return e.addReducers({commerceContext:vt}),{setContext:ye,setView:Ce,setLocation:_o}}s();c();function uI(e){return e.addReducers({commerceSearch:Lt}),{executeSearch:ie,fetchMoreProducts:Cr,prepareForSearchWithQuery:Go,promoteChildToParent:Jo}}s();c();function lI(e){return e.addReducers({productListing:On}),{fetchProductListing:he,fetchMoreProducts:kr,promoteChildToParent:An}}s();c();function dI(e){return e.addReducers({recommendations:qn}),{fetchRecommendations:St,fetchMoreRecommendations:Mr,promoteChildToParent:Tn,registerRecommendationsSlot:En}}s();c();function mI(e){return e.addReducers({commercePagination:Mt}),{registerRecommendationsSlotPagination:Ho,setPageSize:so,selectPage:hr,nextPage:zo,previousPage:Wo}}s();c();s();c();var As=J("commerce/product/view",async(e,{extra:t,getState:r})=>{let{relay:o}=t,a={currency:Qo(r().commerceContext),product:e};o.emit("ec.productView",a)}),bs=J("commerce/product/click",async(e,{extra:t,getState:r})=>{let{relay:o}=t,a={currency:Qo(r().commerceContext),...e};o.emit("ec.productClick",a)});function pI(){return{productClick:bs,productView:As}}s();c();function fI(e){return e.addReducers({cart:jo}),{emitPurchaseEvent:ji,emitCartActionEvent:_i,purchase:Uo,setItems:gr,updateItemQuantity:Bo}}s();c();function gI(e){return e.addReducers({commerceSort:Qt}),{applySort:cr}}s();c();function yI(e){return e.addReducers({commerceFacetSet:me}),{clearAllCoreFacets:_e,deselectAllValuesInCoreFacet:$e,updateAutoSelectionForAllCoreFacets:$o,updateCoreFacetFreezeCurrentValues:co,updateCoreFacetIsFieldExpanded:io,updateCoreFacetNumberOfValues:ao}}s();c();function hI(e){return e.addReducers({commerceFacetSet:me}),{toggleSelectCategoryFacetValue:Dr,updateCategoryFacetNumberOfValues:go}}s();c();function SI(e){return e.addReducers({commerceFacetSet:me}),{toggleExcludeFacetValue:Dt,toggleSelectFacetValue:Nt}}s();c();function CI(e){return e.addReducers({commerceFacetSet:me}),{toggleSelectLocationFacetValue:Vt}}s();c();function xI(e){return e.addReducers({commerceFacetSet:me}),{toggleSelectDateFacetValue:qt,toggleExcludeDateFacetValue:kt,updateDateFacetValues:In}}s();c();function RI(e){return e.addReducers({commerceFacetSet:me}),{toggleSelectNumericFacetValue:dt,toggleExcludeNumericFacetValue:mt,updateNumericFacetValues:rs}}s();c();s();c();s();c();s();c();var oi={id:V,query:Se},xd=v("querySet/register",e=>b(e,oi)),Rd=v("querySet/update",e=>b(e,oi));var Qn=v("commerce/querySet/register",e=>b(e,oi)),So=v("commerce/querySet/update",e=>b(e,oi));s();c();var ni={id:V},Fd=v("querySuggest/register",e=>b(e,{...ni,count:new U({min:0})})),Nh=v("querySuggest/unregister",e=>b(e,ni)),ai=v("querySuggest/selectSuggestion",e=>b(e,{...ni,expression:Se})),vd=v("querySuggest/clear",e=>b(e,ni)),Is=J("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,validatePayload:n,navigatorContext:a}})=>{n(e,ni);let u=e.id,l=await FI(u,t(),a),m=await o.querySuggest(l);return st(m)?r(m.error):{id:u,q:l.q,...m.success}}),FI=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl??nt(t.configuration.organizationId,t.configuration.environment),count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?bt.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await gn(t.configuration.analytics):fn(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var Co=G(bc(),e=>{e.addCase(xd,(t,r)=>Lh(t,r.payload)).addCase(Qn,(t,r)=>Lh(t,r.payload)).addCase(Rd,(t,r)=>{let{id:o,query:n}=r.payload;ii(t,o,n)}).addCase(So,(t,r)=>{let{id:o,query:n}=r.payload;ii(t,o,n)}).addCase(ai,(t,r)=>{let{id:o,expression:n}=r.payload;ii(t,o,n)}).addCase(Ot,(t,r)=>{let{id:o,expression:n}=r.payload;ii(t,o,n)}).addCase(ie.fulfilled,(t,r)=>{let{queryExecuted:o}=r.payload;Pd(t,o)}).addCase(ge.fulfilled,(t,r)=>{let{queryExecuted:o}=r.payload;Pd(t,o)}).addCase(Ie,Mh).addCase(Pe,Mh).addCase(ve.fulfilled,(t,r)=>{if(r.payload)for(let[o,n]of Object.entries(r.payload.querySet))ii(t,o,n)})});function Mh(e,t){K(t.payload.q)||Pd(e,t.payload.q)}function Pd(e,t){Object.keys(e).forEach(r=>e[r]=t)}var ii=(e,t,r)=>{t in e&&(e[t]=r)},Lh=(e,t)=>{let{id:r,query:o}=t;r in e||(e[r]=o)};function vI(e){return e.addReducers({querySetReducer:Co}),{registerQuerySetQuery:Qn,updateQuerySetQuery:So}}s();c();s();c();s();c();var Qh=()=>({});var xo=G(Qh(),e=>e.addCase(Fd,(t,r)=>{Bh(t,r.payload)}).addCase(bn,(t,r)=>{Bh(t,r.payload)}).addCase(Nh,(t,r)=>{delete t[r.payload.id]}).addCase(Is.pending,Uh).addCase(Is.fulfilled,(t,r)=>{let o=t[r.meta.arg.id];if(!o||r.meta.requestId!==o.currentRequestId)return;let{q:n}=r.payload;n&&o.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),o.responseId=r.payload.responseId,o.completions=r.payload.completions,o.isLoading=!1,o.error=null}).addCase(Is.rejected,jh).addCase(ke.pending,Uh).addCase(ke.fulfilled,(t,r)=>{let o=t[r.meta.arg.id];if(!o||r.meta.requestId!==o.currentRequestId)return;let{query:n}=r.payload;n&&o.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),o.responseId=r.payload.responseId,o.completions=r.payload.completions.map(a=>({expression:a.expression,highlighted:a.highlighted,score:0,executableConfidence:0})),o.isLoading=!1,o.error=null}).addCase(ke.rejected,jh).addCase(vd,(t,r)=>{_h(t,r.payload)}).addCase(Vr,(t,r)=>{_h(t,r.payload)}));function Bh(e,t){let r=t.id;r in e||(e[r]=PI(t))}function PI(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function Uh(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function jh(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function _h(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}function AI(e){return e.addReducers({querySuggest:xo}),{clearQuerySuggest:Vr,fetchQuerySuggestions:ke,registerQuerySuggest:bn,selectQuerySuggestion:Ot}}s();c();function bI(e){return e.addReducers({configuration:Cs}),{disableAnalytics:Bi,enableAnalytics:Ui,updateAnalyticsConfiguration:Lo,updateBasicConfiguration:No,updateProxyBaseUrl:Mo}}s();c();function II(e){return e.addReducers({query:Ke}),{updateQuery:it}}s();c();function wI(e){return e.addReducers({facetOrder:Ut,commerceFacetSet:me,commercePagination:Mt,query:Ke,querySet:Co,commerceSort:Qt}),{restoreSearchParameters:Pe}}s();c();function EI(e){return e.addReducers({facetOrder:Ut,commerceFacetSet:me,commercePagination:Mt,commerceSort:Qt}),{restoreProductListingParameters:We}}s();c();function TI(e){return e.addReducers({triggers:Bt}),{updateIgnoreQueryTrigger:Sr,applyQueryTriggerModification:Ko}}s();c();s();c();var Ad={id:V},$h={...Ad,query:Se},Bn=v("commerce/instantProducts/clearExpired",e=>b(e,Ad)),OI={child:new k({options:{required:!0},values:{permanentid:new T({required:!0})}}),...$h},Un=v("commerce/instantProducts/promoteChildToParent",e=>b(e,OI)),jn=v("commerce/instantProducts/register",e=>b(e,Ad)),_n=v("commerce/instantProducts/updateQuery",e=>b(e,$h));s();c();s();c();s();c();function ws(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}var zh=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},Wh=(e,t)=>{let{q:r,id:o}=e;r&&(t[o].q=r)},Hh=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach(([o,n])=>{ws(n)&&delete t[r].cache[o]})},Kh=(e,t,r)=>{for(let n in t)for(let a in t[n].cache)t[n].cache[a].isActive=!1;if(!bd(e,t)){qI(e,t,r);return}let o=bd(e,t);o.isLoading=!0,o.isActive=!0,o.error=null},Gh=(e,t,r)=>{let{id:o,q:n,searchUid:a,cacheTimeout:u,totalCountFiltered:l,duration:m}=e;t[o].cache[n]={...bd(e,t),...r,isActive:!0,searchUid:a,isLoading:!1,error:null,expiresAt:u?u+Date.now():0,totalCountFiltered:l,duration:m}},Yh=(e,t)=>{let{id:r,q:o,error:n}=e;t[r].cache[o].error=n||null,t[r].cache[o].isLoading=!1,t[r].cache[o].isActive=!1},bd=(e,t)=>{let{q:r,id:o}=e;return t[o].cache[r]||null},qI=(e,t,r)=>{let{q:o,id:n}=e;t[n].cache[o]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};s();c();function Jh(){return{}}var Es=G(Jh(),e=>{e.addCase(jn,(t,r)=>{zh(r.payload,t)}).addCase(_n,(t,r)=>{Wh({...r.payload,q:r.payload.query},t)}).addCase(Bn,(t,r)=>{Hh(r.payload,t)}).addCase(Yo.pending,(t,r)=>{Kh(r.meta.arg,t,{products:[]})}).addCase(Yo.fulfilled,(t,r)=>{let{response:{products:o,responseId:n,pagination:{totalEntries:a}}}=r.payload;Gh({duration:0,searchUid:n,totalCountFiltered:a,...r.meta.arg},t,{products:o.map((u,l)=>kI(u,l+1))})}).addCase(Yo.rejected,(t,r)=>{Yh(r.meta.arg,t)}).addCase(Un,(t,r)=>{let o=t[r.payload.id].cache[r.payload.query];if(!o)return;let n=o.products,a,u=n.findIndex(h=>(a=h.children.find(f=>f.permanentid===r.payload.child.permanentid),!!a));if(u===-1||a===void 0)return;let l=n[u].position,{children:m,totalNumberOfChildren:d}=n[u],p={...a,children:m,totalNumberOfChildren:d,position:l},y=[...n];y.splice(u,1,p),o.products=y})});function kI(e,t){let r=e.children.some(u=>u.permanentid===e.permanentid);if(e.children.length===0||r)return{...e,position:t};let{children:o,totalNumberOfChildren:n,...a}=e;return{...e,children:[a,...o],position:t}}function VI(e){return e.addReducers({instantProducts:Es}),{clearExpiredProducts:Bn,promoteChildToParent:Un,registerInstantProducts:jn,updateInstantProductsQuery:_n}}s();c();s();c();var Id={queries:new ee({required:!0,each:new T({emptyAllowed:!1})}),maxLength:new U({required:!0,min:1,default:10})},Ts=v("recentQueries/registerRecentQueries",e=>b(e,Id)),Os=v("recentQueries/clearRecentQueries");s();c();s();c();s();c();function qs(){return{queries:[],maxLength:10}}var Lre=G(qs(),e=>{e.addCase(Ts,wd).addCase(Os,Ed).addCase(ge.fulfilled,(t,r)=>{let o=r.payload.queryExecuted.trim(),n=r.payload.response.results;!o.length||!n.length||Td(o,t)})});function wd(e,t){e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function Ed(e){e.queries=[]}function Td(e,t){t.queries=t.queries.filter(o=>o!==e);let r=t.queries.slice(0,t.maxLength-1);t.queries=[e,...r]}s();c();var ks=v("commerce/recentQueries/clear"),Vs=v("commerce/recentQueries/register",e=>b(e,Id));var Ds=G(qs(),e=>{e.addCase(Vs,wd).addCase(ks,Ed).addCase(ie.fulfilled,(t,r)=>{let o=r.payload.queryExecuted?.trim()||"",n=r.payload.response.products;!o.length||!n.length||Td(o,t)})});function DI(e){return e.addReducers({recentQueries:Ds}),{registerRecentQueries:Ts,clearRecentQueries:Os}}s();c();s();c();s();c();s();c();s();c();function Ns(e){return e.type==="redirect"}var Ms=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(Ns);return t.length?t[0].content:null}};var Xh=v("standaloneSearchBox/register",e=>b(e,{id:V,redirectionUrl:V,overwrite:new W({required:!1})})),Zh=v("standaloneSearchBox/updateRedirectionUrl",e=>b(e,{id:V,redirectionUrl:V})),eS=v("standaloneSearchBox/reset",e=>b(e,{id:V})),tS=v("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>b(e,{id:V})),rS=v("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Ls=J("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:o,extra:{apiClient:n,validatePayload:a,navigatorContext:u}})=>{a(e,{id:new T({emptyAllowed:!1})});let l=await MI(r(),u),m=await n.plan(l);if(st(m))return o(m.error);let{redirectionUrl:d}=new Ms(m.success);return d&&t(NI(d)),d||""}),NI=e=>Ee("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),MI=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??nt(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&e.configuration.analytics.analyticsMode==="legacy"?await gn(e.configuration.analytics):fn(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});s();c();function oS(){return{}}var nS=G(oS(),e=>e.addCase(Xh,(t,r)=>{let{id:o,redirectionUrl:n,overwrite:a}=r.payload;!a&&o in t||(t[o]=Od(n))}).addCase(eS,(t,r)=>{let{id:o}=r.payload,n=t[o];if(n){t[o]=Od(n.defaultRedirectionUrl);return}}).addCase(Zh,(t,r)=>{let{id:o,redirectionUrl:n}=r.payload;o in t&&(t[o]=Od(n))}).addCase(Ls.pending,(t,r)=>{let o=t[r.meta.arg.id];o&&(o.isLoading=!0)}).addCase(Ls.fulfilled,(t,r)=>{let o=r.payload,n=t[r.meta.arg.id];n&&(n.redirectTo=o||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(Ls.rejected,(t,r)=>{let o=t[r.meta.arg.id];o&&(o.isLoading=!1)}).addCase(tS,(t,r)=>{let o=t[r.payload.id];o&&(o.analytics.cause="searchFromLink")}).addCase(rS,(t,r)=>{let o=t[r.payload.id];o&&(o.analytics.cause="omniboxFromLink",o.analytics.metadata=r.payload.metadata)}));function Od(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}s();c();var $r=J("commerce/standaloneSearchBox/fetchRedirect",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{b(e,{id:new T({emptyAllowed:!1})});let a=t(),u=LI(a,n),l=await o.plan(u);if(Te(l))return r(l.error);let m=l.success.triggers.filter(Ns);return m.length?m[0].content:""}),$n=v("commerce/standaloneSearchBox/register",e=>b(e,{id:V,redirectionUrl:V,overwrite:new W({required:!1})})),zn=v("commerce/standaloneSearchBox/updateRedirectionUrl",e=>b(e,{id:V,redirectionUrl:V})),Wn=v("commerce/standaloneSearchBox/reset",e=>b(e,{id:V})),LI=(e,t)=>({query:e.commerceQuery.query,...Fa(e,t)});function QI(e){return e.addReducers({standaloneSearchBoxSet:nS}),{fetchRedirectUrl:$r,registerStandaloneSearchBox:$n,updateStandaloneSearchBoxRedirectionUrl:zn,resetStandaloneSearchBox:Wn}}s();c();function aS(e,t={}){if(!BI(e))throw Z;let r=te(e),{dispatch:o}=e,n=()=>e[z];return t.options&&(Le(e,Tp,t.options,"buildContext"),o(ye(t.options))),{...r,get state(){return n().commerceContext},setLanguage:a=>o(ye({...n().commerceContext,language:a})),setCountry:a=>o(ye({...n().commerceContext,country:a})),setCurrency:a=>o(ye({...n().commerceContext,currency:a})),setView:a=>o(Ce(a)),setLocation:a=>o(_o(a))}}function BI(e){return e.addReducers({commerceContext:vt}),!0}s();c();s();c();s();c();s();c();s();c();s();c();s();c();s();c();s();c();var Qs=(e,t)=>({...e}&&Object.keys({...e}).length===0)||!t||!e?!0:e.excluded&&e.excluded.includes(t)?!1:!!(e.included&&(e.included.length===0||e.included.includes(t)));var iS=G(Ac(),e=>{e.addCase(Xt,(t,r)=>({...t,...r.payload})).addCase(ge.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(ge.rejected,t=>{t.freezeFacetOrder=!1}).addCase(Ln,(t,r)=>{for(let o in t.facets){let n=t.facets[o];Object.keys({...n.tabs}).length>0&&(n.enabled=Qs(n.tabs,r.payload))}}).addCase(ve.fulfilled,(t,r)=>r.payload?.facetOptions??t).addCase(kp,(t,r)=>{let{facetId:o,tabs:n,activeTab:a}=r.payload;Bs(n,a,t,o)}).addCase(Qc,(t,r)=>{let{facetId:o,tabs:n,activeTab:a}=r.payload;Bs(n,a,t,o)}).addCase($a,(t,r)=>{let{facetId:o,tabs:n,activeTab:a}=r.payload;Bs(n,a,t,o)}).addCase(Wa,(t,r)=>{let{facetId:o,tabs:n,activeTab:a}=r.payload;Bs(n,a,t,o)}).addCase(rl,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(Zt,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(Ie,(t,r)=>{r.payload.tab&&Object.entries(t.facets).forEach(([,o])=>{Object.keys(o.tabs??{}).length>0&&(o.enabled=Qs(o.tabs,r.payload.tab))}),[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(o=>{o in t||(t.facets[o]=Ml()),t.facets[o].enabled=!0})})});function Bs(e,t,r,o){let n={...Ml(),tabs:e??{}};e&&Object.keys(e).length>0&&(n.enabled=Qs(e,t)),r.facets[o]=n}s();c();s();c();var Us=v("rangeFacet/executeToggleSelect",e=>b(e,$l(e.selection))),js=v("rangeFacet/executeToggleExclude",e=>b(e,$l(e.selection)));var cS={facetId:re,selection:new k({values:ht})},KI=J("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,cS),t(xn(e)),t(Us(e)),t(Xt())}),GI=J("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,cS),t(Rn(e)),t(js(e)),t(Xt())});s();c();function qd(e,t){let r=t.payload??null;r&&(e.response=et().response,e.results=[],e.questionAnswer=ka()),e.error=r,e.isLoading=!1}function Vd(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function YI(e,t){Vd(e,t),e.results=t.payload.response.results.map(r=>({...r,searchUid:t.payload.response.searchUid})),e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function kd(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var _s=G(et(),e=>{e.addCase(Ec.rejected,(t,r)=>qd(t,r)),e.addCase(Oc.rejected,(t,r)=>qd(t,r)),e.addCase(Tc.rejected,(t,r)=>qd(t,r)),e.addCase(Ec.fulfilled,(t,r)=>{YI(t,r)}),e.addCase(Oc.fulfilled,(t,r)=>{Vd(t,r),t.results=[...t.results,...r.payload.response.results.map(o=>({...o,searchUid:r.payload.response.searchUid}))]}),e.addCase(Tc.fulfilled,(t,r)=>{Vd(t,r),t.results=r.payload.response.results}),e.addCase(ag.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(Ec.pending,kd),e.addCase(Oc.pending,kd),e.addCase(Tc.pending,kd)});s();c();var sS=j(e=>e,e=>{if(!e)return"";for(let t in e)if(e[t].isActive)return e[t].id;return""});s();c();s();c();s();c();s();c();s();c();s();c();var $s=["idle","selected","excluded"];s();c();var zs=["ascending","descending"],Ws=["even","equiprobable"];var JI={start:new T,end:new T,endInclusive:new W,state:new T({constrainTo:$s})},pie=new ne({facetId:Vc,field:Dc,tabs:new k({options:{required:!1},values:{included:new ee({each:new T}),excluded:new ee({each:new T})}}),generateAutomaticRanges:Lc,filterFacetCount:Nc,injectionDepth:Mc,numberOfValues:Ba,currentValues:new ee({each:new k({values:JI})}),sortCriteria:new T({constrainTo:zs}),rangeAlgorithm:new T({constrainTo:Ws})});s();c();s();c();s();c();var dS={facetId:re,selection:new k({values:fo})},aw=J("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,dS),t(Fn(e)),t(Us(e)),t(Xt())}),ace=J("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,dS),t(vn(e)),t(js(e)),t(Xt())});s();c();s();c();var mS=["allValues","atLeastOneValue"];var iw={start:new U,end:new U,endInclusive:new W,state:new T({constrainTo:$s})},vce=new ne({facetId:Vc,tabs:new k({options:{required:!1},values:{included:new ee({each:new T}),excluded:new ee({each:new T})}}),field:Dc,generateAutomaticRanges:Lc,filterFacetCount:Nc,injectionDepth:Mc,numberOfValues:Ba,currentValues:new ee({each:new k({values:iw})}),sortCriteria:new T({constrainTo:zs}),resultsMustMatch:new T({constrainTo:mS}),rangeAlgorithm:new T({constrainTo:Ws})});s();c();function Hs(e){return{endInclusive:!1,state:"idle",...e}}var fS="..",Dd="...",cw=/^(f|fExcluded|cf|nf|df|sf|af|mnf)-(.+)$/,sw={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0,mnf:!0},si="&",ci="=";function uw(e){return e in sw}function gS(e){let r=e in{nf:!0,df:!0,mnf:!0};return uw(e)&&r}var yS=e=>t=>Object.entries(t).map(e).filter(r=>r).join(si);function Nd(e,t){return`${e}${ci}${encodeURIComponent(t)}`}function hS(e){return Hn(e)?CS(e,r=>typeof r=="string"):!1}function SS(e){return Hn(e)?CS(e,r=>Hn(r)&&"start"in r&&"end"in r):!1}function Hn(e){return!!(e&&typeof e=="object")}function CS(e,t){return Object.entries(e).filter(o=>{let n=o[1];return!Array.isArray(n)||!n.every(t)}).length===0}function xS(e,t){return Object.entries(t).map(([r,o])=>`${e}-${r}${ci}${o.map(n=>encodeURIComponent(n)).join(",")}`).join(si)}function RS(e,t){return Object.entries(t).map(([r,o])=>{let n=o.map(({start:a,end:u,endInclusive:l})=>`${a}${l?Dd:fS}${u}`).join(",");return`${e}-${r}${ci}${n}`}).join(si)}function FS(e){let[t,...r]=e.split(ci),o=r.join(ci);return[t,o]}function vS(e,t=cw){let[r,o]=e,n=t.exec(r);if(!n)return e;let a=n[1],u=n[2],l=o.split(","),m=lw(a,l),d={[u]:m};return[a,JSON.stringify(d)]}function lw(e,t){return e==="nf"||e==="mnf"?dw(t):e==="df"?mw(t):t}function dw(e){return e.map(t=>{let{startAsString:r,endAsString:o,isEndInclusive:n}=AS(t);return{start:parseFloat(r),end:parseFloat(o),endInclusive:n}}).filter(({start:t,end:r})=>Number.isFinite(t)&&Number.isFinite(r)).map(({start:t,end:r,endInclusive:o})=>Hs({start:t,end:r,state:"selected",endInclusive:o}))}function pS(e){try{return Lf(e)?(Rc(e,xc),!0):wt(e)?(Pr(e),!0):!1}catch{return!1}}function mw(e){return e.map(t=>{let{isEndInclusive:r,startAsString:o,endAsString:n}=AS(t);return{start:o,end:n,endInclusive:r}}).filter(({start:t,end:r})=>pS(t)&&pS(r)).map(({start:t,end:r,endInclusive:o})=>nr({start:t,end:r,state:"selected",endInclusive:o}))}function PS(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(o=>{let[n,a]=o;r[n]=a.map(u=>pi(u)?decodeURIComponent(u):u)}),r}function AS(e){let t=e.indexOf(Dd)!==-1,[r,o]=e.split(t?Dd:fS);return{isEndInclusive:t,startAsString:r,endAsString:o}}var bS=" ",IS=",",pw=/^(f|fExcluded|cf|nf|df|sf|af|mnf|lf)-(.+)$/,wS={serialize:TS,deserialize:qS},ES={serialize:TS,deserialize:qS},fw={f:!0,lf:!0,cf:!0,nf:!0,df:!0,mnf:!0};function TS(e){return yS(gw)(e)}function gw(e){let[t,r]=e;return OS(t)?t==="sortCriteria"?Sw(r)?yw(t,r):"":Ks(t)&&!gS(t)?hS(r)?xS(t,r):"":t==="nf"||t==="df"||t==="mnf"?SS(r)?RS(t,r):"":Nd(t,r):""}function yw(e,t){return Nd(e,hw(t))}function hw(e){return e?e.by==="relevance"?"relevance":e.fields.map(t=>`${t.name}${bS}${t.direction}`).join(IS):""}function OS(e){return Cw(e)||Ks(e)}function Sw(e){return!Hn(e)||!("by"in e)?!1:e.by==="relevance"?!0:e.by==="fields"&&"fields"in e&&Gm(e.fields)?e.fields.every(t=>Hn(t)&&"name"in t&&typeof t.name=="string"&&("direction"in t&&(t.direction==="asc"||t.direction==="desc")||!("direction"in t))):!1}function Cw(e){return e in{q:!0,sortCriteria:!0,page:!0,perPage:!0}}function qS(e){return e.split(si).map(FS).map(o=>vS(o,pw)).filter(xw).map(Rw).reduce((o,n)=>{let[a,u]=n;if(Ks(a)){let l={...o[a],...u};return{...o,[a]:l}}if(a==="sortCriteria"){let l=Fw(u);return{...o,[a]:l}}return{...o,[a]:u}},{})}function Ks(e){return e in fw}function xw(e){let t=OS(e[0]),r=e.length===2;return t&&r}function Rw(e){let[t,r]=e;return t==="page"||t==="perPage"?[t,parseInt(r)]:Ks(t)?[t,PS(r)]:[t,decodeURIComponent(r)]}function Fw(e){if(e==="relevance")return gt();let t=e.split(IS);if(t.length)return t.reduce((r,o)=>{let n=o.trim().split(bS);if(n.length!==2)return r;let a=n[0].toLowerCase(),u=n[1].toLowerCase();return{...r,fields:[...r.fields,{name:a,direction:u}]}},da([]))}s();c();s();c();function kS(e){if(!vw(e))throw Z;let t=te(e),r=()=>e[z].didYouMean;return{...t,get state(){let o=r();return{originalQuery:o.originalQuery,wasCorrectedTo:o.wasCorrectedTo,queryCorrection:o.queryCorrection,hasQueryCorrection:o.queryCorrection.correctedQuery!=="",wasAutomaticallyCorrected:o.wasCorrectedTo!==""}}}}function vw(e){return e.addReducers({didYouMean:Ki}),!0}s();c();var Md={regular:{toggleSelectActionCreator:Nt,toggleExcludeActionCreator:Dt},numericalRange:{toggleSelectActionCreator:dt,toggleExcludeActionCreator:mt},dateRange:{toggleSelectActionCreator:qt,toggleExcludeActionCreator:kt},location:{toggleSelectActionCreator:Vt},hierarchical:{toggleSelectActionCreator:$e}};function VS(e,t){if(!Pw(e))throw Z;let r=te(e),{dispatch:o}=e,n=d=>({facetId:d.facetId,facetDisplayName:d.displayName,field:d.field,type:d.type,values:d.type==="hierarchical"?u(d):a(d)}),a=d=>d.values.filter(p=>p.state!=="idle").map(p=>({value:p,deselect:()=>{p.state==="selected"?(o(Md[d.type].toggleSelectActionCreator({facetId:d.facetId,selection:p})),d.type!=="location"&&o(co({facetId:d.facetId,freezeCurrentValues:!1})),o(t.fetchProductsActionCreator())):p.state==="excluded"&&d.type!=="location"&&(o(Md[d.type].toggleExcludeActionCreator({facetId:d.facetId,selection:p})),o(co({facetId:d.facetId,freezeCurrentValues:!1})),o(t.fetchProductsActionCreator()))}})),u=d=>{let p=Ft(d.values),y=p.length>0?p[p.length-1]:void 0;return y===void 0?[]:[{value:y,deselect:()=>{o(Md.hierarchical.toggleSelectActionCreator({facetId:d.facetId})),o(t.fetchProductsActionCreator())}}]},l=d=>!d||d.values.length===0?!1:d.type==="hierarchical"?Ft(d.values).length>0:d.values.some(p=>p.state!=="idle"),m=j(d=>d.facetOrder,d=>{let p=d.flatMap(y=>{let h=t.facetResponseSelector(e[z],y);return l(h)?[n(h)]:[]});return{facetBreadcrumbs:p,hasBreadcrumbs:p.length>0}});return{...r,deselectAll:()=>{o(_e()),o(t.fetchProductsActionCreator())},get state(){return m(e[z])}}}function Pw(e){return e.addReducers({facetOrder:Ut,commerceFacetSet:me}),!0}s();c();s();c();var DS=j((e,t)=>({facetSearchSelector:e.categoryFacetSearchSet[t]}),({facetSearchSelector:e})=>e);s();c();s();c();var NS=j((e,t)=>({facetRequestSelector:e.commerceFacetSet[t]}),({facetRequestSelector:e})=>e?.request);function jt(e,t){if(!Aw(e))throw Z;let{dispatch:r}=e,o=te(e),n=t.options.facetId,a=()=>e[z],u=()=>NS(a(),n),l=()=>t.options.facetResponseSelector(a(),n),m=()=>t.options.isFacetLoadingResponseSelector(a()),d=()=>u()?.values?.filter(p=>p.state!=="idle").length??0;return{...o,toggleSelect:p=>{r(t.options.toggleSelectActionCreator({selection:p,facetId:n,..."retrieveCount"in p?{retrieveCount:p.retrieveCount}:{}})),r(t.options.fetchProductsActionCreator())},toggleExclude:p=>{if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleExclude had no effect.");return}r(t.options.toggleExcludeActionCreator({selection:p,facetId:n})),r(t.options.fetchProductsActionCreator())},toggleSingleSelect:function(p){p.state==="idle"&&r($e({facetId:n})),this.toggleSelect(p)},toggleSingleExclude:function(p){if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleSingleExclude had no effect.");return}p.state==="idle"&&r($e({facetId:n})),this.toggleExclude(p)},isValueSelected:p=>p.state==="selected",isValueExcluded:p=>p.state==="excluded",deselectAll(){r($e({facetId:n})),r(t.options.fetchProductsActionCreator())},showMoreValues(){let p=u()?.numberOfValues??0,y=u()?.initialNumberOfValues??0,h=y-p%y,f=p+h;r(ao({facetId:n,numberOfValues:f})),r(io({facetId:n,isFieldExpanded:!0})),r(t.options.fetchProductsActionCreator())},showLessValues(){let p=u()?.initialNumberOfValues??0,y=Math.max(p,d());r(ao({facetId:n,numberOfValues:y})),r(io({facetId:n,isFieldExpanded:!1})),r(t.options.fetchProductsActionCreator())},get state(){return Iw(n,u(),l(),m())}}}function Aw(e){return e.addReducers({commerceFacetSet:me}),!0}var bw=e=>{if(!e)return!1;let t=e.initialNumberOfValues,r=!!e.values.find(o=>o.state==="idle");return(t??0)<(e.numberOfValues??0)&&r},Iw=(e,t,r,o)=>({canShowLessValues:bw(t),canShowMoreValues:r?.moreValuesAvailable??!1,displayName:r?.displayName??"",facetId:e,field:r?.field??"",hasActiveValues:!r||r.type==="hierarchical"?!1:r.values.some(n=>n.state!=="idle"),isLoading:o,type:r?.type??"regular",values:r?.values?r.values:[]});s();c();s();c();s();c();function Gs(e,t){let r=e.dispatch,{options:o,getFacetSearch:n,executeFacetSearchActionCreator:a,executeFieldSuggestActionCreator:u}=t,{facetId:l}=o;return{updateText(m){r(xr({facetId:l,query:m,numberOfValues:n().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:m,options:d}=n();r(xr({facetId:l,numberOfValues:d.numberOfValues+m})),r(t.isForFieldSuggestions?u(l):a(l))},search(){r(t.isForFieldSuggestions?u(l):a(l))},clear(){r(kn({facetId:l}))},updateCaptions(m){r(xr({facetId:l,captions:m}))},get state(){let{response:m,isLoading:d,options:p}=n(),{query:y}=p,h=m.values;return{...m,values:h,isLoading:d,query:y}}}}function MS(e,t){let{dispatch:r}=e,o={...Lr,...t.options},{facetId:n}=o,a=()=>"state"in e?e.state.categoryFacetSearchSet[n]:e[z].categoryFacetSearchSet[n];r(Gi(o));let u=Gs(e,{options:o,getFacetSearch:a,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...u,select(l){r(en({facetId:n,value:l})),t.select(l)},get state(){return u.state}}}function Ys(e,t){if(!ww(e))throw Z;let{showMoreResults:r,state:o,updateCaptions:n,...a}=MS(e,{...t,executeFacetSearchActionCreator:u=>lt({facetId:u,facetSearchType:t.options.type}),executeFieldSuggestActionCreator:u=>He({facetId:u,facetSearchType:t.options.type})});return a}function ww(e){return e.addReducers({categoryFacetSearchSet:Vn}),!0}function LS(e,t){let r=jt(e,{options:{...t,toggleSelectActionCreator:Dr}}),{deselectAll:o,isValueSelected:n,subscribe:a,toggleSelect:u}=r,{dispatch:l}=e,m=()=>r.state.facetId,d=Ys(e,{options:{facetId:m(),...t.facetSearch},select:()=>{l(t.fetchProductsActionCreator())},isForFieldSuggestions:!1});return{deselectAll:o,isValueSelected:n,subscribe:a,toggleSelect:u,showMoreValues(){let{facetId:p}=t,{activeValue:y,values:h}=this.state,f=(y?.children.length??h.length)+Zo;l(go({facetId:p,numberOfValues:f})),l(t.fetchProductsActionCreator())},showLessValues(){let{facetId:p}=t;l(go({facetId:p,numberOfValues:Zo})),l(t.fetchProductsActionCreator())},facetSearch:d,get state(){return Ew(r.state,DS(e[z],m()))},type:"hierarchical"}}var Ew=(e,t)=>{let{values:r}=e,o=Ft(r),n=o.length?o[o.length-1]:void 0,a=n?n.children.length>Zo:!1,u=n?.moreValuesAvailable??e.canShowMoreValues??!1,l=!!n;return{...e,activeValue:n,canShowLessValues:a,canShowMoreValues:u,facetSearch:{isLoading:t?.isLoading??!1,moreValuesAvailable:t?.response.moreValuesAvailable??!1,query:t?.options.query??"",values:t?.response.values??[]},hasActiveValues:l,selectedValueAncestry:o,type:"hierarchical",values:r}};s();c();function QS(e,t){let r=jt(e,{options:{...t,toggleSelectActionCreator:qt,toggleExcludeActionCreator:kt}}),{dispatch:o}=e,{facetId:n,fetchProductsActionCreator:a}=t;return{...r,setRanges(u){o(In({facetId:n,values:u.map(l=>({...l,numberOfResults:0}))})),o(a())},get state(){return Tw(r.state)},type:"dateRange"}}var Tw=e=>({...e,type:"dateRange"});s();c();function BS(e,t){if(!Ow(e))throw Z;let r=te(e),{dispatch:o}=e,n=j([u=>u.facetOrder,u=>u.commerceFacetSet],(u,l)=>u.map(m=>a(l,m))),a=j((u,l)=>({facetId:l,type:u[l].request.type}),({type:u,facetId:l})=>{switch(u){case"dateRange":return t.buildDateFacet(e,{facetId:l});case"hierarchical":return t.buildCategoryFacet(e,{facetId:l});case"numericalRange":return t.buildNumericFacet(e,{facetId:l});case"regular":return t.buildRegularFacet(e,{facetId:l});case"location":return t.buildLocationFacet(e,{facetId:l})}});return{...r,deselectAll:()=>{o(_e()),o(t.fetchProductsActionCreator())},get facets(){return n(e[z])},get state(){return e[z].facetOrder}}}function Ow(e){return e.addReducers({facetOrder:Ut,commerceFacetSet:me}),!0}s();c();function US(e,t){let{toggleSingleExclude:r,toggleExclude:o,isValueExcluded:n,...a}=jt(e,{options:{...t,toggleSelectActionCreator:Vt}});return{...a,get state(){return qw(a.state)},type:"location"}}var qw=e=>({...e,type:"location"});s();c();s();c();var jS=j((e,t)=>e.manualNumericFacetSet[t]?.manualRange,e=>e);function _S(e,t){let r=jt(e,{options:{...t,toggleSelectActionCreator:dt,toggleExcludeActionCreator:mt}});if(!kw(e))throw Z;let{dispatch:o}=e,{facetId:n,fetchProductsActionCreator:a}=t;return{...r,setRanges(u){u.forEach(l=>{o(wn({facetId:n,...l}))}),o(a())},get state(){let u=t.facetResponseSelector(e[z],n);return Vw(r.state,u?.type==="numericalRange"?u:void 0,jS(e[z],n))},type:"numericalRange"}}function kw(e){return e.addReducers({manualNumericFacetSet:is}),!0}var Vw=(e,t,r)=>{let o=t?.type==="numericalRange"?t:void 0;return{...e,...o?.domain&&{domain:{min:o.domain.min,max:o.domain.max}},...r&&{manualRange:r},type:"numericalRange"}};s();c();s();c();var $S=j((e,t)=>({facetSearchSelector:e.facetSearchSet[t]}),({facetSearchSelector:e})=>e);s();c();s();c();function zS(e,t){let{dispatch:r}=e,{options:o,select:n,exclude:a,isForFieldSuggestions:u,executeFacetSearchActionCreator:l,executeFieldSuggestActionCreator:m}=t,{facetId:d}=o,p=()=>"state"in e?e.state.facetSearchSet[d]:e[z].facetSearchSet[d];r(Yi(o));let y=Gs(e,{options:o,getFacetSearch:p,isForFieldSuggestions:u,executeFacetSearchActionCreator:l,executeFieldSuggestActionCreator:m});return{...y,select(h){r(Yt({facetId:d,value:h})),n(h)},exclude(h){r(Jt({facetId:d,value:h})),a(h)},singleSelect(h){r(ze(d)),r(Yt({facetId:d,value:h})),n(h)},singleExclude(h){r(ze(d)),r(Jt({facetId:d,value:h})),a(h)},get state(){let{values:h}=y.state;return{...y.state,values:h.map(({count:f,displayValue:S,rawValue:R})=>({count:f,displayValue:S,rawValue:R}))}}}}function Js(e,t){if(!Dw(e))throw Z;let{showMoreResults:r,state:o,updateCaptions:n,...a}=zS(e,{...t,executeFacetSearchActionCreator:u=>lt({facetId:u,facetSearchType:t.options.type}),executeFieldSuggestActionCreator:u=>He({facetId:u,facetSearchType:t.options.type})});return{...a}}function Dw(e){return e.addReducers({facetSearchSet:Dn}),!0}function WS(e,t){let r=jt(e,{options:{...t,toggleSelectActionCreator:Nt,toggleExcludeActionCreator:Dt}}),o=()=>r.state.facetId,{dispatch:n}=e,a=Js(e,{options:{facetId:o(),...t.facetSearch},select:()=>{n(t.fetchProductsActionCreator())},exclude:()=>{n(t.fetchProductsActionCreator())},isForFieldSuggestions:!1});return{...r,facetSearch:a,get state(){return Nw(r.state,$S(e[z],o()))},type:"regular"}}var Nw=(e,t)=>({...e,facetSearch:{isLoading:t?.isLoading??!1,moreValuesAvailable:t?.response.moreValuesAvailable??!1,query:t?.options.query??"",values:t?.response.values??[]},type:"regular"});s();c();s();c();function HS(e,t,r){if(!Mw(e))throw Z;let o=1e3,n={selectionDelay:o,debounceWait:o,...t.options},a;return{select:xs(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function Mw(e){return e.addReducers({configuration:Ve}),!0}function Xs(e,t){let r=!1,o=()=>{let a=(y,h,f)=>`- Could not retrieve '${y}' analytics property from field${h.length>1?"s":""} '${h.join("', '")}'; fell back to ${f}.`,u=[],{ec_name:l,ec_promo_price:m,ec_price:d,ec_product_id:p}=t.options.product;if(l||u.push(a("name",["ec_gender"],"permanentid")),!m&&!d&&u.push(a("price",["ec_promo_price","ec_price"],"NaN")),p||u.push(a("productId",["ec_product_id"],"permanentid")),u.length!==0)return`Some required analytics properties could not be retrieved from the expected fields for product with permanentid '${t.options.product.permanentid}':

${u.join(`
`)}

Review the configuration of the above 'ec_'-prefixed fields in your index, and make sure they contain the correct metadata.`};return{...HS(e,t,()=>{r||(r=!0,e.dispatch(bs({product:{name:t.options.product.ec_name??t.options.product.permanentid,price:t.options.product.ec_promo_price??t.options.product.ec_price??NaN,productId:t.options.product.ec_product_id??t.options.product.permanentid},position:t.options.product.position,responseId:t.responseIdSelector(e[z])})))}),warningMessage:o()}}s();c();var Lw=new ne({pageSize:new U({min:1,max:1e3,required:!1})});function KS(e,t){if(!Qw(e))throw Z;let r=te(e),{dispatch:o}=e;Le(e,Lw,t.options,"buildCorePagination");let n=t.options?.slotId;t.options?.pageSize&&o(so({slotId:n,pageSize:t.options.pageSize})),n&&o(Ho({slotId:n}));let a=j(u=>n?u.commercePagination.recommendations[n]:u.commercePagination.principal,({perPage:u,...l})=>({pageSize:u??0,...l}));return{...r,get state(){return a(e[z])},selectPage(u){o(hr({slotId:n,page:u})),o(t.fetchProductsActionCreator())},nextPage(){o(zo({slotId:n})),o(t.fetchProductsActionCreator())},previousPage(){o(Wo({slotId:n})),o(t.fetchProductsActionCreator())},setPageSize(u){o(so({slotId:n,pageSize:u})),o(t.fetchProductsActionCreator())},fetchMoreProducts(){o(t.fetchMoreProductsActionCreator())}}}function Qw(e){return e.addReducers({commercePagination:Mt}),!0}s();c();s();c();s();c();var Bw=Object.getOwnPropertyNames,Uw=Object.getOwnPropertySymbols,jw=Object.prototype.hasOwnProperty;function GS(e,t){return function(o,n,a){return e(o,n,a)&&t(o,n,a)}}function Zs(e){return function(r,o,n){if(!r||!o||typeof r!="object"||typeof o!="object")return e(r,o,n);var a=n.cache,u=a.get(r),l=a.get(o);if(u&&l)return u===o&&l===r;a.set(r,o),a.set(o,r);var m=e(r,o,n);return a.delete(r),a.delete(o),m}}function YS(e){return Bw(e).concat(Uw(e))}var oC=Object.hasOwn||function(e,t){return jw.call(e,t)};function Kn(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var nC="_owner",JS=Object.getOwnPropertyDescriptor,XS=Object.keys;function _w(e,t,r){var o=e.length;if(t.length!==o)return!1;for(;o-- >0;)if(!r.equals(e[o],t[o],o,o,e,t,r))return!1;return!0}function $w(e,t){return Kn(e.getTime(),t.getTime())}function ZS(e,t,r){if(e.size!==t.size)return!1;for(var o={},n=e.entries(),a=0,u,l;(u=n.next())&&!u.done;){for(var m=t.entries(),d=!1,p=0;(l=m.next())&&!l.done;){var y=u.value,h=y[0],f=y[1],S=l.value,R=S[0],P=S[1];!d&&!o[p]&&(d=r.equals(h,R,a,p,e,t,r)&&r.equals(f,P,h,R,e,t,r))&&(o[p]=!0),p++}if(!d)return!1;a++}return!0}function zw(e,t,r){var o=XS(e),n=o.length;if(XS(t).length!==n)return!1;for(var a;n-- >0;)if(a=o[n],a===nC&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!oC(t,a)||!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function ui(e,t,r){var o=YS(e),n=o.length;if(YS(t).length!==n)return!1;for(var a,u,l;n-- >0;)if(a=o[n],a===nC&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!oC(t,a)||!r.equals(e[a],t[a],a,a,e,t,r)||(u=JS(e,a),l=JS(t,a),(u||l)&&(!u||!l||u.configurable!==l.configurable||u.enumerable!==l.enumerable||u.writable!==l.writable)))return!1;return!0}function Ww(e,t){return Kn(e.valueOf(),t.valueOf())}function Hw(e,t){return e.source===t.source&&e.flags===t.flags}function eC(e,t,r){if(e.size!==t.size)return!1;for(var o={},n=e.values(),a,u;(a=n.next())&&!a.done;){for(var l=t.values(),m=!1,d=0;(u=l.next())&&!u.done;)!m&&!o[d]&&(m=r.equals(a.value,u.value,a.value,u.value,e,t,r))&&(o[d]=!0),d++;if(!m)return!1}return!0}function Kw(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Gw="[object Arguments]",Yw="[object Boolean]",Jw="[object Date]",Xw="[object Map]",Zw="[object Number]",eE="[object Object]",tE="[object RegExp]",rE="[object Set]",oE="[object String]",nE=Array.isArray,tC=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,rC=Object.assign,aE=Object.prototype.toString.call.bind(Object.prototype.toString);function iE(e){var t=e.areArraysEqual,r=e.areDatesEqual,o=e.areMapsEqual,n=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,l=e.areSetsEqual,m=e.areTypedArraysEqual;return function(p,y,h){if(p===y)return!0;if(p==null||y==null||typeof p!="object"||typeof y!="object")return p!==p&&y!==y;var f=p.constructor;if(f!==y.constructor)return!1;if(f===Object)return n(p,y,h);if(nE(p))return t(p,y,h);if(tC!=null&&tC(p))return m(p,y,h);if(f===Date)return r(p,y,h);if(f===RegExp)return u(p,y,h);if(f===Map)return o(p,y,h);if(f===Set)return l(p,y,h);var S=aE(p);return S===Jw?r(p,y,h):S===tE?u(p,y,h):S===Xw?o(p,y,h):S===rE?l(p,y,h):S===eE?typeof p.then!="function"&&typeof y.then!="function"&&n(p,y,h):S===Gw?n(p,y,h):S===Yw||S===Zw||S===oE?a(p,y,h):!1}}function cE(e){var t=e.circular,r=e.createCustomConfig,o=e.strict,n={areArraysEqual:o?ui:_w,areDatesEqual:$w,areMapsEqual:o?GS(ZS,ui):ZS,areObjectsEqual:o?ui:zw,arePrimitiveWrappersEqual:Ww,areRegExpsEqual:Hw,areSetsEqual:o?GS(eC,ui):eC,areTypedArraysEqual:o?ui:Kw};if(r&&(n=rC({},n,r(n))),t){var a=Zs(n.areArraysEqual),u=Zs(n.areMapsEqual),l=Zs(n.areObjectsEqual),m=Zs(n.areSetsEqual);n=rC({},n,{areArraysEqual:a,areMapsEqual:u,areObjectsEqual:l,areSetsEqual:m})}return n}function sE(e){return function(t,r,o,n,a,u,l){return e(t,r,l)}}function uE(e){var t=e.circular,r=e.comparator,o=e.createState,n=e.equals,a=e.strict;if(o)return function(m,d){var p=o(),y=p.cache,h=y===void 0?t?new WeakMap:void 0:y,f=p.meta;return r(m,d,{cache:h,equals:n,meta:f,strict:a})};if(t)return function(m,d){return r(m,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};var u={cache:void 0,equals:n,meta:void 0,strict:a};return function(m,d){return r(m,d,u)}}var nme=_t(),ame=_t({strict:!0}),ime=_t({circular:!0}),cme=_t({circular:!0,strict:!0}),sme=_t({createInternalComparator:function(){return Kn}}),ume=_t({strict:!0,createInternalComparator:function(){return Kn}}),lme=_t({circular:!0,createInternalComparator:function(){return Kn}}),dme=_t({circular:!0,createInternalComparator:function(){return Kn},strict:!0});function _t(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,o=e.createInternalComparator,n=e.createState,a=e.strict,u=a===void 0?!1:a,l=cE(e),m=iE(l),d=o?o(m):sE(m);return uE({circular:r,comparator:m,createState:n,equals:d,strict:u})}function aC(e,t,r=(o,n)=>o===n){return e.length===t.length&&e.findIndex((o,n)=>!r(t[n],o))===-1}function lE(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(o=>Ro(r,o))!==-1)}var Ro=_t({createCustomConfig:e=>({...e,areArraysEqual:lE})});var dE=e=>new ne({parameters:new k({options:{required:!0},values:e})});function iC(e,t){let{dispatch:r}=e,o=te(e);return je(e,dE(t.parametersDefinition),t.initialState,"buildCoreParameterManager"),r(t.restoreActionCreator(t.initialState.parameters)),{...o,synchronize(n){let a=t.activeParametersSelector(e[z]),u=t.enrichParameters(e[z],a),l=t.enrichParameters(e[z],n);Ro(u,l)||(r(t.restoreActionCreator(n)),r(t.fetchProductsActionCreator()))},get state(){return{parameters:t.activeParametersSelector(e[z])}}}}s();c();function mE(e,t){if(!t)return;let r=new ne({criterion:Lm});je(e,r,t,"buildSort")}function cC(e,t){if(!pE(e))throw Z;let{dispatch:r}=e,o=te(e);mE(e,t.initialState);let n=t.initialState?.criterion;return n&&r(cr(n)),{...o,get state(){return e[z].commerceSort},sortBy(a){r(cr(a)),r(t.fetchProductsActionCreator())},isSortedBy(a){return JSON.stringify(this.state.appliedSort)===JSON.stringify(a)},isAvailable(a){return this.state.availableSorts.some(u=>JSON.stringify(u)===JSON.stringify(a))}}}function pE(e){return e.addReducers({commerceSort:Qt}),!0}s();c();var sC=(e,t)=>{let r=te(e),{options:{numberOfProductsSelector:o,responseIdSelector:n,isLoadingSelector:a,errorSelector:u,pageSelector:l,perPageSelector:m,totalEntriesSelector:d,enrichSummary:p}}=t,y=()=>e[z],h=()=>l(y()),f=()=>m(y()),S=()=>d(y()),R=()=>!!n(y()),P=()=>R()&&S()>0,A=()=>P()?h()*f()+1:0,C=()=>P()?A()+(o(y())-1):0;return{...r,get state(){return{firstRequestExecuted:R(),firstProduct:A(),lastProduct:C(),totalNumberOfProducts:S(),hasProducts:P(),isLoading:a(y()),hasError:u(y())!==null,...p?p(y()):{}}}}};s();c();s();c();s();c();s();c();s();c();s();c();s();c();s();c();s();c();s();c();s();c();var hE=new U({min:1,default:8,required:!1}),SE=new U({min:1,max:20,default:5,required:!1}),CE={desiredCount:SE,numberOfValues:hE},Ape=v("automaticFacet/setOptions",e=>b(e,CE)),bpe=v("automaticFacet/deselectAll",e=>b(e,re)),xE=V,uC=v("automaticFacet/toggleSelectValue",e=>b(e,{field:xE,selection:new k({values:Tt})}));var Hpe=G(br(),e=>{e.addCase(Tf,(t,r)=>{let o=Ld(t),n=r.payload;t.defaultNumberOfResults=t.numberOfResults=n,t.firstResult=li(o,n)}).addCase(Of,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Ln,t=>{t.firstResult=0}).addCase(qf,(t,r)=>{let o=r.payload;t.firstResult=li(o,t.numberOfResults)}).addCase(pn,(t,r)=>{let o=r.payload;t.firstResult=li(o,t.numberOfResults)}).addCase(Vf,t=>{let r=Ld(t),o=Math.max(r-1,1);t.firstResult=li(o,t.numberOfResults)}).addCase(kf,t=>{let r=Ld(t),o=RE(t),n=Math.min(r+1,o);t.firstResult=li(n,t.numberOfResults)}).addCase(ve.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(Ie,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(ge.fulfilled,(t,r)=>{let{response:o}=r.payload;t.totalCountFiltered=o.totalCountFiltered}).addCase(ze,t=>{De(t)}).addCase(Rn,t=>{De(t)}).addCase(Uc,t=>{De(t)}).addCase(vn,t=>{De(t)}).addCase(Jt,t=>{De(t)}).addCase(Bc,t=>{De(t)}).addCase(Dp,t=>{De(t)}).addCase(Vp,t=>{De(t)}).addCase(en,t=>{De(t)}).addCase(xn,t=>{De(t)}).addCase(Fn,t=>{De(t)}).addCase(at,t=>{De(t)}).addCase(Jc,t=>{De(t)}).addCase(Zc,t=>{De(t)}).addCase(Yt,t=>{De(t)}).addCase(uC,t=>{De(t)})});function De(e){e.firstResult=br().firstResult}function Ld(e){let{firstResult:t,numberOfResults:r}=e;return dC(t,r)}function RE(e){let{totalCountFiltered:t,numberOfResults:r}=e;return mC(t,r)}function li(e,t){return(e-1)*t}function dC(e,t){return Math.round(e/t)+1}function mC(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}s();c();s();c();var Hfe=new ne({parameters:new k({options:{required:!0},values:Ji})});var pC=new ne({fragment:new T});function fC(e,t){let r;function o(){r=t.requestIdSelector(e[z])}function n(){return r!==t.requestIdSelector(e[z])}je(e,pC,t.initialState,"buildUrlManager");let a=te(e),u=t.initialState.fragment;o();let l=t.parameterManagerBuilder(e,{initialState:{parameters:t.serializer.deserialize(u)}});return{...a,subscribe(m){let d=()=>{let p=this.state.fragment;!vE(t.serializer.deserialize,u,p)&&n()&&(u=p,m()),o()};return d(),e.subscribe(d)},get state(){return{fragment:t.serializer.serialize(l.state.parameters)}},synchronize(m){u=m;let d=t.serializer.deserialize(m);l.synchronize(d)}}}function vE(e,t,r){if(t===r)return!0;let o=e(t),n=e(r);return Ro(o,n)}function gC(e,t){return{...hC(e,{...t,facetSearchType:"SEARCH"}),didYouMean(){return kS(e)}}}function yC(e,t){return hC(e,{...t,facetSearchType:"LISTING"})}function hC(e,t){let{fetchProductsActionCreator:r,facetResponseSelector:o,isFacetLoadingResponseSelector:n,requestIdSelector:a,serializer:u,parametersDefinition:l,activeParametersSelector:m,restoreActionCreator:d,enrichParameters:p,facetSearchType:y}=t;return{...Qd(e,t),sort(h){return cC(e,{...h,fetchProductsActionCreator:r})},facetGenerator(){let h={fetchProductsActionCreator:r,facetResponseSelector:o,isFacetLoadingResponseSelector:n,facetSearch:{type:y}};return BS(e,{buildRegularFacet:(f,S)=>WS(e,{...S,...h}),buildNumericFacet:(f,S)=>_S(e,{...S,...h}),buildDateFacet:(f,S)=>QS(e,{...S,...h}),buildCategoryFacet:(f,S)=>LS(e,{...S,...h}),buildLocationFacet:(f,S)=>US(e,{...S,...h}),fetchProductsActionCreator:r})},breadcrumbManager(){return VS(e,{facetResponseSelector:o,fetchProductsActionCreator:r})},urlManager(h){return fC(e,{...h,requestIdSelector:a,parameterManagerBuilder:(f,S)=>this.parameterManager(S),serializer:u})},parameterManager(h){return iC(e,{...h,parametersDefinition:l,activeParametersSelector:m,restoreActionCreator:d,fetchProductsActionCreator:r,enrichParameters:p})}}}function Qd(e,t){let{responseIdSelector:r,isLoadingSelector:o,errorSelector:n,numberOfProductsSelector:a,fetchProductsActionCreator:u,fetchMoreProductsActionCreator:l,slotId:m,pageSelector:d,perPageSelector:p,totalEntriesSelector:y,enrichSummary:h}=t;return{interactiveProduct(f){return Xs(e,{...f,responseIdSelector:r})},pagination(f){return KS(e,{...f,options:{...f?.options,slotId:m},fetchProductsActionCreator:u,fetchMoreProductsActionCreator:l})},summary(){return sC(e,{options:{responseIdSelector:r,isLoadingSelector:o,errorSelector:n,numberOfProductsSelector:a,pageSelector:d,perPageSelector:p,totalEntriesSelector:y,enrichSummary:h}})}}}s();c();var eu=j((e,t)=>({state:e,facetId:t}),({state:e,facetId:t})=>{let r=e.commerceSearch.facets.find(o=>o.facetId===t);if(r&&r.facetId in e.commerceFacetSet)return r}),tu=j(e=>({state:e}),({state:e})=>e.commerceSearch.isLoading);function SC(e){if(!PE(e))throw Z;let t=te(e),{dispatch:r}=e,o=()=>e[z],n=gC(e,{responseIdSelector:fa,fetchProductsActionCreator:ie,fetchMoreProductsActionCreator:Cr,facetResponseSelector:eu,isFacetLoadingResponseSelector:tu,requestIdSelector:Bm,serializer:wS,parametersDefinition:es,restoreActionCreator:Pe,activeParametersSelector:zm,enrichParameters:Wm,isLoadingSelector:jm,errorSelector:_m,pageSelector:Ei,perPageSelector:mr,totalEntriesSelector:pr,numberOfProductsSelector:ga,enrichSummary:Hm});return{...t,...n,get state(){return o().commerceSearch},promoteChildToParent(a){r(Jo({child:a}))},executeFirstSearch(){fa(o())===""&&r(ie())}}}function PE(e){return e.addReducers({commerceContext:vt,configuration:Ve,commerceSearch:Lt,commerceQuery:Ke}),!0}s();c();s();c();var CC=j((e,t)=>({state:e,facetId:t}),({state:e,facetId:t})=>{let r=e.productListing.facets.find(o=>o.facetId===t);if(r&&r.facetId in e.commerceFacetSet)return r}),xC=j(e=>({state:e}),({state:e})=>e.productListing.isLoading);function RC(e){if(!AE(e))throw Z;let t=te(e),{dispatch:r}=e,o=()=>e[z],n=yC(e,{responseIdSelector:ua,fetchProductsActionCreator:he,fetchMoreProductsActionCreator:kr,facetResponseSelector:CC,isFacetLoadingResponseSelector:xC,requestIdSelector:km,serializer:ES,parametersDefinition:Pn,activeParametersSelector:Ti,restoreActionCreator:We,enrichParameters:Oi,isLoadingSelector:Dm,errorSelector:Nm,pageSelector:Ei,perPageSelector:mr,totalEntriesSelector:pr,numberOfProductsSelector:la});return{...t,...n,get state(){let{products:a,error:u,isLoading:l,responseId:m}=o().productListing;return{products:a,error:u,isLoading:l,responseId:m}},promoteChildToParent(a){r(An({child:a}))},refresh:()=>r(he()),executeFirstRequest(){ua(o())===""&&r(he())}}}function AE(e){return e.addReducers({productListing:On,commerceContext:vt,configuration:Ve}),!0}s();c();function FC(e,t){if(!bE(e))throw Z;je(e,zg,t.options,"buildRecommendations");let r=te(e),{dispatch:o}=e,{slotId:n,productId:a}=t.options;o(En({slotId:n}));let u=j(m=>m.recommendations[n],m=>m),l=Qd(e,{slotId:n,responseIdSelector:m=>m.recommendations[n].responseId,fetchProductsActionCreator:()=>St({slotId:n}),fetchMoreProductsActionCreator:()=>Mr({slotId:n}),isLoadingSelector:m=>$g(m,n),errorSelector:m=>m.recommendations[n].error,pageSelector:m=>qm(m,n),perPageSelector:m=>Ii(m,n),totalEntriesSelector:m=>wi(m,n),numberOfProductsSelector:m=>Ga(m,n)});return{...r,...l,promoteChildToParent(m){o(Tn({child:m,slotId:n}))},get state(){return u(e[z])},refresh:()=>o(St({slotId:n,productId:a}))}}function bE(e){return e.addReducers({recommendations:qn}),!0}s();c();function vC(e){return{view:t=>{e.dispatch(As(t))}}}s();c();s();c();s();c();s();c();var IE=G(qe(),e=>e.addCase(It,(t,r)=>({...t,...r.payload})).addCase(hn,(t,r)=>{t.q=r.payload}).addCase(ai,(t,r)=>{t.q=r.payload.expression}).addCase(ve.fulfilled,(t,r)=>r.payload?.query??t).addCase(Ie,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax}));s();c();var Bd={open:new T,close:new T},Ud={id:V,numberOfSuggestions:new U({min:0}),enableQuerySyntax:new W,highlightOptions:new k({values:{notMatchDelimiters:new k({values:Bd}),exactMatchDelimiters:new k({values:Bd}),correctionDelimiters:new k({values:Bd})}}),clearFilters:new W},wE=new ne(Ud);function PC(e,t){return e?e.completions.map(r=>({highlightedValue:Mu(r.highlighted,t),rawValue:r.expression})):[]}s();c();var ru={clearFilters:!0},{id:EE,highlightOptions:TE,clearFilters:OE}=Ud,jd={id:EE,highlightOptions:TE,clearFilters:OE},AC=new ne(jd);function ou(e,t={}){if(!qE(e))throw Z;let r=te(e),{dispatch:o}=e,n=()=>e[z],a=t.options?.id||eo("search_box"),u={id:a,highlightOptions:{...t.options?.highlightOptions},...ru,...t.options};Le(e,AC,u,"buildSearchBox"),o(Qn({id:a,query:n().commerceQuery.query??""})),o(bn({id:a}));let l=()=>n().querySet[u.id],m=async()=>{let d={query:l(),clearFilters:u.clearFilters};o(Go(d)),o(ie())};return{...r,updateText(d){o(So({id:a,query:d})),this.showSuggestions()},clear(){o(So({id:a,query:""})),o(Vr({id:a}))},showSuggestions(){o(ke({id:a}))},selectSuggestion(d){o(Ot({id:a,expression:d})),m().then(()=>{o(Vr({id:a}))})},submit(){m(),o(Vr({id:a}))},get state(){let d=n().querySuggest[u.id],p=PC(d,u.highlightOptions),y=d?d.isLoading:!1;return{searchBoxId:a,value:l(),suggestions:p,isLoading:n().commerceSearch.isLoading,isLoadingSuggestions:y}}}}function qE(e){return e.addReducers({commerceQuery:Ke,querySuggest:xo,configuration:Ve,querySet:Co,commerceSearch:Lt}),!0}s();c();var kE={queries:[]},VE={maxLength:10,clearFilters:!0},DE=new ne({queries:new ee({required:!0})}),NE=new ne({maxLength:new U({required:!0,min:1}),clearFilters:new W});function ME(e,t){Le(e,NE,t?.options,"buildRecentQueriesList"),je(e,DE,t?.initialState,"buildRecentQueriesList")}function bC(e,t){if(!LE(e))throw Z;let r=te(e),{dispatch:o}=e,n=()=>e[z],a={...VE,...t?.options},u={...kE,...t?.initialState};ME(e,{options:a,initialState:u});let l={queries:u.queries,maxLength:a.maxLength};return o(Vs(l)),{...r,get state(){let m=n();return{...m.recentQueries,analyticsEnabled:m.configuration.analytics.enabled}},clear(){o(ks())},executeRecentQuery(m){let d=new U({required:!0,min:0,max:this.state.queries.length}).validate(m);if(d)throw new Error(d);let p={query:this.state.queries[m],clearFilters:a.clearFilters};o(Go(p)),o(ie())}}}function LE(e){return e.addReducers({search:Lt,recentQueries:Ds}),!0}s();c();var QE={searchBoxId:pe,cacheTimeout:new U},BE=new ne(QE);function IC(e,t){if(!UE(e))throw Z;let r=te(e),{dispatch:o}=e,n=()=>e[z],a={searchBoxId:t.options.searchBoxId||eo("instant-products-"),cacheTimeout:t.options.cacheTimeout||6e4};Le(e,BE,a,"buildInstantProducts");let u=a.searchBoxId;o(jn({id:u}));let l=()=>n().instantProducts[u],m=y=>l().cache[y],d=()=>l().q,p=()=>{let y=m(d());return y?y.isLoading?[]:y.products:[]};return{...r,updateQuery(y){if(!y)return;let h=m(y);(!h||!h.isLoading&&(h.error||ws(h)))&&o(Yo({id:u,q:y,cacheTimeout:a.cacheTimeout})),o(_n({id:u,query:y}))},clearExpired(){o(Bn({id:u}))},promoteChildToParent(y){o(Un({child:y,id:u,query:d()}))},interactiveProduct(y){return Xs(e,{...y,responseIdSelector:()=>l().cache[d()].searchUid})},get state(){let y=d(),h=m(y);return{query:y,isLoading:h?.isLoading||!1,error:h?.error||null,products:p(),totalCount:h?.totalCountFiltered||0}}}}function UE(e){return e.addReducers({instantProducts:Es}),!0}s();c();s();c();s();c();function wC(){return{}}var TC=G(wC(),e=>e.addCase($n,(t,r)=>{let{id:o,redirectionUrl:n,overwrite:a}=r.payload;!a&&o in t||(t[o]=EC(n))}).addCase(zn,(t,r)=>{let{id:o,redirectionUrl:n}=r.payload,a=t[o];a&&(a.defaultRedirectionUrl=n)}).addCase(Wn,(t,r)=>{let{id:o}=r.payload,n=t[o];if(n){t[o]=EC(n.defaultRedirectionUrl);return}}).addCase($r.pending,(t,r)=>{let o=t[r.meta.arg.id];o&&(o.isLoading=!0)}).addCase($r.fulfilled,(t,r)=>{let o=r.payload,n=t[r.meta.arg.id];n&&(n.redirectTo=o||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase($r.rejected,(t,r)=>{let o=t[r.meta.arg.id];o&&(o.isLoading=!1)}));function EC(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1}}s();c();var OC=new ne({...jd,redirectionUrl:new T({required:!0,emptyAllowed:!1}),overwrite:new W({required:!1})});function qC(e,t){if(!jE(e))throw Z;let{dispatch:r}=e,o=()=>e[z],n=t.options.id||eo("standalone_search_box"),a={id:n,highlightOptions:{...t.options.highlightOptions},...ru,overwrite:!1,...t.options};Le(e,OC,a,"buildStandaloneSearchBox");let u=ou(e,{options:a});return r($n({id:n,redirectionUrl:a.redirectionUrl,overwrite:a.overwrite})),{...u,updateText(l){u.updateText(l)},selectSuggestion(l){r(Ot({id:n,expression:l})),this.submit()},afterRedirection(){r(Wn({id:n}))},updateRedirectUrl(l){r(zn({id:n,redirectionUrl:l}))},submit(){r(it({query:this.state.value})),r($r({id:n}))},get state(){let m=o().commerceStandaloneSearchBoxSet[n];return{...u.state,redirectTo:m.redirectTo}}}}function jE(e){return e.addReducers({commerceQuery:Ke,commerceStandaloneSearchBoxSet:TC,configuration:Ve,querySuggest:xo}),!0}s();c();s();c();var _E=new ne({content:new de({required:!0}),conditions:new de({required:!0}),priority:new U({required:!1,default:0,min:0}),fields:new ee({required:!1,each:V})});function kC(){let e=[],t=r=>{let o=_E.validate(r);if(!r.conditions.every(a=>a instanceof Function))throw new Xn("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return o};return{registerTemplates(...r){r.forEach(o=>{let n={...t(o),fields:o.fields||[]};e.push(n)}),e.sort((o,n)=>n.priority-o.priority)},selectTemplate(r){let o=e.find(n=>n.conditions.every(a=>a(r)));return o?o.content:null},selectLinkTemplate(r){let o=e.find(n=>n.conditions.every(a=>a(r)));return o?o.linkContent:null}}}function VC(){return kC()}s();c();var nu=(e,t)=>{let r=e;return K(r[t])?K(e.additionalFields[t])?null:e.additionalFields[t]:r[t]},$E=e=>t=>e.every(r=>!K(nu(t,r))),zE=e=>t=>e.every(r=>K(nu(t,r))),WE=(e,t)=>r=>{let o=DC(e,r);return t.some(n=>o.some(a=>`${a}`.toLowerCase()===n.toLowerCase()))},HE=(e,t)=>r=>{let o=DC(e,r);return t.every(n=>o.every(a=>`${a}`.toLowerCase()!==n.toLowerCase()))},DC=(e,t)=>{let r=nu(t,e);return fi(r)?r:[r]},NC={getProductProperty:nu,fieldsMustBeDefined:$E,fieldsMustNotBeDefined:zE,fieldMustMatch:WE,fieldMustNotMatch:HE};s();c();function MC(e){if(!KE(e))throw Z;let t=te(e),r=()=>e[z],o=r().triggers.notifications;return{...t,subscribe(n){let a=()=>{let u=!aC(o,this.state.notifications);o=this.state.notifications,u&&n()};return a(),e.subscribe(a)},get state(){return{notifications:r().triggers.notifications}}}}function KE(e){return e.addReducers({triggers:Bt}),!0}s();c();function LC(e){if(!GE(e))throw Z;let t=te(e),r=()=>e[z],o=r().triggers.redirectTo;return{...t,subscribe(n){let a=()=>{let u=o!==this.state.redirectTo;o=this.state.redirectTo,u&&this.state.redirectTo&&n()};return a(),e.subscribe(a)},get state(){return{redirectTo:r().triggers.redirectTo}}}}function GE(e){return e.addReducers({triggers:Bt}),!0}s();c();function QC(e){if(!YE(e))throw Z;let t=te(e),{dispatch:r}=e,o=()=>e[z],n=()=>o().triggers.queryModification.newQuery,a=()=>o().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:n(),originalQuery:a(),wasQueryModified:n()!==""}},undo(){r(Sr({q:n()})),r(it({query:a()})),r(ie())}}}function YE(e){return e.addReducers({triggers:Bt,query:Ke}),!0}s();c();s();c();function BC(e,t){if(!JE(e))throw Z;let{dispatch:r}=e,o=Qe(t.facetId),n=Ys(e,{options:{facetId:o,...t.facetSearch,numberOfValues:10},select:()=>{r(t.fetchProductsActionCreator())},isForFieldSuggestions:!0}),a=()=>e[z],u=d=>a().fieldSuggestionsOrder.find(p=>p.facetId===d),l=te(e),m=j(d=>d.categoryFacetSearchSet[o],d=>({isLoading:d.isLoading,moreValuesAvailable:d.response.moreValuesAvailable,query:d.options.query,values:d.response.values}));return{...l,...n,updateText:function(d){n.updateText(d),n.search()},get state(){let d=u(t.facetId);return{displayName:d.displayName,field:d.field,facetId:d.facetId,...m(a())}},type:"hierarchical"}}function JE(e){return e.addReducers({fieldSuggestionsOrder:Nr,categoryFacetSearchSet:Vn,commerceFacetSet:me}),!0}s();c();function UC(e,t){if(!XE(e))throw Z;let{dispatch:r}=e,o=Qe(t.facetId),n=Js(e,{options:{facetId:o,...t.facetSearch},select:()=>{r(t.fetchProductsActionCreator())},exclude:()=>{r(t.fetchProductsActionCreator())},isForFieldSuggestions:!0}),a=()=>e[z],u=d=>a().fieldSuggestionsOrder.find(p=>p.facetId===d),l=te(e),m=j(d=>d.facetSearchSet[o],d=>({isLoading:d.isLoading,moreValuesAvailable:d.response.moreValuesAvailable,query:d.options.query,values:d.response.values}));return{...l,...n,updateText:function(d){n.updateText(d),n.search()},get state(){let d=u(t.facetId);return{displayName:d.displayName,field:d.field,facetId:d.facetId,...m(a())}},type:"regular"}}function XE(e){return e.addReducers({fieldSuggestionsOrder:Nr,commerceFacetSet:me,facetSearchSet:Dn}),!0}function jC(e){if(!ZE(e))throw Z;let t={fetchProductsActionCreator:ie,facetResponseSelector:eu,isFacetLoadingResponseSelector:tu,facetSearch:{type:"SEARCH"}},r=te(e),o=j(n=>n.fieldSuggestionsOrder,n=>n.map(({type:a,facetId:u})=>{switch(a){case"hierarchical":return BC(e,{facetId:u,...t});default:case"regular":return UC(e,{facetId:u,...t})}}));return{...r,get fieldSuggestions(){return o(e[z])},get state(){return e[z].fieldSuggestionsOrder}}}function ZE(e){return e.addReducers({fieldSuggestionsOrder:Nr}),!0}
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
;if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
//# sourceMappingURL=headless.js.map
